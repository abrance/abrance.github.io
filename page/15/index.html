
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Xiaoy</title>
    <meta name="author" content="xiaoy" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link rel="icon" href="/images/avatar.jpg" />
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.cn" />
<link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"
/>
<script> const mixins = {}; </script>

<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>



<script src="/js/lib/preview.js"></script>





<script src="/js/lib/home.js"></script>

<link rel="stylesheet" href="/css/main.css" />

<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>åŠ è½½è¿‡æ…¢è¯·å¼€å¯ç¼“å­˜ æµè§ˆå™¨é»˜è®¤å¼€å¯</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>XIAOY</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;XIAOY</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div id="home-head">
    <div
        id="home-background"
        ref="homeBackground"
        data-images="/images/background.jpg"
    ></div>
    <div id="home-info" @click="homeClick">
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="info">
            <div class="wrap">
                <h1>Xiaoy</h1>
                <h3>xiaoy blog</h3>
                <h5></h5>
            </div>
        </span>
    </div>
</div>
<div
    id="home-posts-wrap"
    ref="homePostsWrap"
    true
>
    <div id="home-posts">
        

<div class="post">
    <a href="/2024/03/11/mdstorage/cargo/">
        <h2 class="post-title">cargo.md</h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/3/11
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h2 id="cargo-æ¦‚è¿°"><a href="#cargo-æ¦‚è¿°" class="headerlink" title="cargo æ¦‚è¿°"></a>cargo æ¦‚è¿°</h2><p><code>https://doc.rust-lang.org/cargo/</code></p>
<p>Cargo æ˜¯ Rust åŒ…ç®¡ç†å™¨ã€‚ Cargo ä¸‹è½½ Rust åŒ…çš„ä¾èµ–é¡¹ï¼Œç¼–è¯‘æ‚¨çš„åŒ…ï¼Œåˆ¶ä½œå¯åˆ†å‘çš„åŒ…ï¼Œå¹¶å°†å®ƒä»¬ä¸Šä¼ åˆ° Rust ç¤¾åŒºçš„åŒ…æ³¨å†Œè¡¨ crates.ioã€‚æ‚¨å¯ä»¥åœ¨ GitHub ä¸Šä¸ºæœ¬ä¹¦åšå‡ºè´¡çŒ®ã€‚</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/cargo/" style="color: #ffa2c4">cargo</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/Rust/" style="color: #00bcd4">Rust</a>
        </span>
        
    </div>
    <a href="/2024/03/11/mdstorage/cargo/" class="go-post">é˜…è¯»å…¨æ–‡</a>
</div>

<div class="post">
    <a href="/2024/03/07/mdstorage/project/cToRust/rust%E7%9A%84AST/">
        <h2 class="post-title">rustçš„AST.md</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/project/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                project
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/3/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p><a href="mailto:&#49;&#x31;&#48;&#x33;&#x30;&#x39;&#x38;&#x36;&#x30;&#x37;&#64;&#113;&#113;&#x2e;&#x63;&#111;&#x6d;">&#49;&#x31;&#48;&#x33;&#x30;&#x39;&#x38;&#x36;&#x30;&#x37;&#64;&#113;&#113;&#x2e;&#x63;&#111;&#x6d;</a></p>
<h2 id="Rust-è¾“å‡º-AST"><a href="#Rust-è¾“å‡º-AST" class="headerlink" title="Rust è¾“å‡º AST"></a>Rust è¾“å‡º AST</h2><h3 id="åˆ‡æ¢ä¸º-nightly-ç‰ˆæœ¬"><a href="#åˆ‡æ¢ä¸º-nightly-ç‰ˆæœ¬" class="headerlink" title="åˆ‡æ¢ä¸º nightly ç‰ˆæœ¬"></a>åˆ‡æ¢ä¸º nightly ç‰ˆæœ¬</h3><p><code>rustup override set nightly</code></p>
<p><code>rustc --version</code></p>
<h3 id="è¾“å‡º-AST"><a href="#è¾“å‡º-AST" class="headerlink" title="è¾“å‡º AST"></a>è¾“å‡º AST</h3><pre><code class="bash">rustc -Z help

# ç®€ç•¥
rustc +nightly src/main.rs -Z unpretty=ast-tree

# è¯¦ç»†
rustc +nightly src/main.rs -Z unpretty=ast-tree,expanded
</code></pre>
<h2 id="Rust-AST-åˆ†æ"><a href="#Rust-AST-åˆ†æ" class="headerlink" title="Rust AST åˆ†æ"></a>Rust AST åˆ†æ</h2><h2 id="Rust-AST-to-Rust-code"><a href="#Rust-AST-to-Rust-code" class="headerlink" title="Rust AST to Rust code"></a>Rust AST to Rust code</h2><h2 id="æ„å»º-Rust-ç¨‹åº"><a href="#æ„å»º-Rust-ç¨‹åº" class="headerlink" title="æ„å»º Rust ç¨‹åº"></a>æ„å»º Rust ç¨‹åº</h2><h3 id="syn-ItemFn"><a href="#syn-ItemFn" class="headerlink" title="syn::ItemFn"></a>syn::ItemFn</h3><pre><code class="rust">pub struct ItemFn &#123;
    pub attrs: Vec&lt;Attribute&gt;,
    pub vis: Visibility,
    pub sig: Signature,
    pub block: Box&lt;Block&gt;,
&#125;
</code></pre>
<p><code>ItemFn</code> æ˜¯ <code>syn</code> åº“ä¸­ç”¨äºè¡¨ç¤º Rust å‡½æ•°çš„ç»“æ„ä½“ã€‚å®ƒåŒ…å«äº†æ„æˆä¸€ä¸ªå‡½æ•°å®šä¹‰çš„æ‰€æœ‰ä¸»è¦éƒ¨åˆ†ã€‚ä»¥ä¸‹æ˜¯å¯¹ <code>ItemFn</code> ç»“æ„ä½“å„å­—æ®µçš„è¯¦ç»†è§£é‡Šï¼š</p>
<h3 id="attrs-Vec"><a href="#attrs-Vec" class="headerlink" title="attrs: Vec&lt;Attribute&gt;"></a><code>attrs: Vec&lt;Attribute&gt;</code></h3><ul>
<li><code>attrs</code> å­—æ®µåŒ…å«äº†å‡½æ•°ä¸Šçš„å±æ€§ï¼ˆattributesï¼‰ã€‚åœ¨ Rust ä¸­ï¼Œå±æ€§ç”¨äºç»™ç¼–è¯‘å™¨ä¼ é€’é¢å¤–çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ <code>#[derive(Debug)]</code> æˆ–è€… <code>#[test]</code>ã€‚è¿™äº›å±æ€§å¯ä»¥åº”ç”¨äºè®¸å¤šç§ç±»çš„é¡¹ï¼ŒåŒ…æ‹¬å‡½æ•°ã€ç»“æ„ä½“ã€æšä¸¾ç­‰ã€‚</li>
<li>ç±»å‹ä¸º <code>Vec&lt;Attribute&gt;</code>ï¼Œæ„å‘³ç€ä¸€ä¸ªå‡½æ•°å¯ä»¥æœ‰é›¶ä¸ªæˆ–å¤šä¸ªå±æ€§ã€‚</li>
</ul>
<h3 id="vis-Visibility"><a href="#vis-Visibility" class="headerlink" title="vis: Visibility"></a><code>vis: Visibility</code></h3><ul>
<li><code>vis</code> å­—æ®µè¡¨ç¤ºå‡½æ•°çš„å¯è§æ€§ï¼ˆvisibilityï¼‰ã€‚Rust ä¸­çš„å¯è§æ€§å…³é”®å­—æœ‰ <code>pub</code>ã€<code>pub(crate)</code> ç­‰ï¼Œç”¨äºæ§åˆ¶é¡¹ï¼ˆæ¯”å¦‚å‡½æ•°ã€ç»“æ„ä½“å­—æ®µç­‰ï¼‰çš„è®¿é—®èŒƒå›´ã€‚</li>
<li><code>Visibility</code> æ˜¯ä¸€ä¸ªæšä¸¾ï¼ŒåŒ…å«äº†ä¸åŒçš„å¯è§æ€§çº§åˆ«ï¼Œä¾‹å¦‚å…¬å¼€ï¼ˆ<code>Public</code>ï¼‰ã€ç§æœ‰ï¼ˆ<code>Inherited</code>ï¼‰ã€å—é™ï¼ˆå…·ä½“å—é™çš„èŒƒå›´ï¼Œå¦‚åœ¨æ¨¡å—å†…å¯è§ï¼‰ç­‰ã€‚</li>
</ul>
<h3 id="sig-Signature"><a href="#sig-Signature" class="headerlink" title="sig: Signature"></a><code>sig: Signature</code></h3><ul>
<li><code>sig</code> å­—æ®µåŒ…å«äº†å‡½æ•°çš„ç­¾åã€‚å‡½æ•°ç­¾åå®šä¹‰äº†å‡½æ•°çš„åç§°ã€å‚æ•°ã€è¿”å›ç±»å‹ä»¥åŠå…¶ä»–å¦‚æ˜¯å¦ <code>async</code>ã€æ˜¯å¦ <code>unsafe</code> çš„ä¿¡æ¯ã€‚</li>
<li><code>Signature</code> æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼ŒåŒ…å«äº†å‡½æ•°åç§°ï¼ˆ<code>ident</code> å­—æ®µä¸º <code>Ident</code> ç±»å‹ï¼‰ã€è¾“å…¥å‚æ•°åˆ—è¡¨ï¼ˆ<code>inputs</code> å­—æ®µä¸º <code>Punctuated&lt;FnArg, Comma&gt;</code> ç±»å‹ï¼‰ã€è¿”å›ç±»å‹ï¼ˆ<code>output</code> å­—æ®µä¸º <code>ReturnType</code> ç±»å‹ï¼‰ã€æ³›å‹å‚æ•°ç­‰ã€‚</li>
</ul>
<h3 id="block-Box"><a href="#block-Box" class="headerlink" title="block: Box&lt;Block&gt;"></a><code>block: Box&lt;Block&gt;</code></h3><ul>
<li><code>block</code> å­—æ®µè¡¨ç¤ºå‡½æ•°ä½“ï¼ŒåŒ…å«äº†å‡½æ•°çš„å®é™…ä»£ç å—ã€‚åœ¨ Rust ä¸­ï¼Œå‡½æ•°ä½“ç”±ä¸€ç³»åˆ—çš„è¯­å¥å’Œå¯èƒ½çš„å°¾éƒ¨è¡¨è¾¾å¼ç»„æˆã€‚</li>
<li>ç±»å‹ä¸º <code>Box&lt;Block&gt;</code>ï¼Œè¿™é‡Œ <code>Block</code> æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œè¡¨ç¤ºç”±èŠ±æ‹¬å· <code>&#123;&#125;</code> åŒ…å›´çš„ä»£ç å—ã€‚<code>Box</code> æ˜¯ Rust çš„ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆç±»å‹ï¼Œç”¨äºåœ¨å †ä¸Šåˆ†é…å†…å­˜ã€‚è¿™é‡Œä½¿ç”¨ <code>Box</code> æ˜¯å› ä¸ºä»£ç å—å¯èƒ½åŒ…å«å¤§é‡çš„æ•°æ®ï¼Œä½¿ç”¨å †åˆ†é…å¯ä»¥é¿å…æ ˆæº¢å‡ºï¼Œå¹¶ä¸”å¯ä»¥æé«˜æ•°æ®ç»“æ„çš„æ•´ä½“æ€§èƒ½ã€‚</li>
</ul>
<h2 id="Signature"><a href="#Signature" class="headerlink" title="Signature"></a>Signature</h2><p><code>Signature</code> ç»“æ„ä½“åœ¨ <code>syn</code> åº“ä¸­ä»£è¡¨äº† Rust å‡½æ•°çš„ç­¾åéƒ¨åˆ†ã€‚ä»¥ä¸‹æ˜¯å¯¹ <code>Signature</code> ç»“æ„ä½“å„å­—æ®µçš„è¯¦ç»†è§£é‡Šï¼š</p>
<h3 id="constness-Option"><a href="#constness-Option" class="headerlink" title="constness: Option&lt;Const&gt;"></a><code>constness: Option&lt;Const&gt;</code></h3><ul>
<li><code>constness</code> å­—æ®µè¡¨ç¤ºå‡½æ•°æ˜¯å¦æ˜¯ä¸€ä¸ª <code>const</code> å‡½æ•°ã€‚åœ¨ Rust ä¸­ï¼Œ<code>const</code> å‡½æ•°å¯ä»¥åœ¨ç¼–è¯‘æ—¶è¢«æ±‚å€¼ã€‚</li>
<li>ç±»å‹ä¸º <code>Option&lt;Const&gt;</code>ï¼Œè¿™æ„å‘³ç€è¯¥å­—æ®µå¯ä»¥æ˜¯ <code>None</code>ï¼ˆè¡¨ç¤ºå‡½æ•°ä¸æ˜¯ <code>const</code>ï¼‰æˆ– <code>Some(Const)</code>ï¼ˆè¡¨ç¤ºå‡½æ•°æ˜¯ <code>const</code>ï¼‰ã€‚</li>
</ul>
<h3 id="asyncness-Option"><a href="#asyncness-Option" class="headerlink" title="asyncness: Option&lt;Async&gt;"></a><code>asyncness: Option&lt;Async&gt;</code></h3><ul>
<li><code>asyncness</code> å­—æ®µè¡¨ç¤ºå‡½æ•°æ˜¯å¦æ˜¯å¼‚æ­¥çš„ï¼Œå³æ˜¯å¦ä½¿ç”¨äº† <code>async</code> å…³é”®å­—ã€‚å¼‚æ­¥å‡½æ•°å…è®¸ä½¿ç”¨ <code>.await</code> è¯­æ³•è¿›è¡Œå¼‚æ­¥æ“ä½œã€‚</li>
<li>ç±»å‹ä¸º <code>Option&lt;Async&gt;</code>ï¼Œè¿™æ„å‘³ç€è¯¥å­—æ®µå¯ä»¥æ˜¯ <code>None</code>ï¼ˆè¡¨ç¤ºå‡½æ•°ä¸æ˜¯å¼‚æ­¥çš„ï¼‰æˆ– <code>Some(Async)</code>ï¼ˆè¡¨ç¤ºå‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼‰ã€‚</li>
</ul>
<h3 id="unsafety-Option"><a href="#unsafety-Option" class="headerlink" title="unsafety: Option&lt;Unsafe&gt;"></a><code>unsafety: Option&lt;Unsafe&gt;</code></h3><ul>
<li><code>unsafety</code> å­—æ®µè¡¨ç¤ºå‡½æ•°æ˜¯å¦æ˜¯ <code>unsafe</code> çš„ã€‚åœ¨ Rust ä¸­ï¼Œ<code>unsafe</code> å‡½æ•°å…è®¸æ‰§è¡Œä¸€äº›æ­£å¸¸æƒ…å†µä¸‹è¢« Rust å®‰å…¨ä¿è¯æ‰€ç¦æ­¢çš„æ“ä½œï¼Œå¦‚ç›´æ¥æ“ä½œè£¸æŒ‡é’ˆã€‚</li>
<li>ç±»å‹ä¸º <code>Option&lt;Unsafe&gt;</code>ï¼Œè¿™æ„å‘³ç€è¯¥å­—æ®µå¯ä»¥æ˜¯ <code>None</code>ï¼ˆè¡¨ç¤ºå‡½æ•°ä¸æ˜¯ <code>unsafe</code>ï¼‰æˆ– <code>Some(Unsafe)</code>ï¼ˆè¡¨ç¤ºå‡½æ•°æ˜¯ <code>unsafe</code> çš„ï¼‰ã€‚</li>
</ul>
<h3 id="abi-Option"><a href="#abi-Option" class="headerlink" title="abi: Option&lt;Abi&gt;"></a><code>abi: Option&lt;Abi&gt;</code></h3><ul>
<li><code>abi</code> å­—æ®µè¡¨ç¤ºå‡½æ•°çš„åº”ç”¨äºŒè¿›åˆ¶æ¥å£ï¼ˆApplication Binary Interfaceï¼ŒABIï¼‰ã€‚ABI å®šä¹‰äº†å¦‚ä½•åœ¨ä¸åŒçš„äºŒè¿›åˆ¶æ¨¡å—æˆ–ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¹‹é—´è°ƒç”¨å‡½æ•°ã€‚</li>
<li>ç±»å‹ä¸º <code>Option&lt;Abi&gt;</code>ï¼Œè¿™æ„å‘³ç€è¯¥å­—æ®µå¯ä»¥æ˜¯ <code>None</code>ï¼ˆä½¿ç”¨ Rust é»˜è®¤çš„ ABIï¼‰æˆ– <code>Some(Abi)</code>ï¼ˆä½¿ç”¨ç‰¹å®šçš„ ABIï¼Œå¦‚ <code>&quot;C&quot;</code>ï¼‰ã€‚</li>
</ul>
<h3 id="fn-token-Fn"><a href="#fn-token-Fn" class="headerlink" title="fn_token: Fn"></a><code>fn_token: Fn</code></h3><ul>
<li><code>fn_token</code> å­—æ®µæ˜¯ <code>Fn</code> ç±»å‹çš„ tokenï¼Œè¡¨ç¤ºäº† <code>fn</code> å…³é”®å­—çš„å­˜åœ¨ã€‚</li>
</ul>
<h3 id="ident-Ident"><a href="#ident-Ident" class="headerlink" title="ident: Ident"></a><code>ident: Ident</code></h3><ul>
<li><code>ident</code> å­—æ®µæ˜¯ <code>Ident</code> ç±»å‹ï¼Œä»£è¡¨å‡½æ•°çš„åç§°ã€‚</li>
</ul>
<h3 id="generics-Generics"><a href="#generics-Generics" class="headerlink" title="generics: Generics"></a><code>generics: Generics</code></h3><ul>
<li><code>generics</code> å­—æ®µè¡¨ç¤ºå‡½æ•°çš„æ³›å‹å‚æ•°ã€‚è¿™åŒ…æ‹¬æ³›å‹ç±»å‹å‚æ•°ã€ç”Ÿå‘½å‘¨æœŸå‚æ•°ä»¥åŠå®ƒä»¬çš„çº¦æŸã€‚</li>
<li>ç±»å‹ä¸º <code>Generics</code>ï¼Œå®ƒåŒ…å«äº†å‡½æ•°æ³›å‹å‚æ•°çš„è¯¦ç»†ä¿¡æ¯ã€‚</li>
</ul>
<h3 id="paren-token-Paren"><a href="#paren-token-Paren" class="headerlink" title="paren_token: Paren"></a><code>paren_token: Paren</code></h3><ul>
<li><code>paren_token</code> å­—æ®µæ˜¯ <code>Paren</code> ç±»å‹çš„ tokenï¼Œè¡¨ç¤ºå‡½æ•°å‚æ•°åˆ—è¡¨å‘¨å›´çš„åœ†æ‹¬å·ã€‚</li>
</ul>
<h3 id="inputs-Punctuated"><a href="#inputs-Punctuated" class="headerlink" title="inputs: Punctuated&lt;FnArg, Comma&gt;"></a><code>inputs: Punctuated&lt;FnArg, Comma&gt;</code></h3><ul>
<li><code>inputs</code> å­—æ®µè¡¨ç¤ºå‡½æ•°çš„è¾“å…¥å‚æ•°åˆ—è¡¨ã€‚</li>
<li>ç±»å‹ä¸º <code>Punctuated&lt;FnArg, Comma&gt;</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªä½¿ç”¨é€—å·ä½œä¸ºåˆ†éš”ç¬¦çš„åˆ—è¡¨ï¼ŒåŒ…å«äº†ä¸€ä¸ªæˆ–å¤šä¸ª <code>FnArg</code>ï¼ˆå‡½æ•°å‚æ•°ï¼‰ã€‚</li>
</ul>
<h3 id="variadic-Option"><a href="#variadic-Option" class="headerlink" title="variadic: Option&lt;Variadic&gt;"></a><code>variadic: Option&lt;Variadic&gt;</code></h3><ul>
<li><code>variadic</code> å­—æ®µè¡¨ç¤ºå‡½æ•°æ˜¯å¦æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ï¼ˆå³ C é£æ ¼çš„å¯å˜å‚æ•°å‡½æ•°ï¼‰ã€‚</li>
<li>ç±»å‹ä¸º <code>Option&lt;Variadic&gt;</code>ï¼Œè¿™æ„å‘³ç€è¯¥å­—æ®µå¯ä»¥æ˜¯ <code>None</code>ï¼ˆè¡¨ç¤ºå‡½æ•°ä¸æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ï¼‰æˆ– <code>Some(Variadic)</code>ï¼ˆè¡¨ç¤ºå‡½æ•°æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ï¼‰ã€‚</li>
</ul>
<h3 id="output-ReturnType"><a href="#output-ReturnType" class="headerlink" title="output: ReturnType"></a><code>output: ReturnType</code></h3><ul>
<li><code>output</code> å­—æ®µè¡¨ç¤ºå‡½æ•°çš„è¿”å›ç±»å‹ã€‚</li>
<li>ç±»å‹ä¸º <code>ReturnType</code>ï¼Œå®ƒå¯ä»¥æ˜¯ <code>ReturnType::Default</code>ï¼ˆå¯¹åº”äºæ²¡æœ‰æ˜ç¡®æŒ‡å®šè¿”å›ç±»å‹çš„æƒ…å†µï¼Œç­‰åŒäºè¿”å› <code>()</code>ï¼‰æˆ– <code>ReturnType::Type</code>ï¼ˆåŒ…å«å…·ä½“çš„è¿”å›ç±»å‹ï¼‰ã€‚</li>
</ul>
<p><code>Signature</code> ç»“æ„ä½“æä¾›äº†å¯¹ Rust å‡½æ•°ç­¾åçš„å…¨é¢æè¿°ï¼ŒåŒ…æ‹¬å‡½æ•°çš„åç§°ã€å‚æ•°ã€è¿”å›ç±»å‹ä»¥åŠå…¶ä»–ä¸å‡½æ•°è¡Œä¸ºç›¸å…³çš„å…³é”®å­—ï¼ˆå¦‚ <code>async</code>ã€<code>const</code>ã€<code>unsafe</code>ï¼‰ã€‚é€šè¿‡æ“ä½œè¿™äº›å­—æ®µï¼Œä½ å¯ä»¥è§£æã€æ„é€ æˆ–ä¿®æ”¹å‡½æ•°ç­¾åçš„ ASTã€‚</p>
<p>C è½¬æ¢ä¸º Rustï¼Œä½¿ç”¨ syn åº“è¿›è¡Œ Rust ä»£ç æ„å»ºï¼Œå°†ä¸‹é¢ case Cè½¬æ¢ä¸ºRustä¸­æ¶‰åŠåˆ°çš„å˜é‡ã€å‡½æ•°å£°æ˜ã€è°ƒç”¨ç­‰æ“ä½œçš„å¯¹åº”å…³ç³»å®Œæ•´çš„è§£æï¼Œç»™æˆ‘ä¸€ä¸ªæ¨¡æ¿è®©æˆ‘èƒ½æŒ‰ç…§æ¨¡æ¿æ¥å°† C ç¨‹åºå’Œ Rust ç¨‹åºçš„å¯¹åº”å…³ç³»å‘ˆç°å‡ºæ¥</p>
<h2 id="prompt"><a href="#prompt" class="headerlink" title="prompt"></a>prompt</h2><pre><code>ä½ æ˜¯ C Rust è¯­è¨€é¢†åŸŸèµ„æ·±ä¸“å®¶ï¼Œå›ç­”æˆ‘çš„é—®é¢˜ã€‚æˆ‘åœ¨åšå…³äº C è½¬æ¢ä¸º Rust çš„è§„åˆ™æ•´ç†ï¼Œå…¶ä¸­è®¡åˆ’ä½¿ç”¨ syn åº“è¿›è¡Œ Rust ä»£ç æ„å»ºï¼Œå°†ä¸‹é¢ case ä¸­ Cè½¬æ¢ä¸ºRustä¸­æ¶‰åŠåˆ°çš„å˜é‡ã€å‡½æ•°å£°æ˜ã€è°ƒç”¨ç­‰æ“ä½œçš„å¯¹åº”å…³ç³»å®Œæ•´çš„è§£æï¼Œå¹¶ç»™å‡ºè¯¦ç»†è§£æ

æ¨¡æ¿
## **å‡½æ•°å®šä¹‰**:
### è¿”å›å€¼ç±»å‹
   - **C**: ä½¿ç”¨å…³é”®å­— `void` è¡¨ç¤ºæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°ã€‚
   - **Rust**: Rust ä¸­æ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°éšå¼è¿”å› `()`ï¼Œé€šå¸¸çœç•¥è¿”å›ç±»å‹ã€‚

### ...
   - ...
   - ...
   
## **ä¼ å…¥å‚æ•°**:
### ä¼ å…¥å‚æ•°æ ¼å¼
   - **C**: å‚æ•°ç±»å‹ç›´æ¥å†™åœ¨å‚æ•°åå‰é¢ã€‚
   - **Rust**: å‚æ•°ç±»å‹ç”±å†’å·éš”å¼€ï¼Œæ ¼å¼ä¸º `param_name: type`ã€‚

### ...
   - ...
   - ...

## **å¾ªç¯æ§åˆ¶**:
### for å¾ªç¯å†™ä½œæ ¼å¼
   - **C**: ä½¿ç”¨ `for` å¾ªç¯ï¼Œåˆå§‹åŒ–å˜é‡ï¼Œæ¡ä»¶å’Œå¢é‡åœ¨æ‹¬å·å†…å®šä¹‰ã€‚
   - **Rust**: ä½¿ç”¨ `for` å¾ªç¯éå†ä¸€ä¸ªèŒƒå›´ï¼ŒèŒƒå›´ç”± `start..end` è¡¨ç¤ºã€‚
   
### ...
   - ...
   - ...
   
## **å¸¸ç”¨åº“**:
### æ ‡å‡†è¾“å…¥è¾“å‡º
   - **C**: ä½¿ç”¨ `printf` å‡½æ•°ã€‚
   - **Rust**: ä½¿ç”¨ `println!` å®ã€‚
   
### ...
   - ...
   - ...
   
## **ä¸»å‡½æ•°**:
### ä¸»å‡½æ•°è¿”å›å€¼è§„åˆ™
   - **C**: ä¸»å‡½æ•° `main` è¿”å› `int` ç±»å‹ï¼Œè¡¨ç¤ºç¨‹åºé€€å‡ºçŠ¶æ€ã€‚
   - **Rust**: ä¸»å‡½æ•° `main` æ²¡æœ‰è¿”å›å€¼ï¼Œé”™è¯¯å¤„ç†é€šå¸¸é€šè¿‡ `Result` æˆ– `panic!` å¤„ç†ã€‚

### ...
   - ...
   - ...
   
## ...
</code></pre>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/Rust/" style="color: #ff7d73">Rust</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/AST/" style="color: #00bcd4">AST</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="color: #ffa2c4">ç¼–è¯‘åŸç†</a>
        </span>
        
    </div>
    <a href="/2024/03/07/mdstorage/project/cToRust/rust%E7%9A%84AST/" class="go-post">é˜…è¯»å…¨æ–‡</a>
</div>

<div class="post">
    <a href="/2024/03/07/mdstorage/domain/CICD/github_action/">
        <h2 class="post-title">github_action.md</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/domain/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                domain
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/3/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p><strong>æ–‡ç« æ¦‚è¿°</strong></p>
<ul>
<li>æ ‡é¢˜ï¼šGitHub Actions å…¥é—¨æŒ‡å—ï¼šè‡ªåŠ¨åŒ–æ‚¨çš„å·¥ä½œæµç¨‹</li>
<li>ä½œè€…ï¼šJohn Doe</li>
<li>å‘å¸ƒæ—¥æœŸï¼š2023å¹´12æœˆ30æ—¥</li>
<li>é“¾æ¥åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.example.com/github-actions-tutorial">GitHub Actions Tutorial</a></li>
<li>æ‘˜è¦ï¼šæœ¬æ•™ç¨‹æ—¨åœ¨ä¸ºè¯»è€…æä¾›ä¸€ä¸ªå…¨é¢çš„ GitHub Actions æŒ‡å—ï¼Œå¸®åŠ©ä»–ä»¬ç†è§£å¦‚ä½•ä½¿ç”¨è¿™ä¸ªå¼ºå¤§çš„è‡ªåŠ¨åŒ–å·¥å…·æ¥ä¼˜åŒ–ä»–ä»¬çš„è½¯ä»¶å¼€å‘æµç¨‹ã€‚æ— è®ºæ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•ã€éƒ¨ç½²è¿˜æ˜¯å…¶ä»–å¸¸è§çš„å¼€å‘ä»»åŠ¡ï¼Œæœ¬æ–‡å°†ä¸€ä¸€æ¶µç›–ã€‚</li>
</ul>
<p><strong>æŠ€æœ¯èƒŒæ™¯ä¸åŸç†</strong></p>
<ul>
<li><strong>æŠ€æœ¯èƒŒæ™¯</strong>ï¼šGitHub Actions æ˜¯ä¸€ç§ CI&#x2F;CDï¼ˆæŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²ï¼‰å·¥å…·ï¼Œå…è®¸å¼€å‘è€…è‡ªåŠ¨åŒ–å„ç§è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„ä»»åŠ¡ï¼Œå¦‚ä»£ç æµ‹è¯•ã€æ„å»ºå’Œéƒ¨ç½²ã€‚</li>
<li><strong>å…³é”®æŠ€æœ¯</strong>ï¼šæœ¬æ•™ç¨‹çš„æ ¸å¿ƒæ˜¯ GitHub Actions çš„å·¥ä½œæµç¨‹æ–‡ä»¶ï¼ˆYAML æ ¼å¼ï¼‰ï¼Œå®ƒä»¬å®šä¹‰äº†ä¸€ç³»åˆ—çš„è‡ªåŠ¨åŒ–æ­¥éª¤ï¼Œç±»ä¼¼äºé…æ–¹ï¼Œæ¯ä¸ªæ­¥éª¤ç±»ä¼¼äºé…æ–¹ä¸­çš„ä¸€ä¸ªæ­¥éª¤ï¼ŒæŒ‰ç…§ç‰¹å®šé¡ºåºæ‰§è¡Œã€‚</li>
</ul>
<p><strong>è¯¦ç»†æ­¥éª¤</strong></p>
<ul>
<li><strong>é€æ­¥æŒ‡å—</strong>ï¼š<ol>
<li><strong>åˆ›å»ºå·¥ä½œæµç¨‹æ–‡ä»¶</strong>ï¼šåœ¨ä»“åº“ä¸­çš„ <code>.github/workflows</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„ YAML æ–‡ä»¶ã€‚</li>
<li><strong>é…ç½®å·¥ä½œæµç¨‹</strong>ï¼šå®šä¹‰å·¥ä½œæµç¨‹çš„è§¦å‘æ¡ä»¶ï¼Œå¦‚ <code>on: push</code> è¡¨ç¤ºæ¯æ¬¡æ¨é€æ—¶è§¦å‘ã€‚</li>
<li><strong>æ·»åŠ ä½œä¸š</strong>ï¼šå®šä¹‰ä½œä¸šå’Œè¿è¡Œç¯å¢ƒï¼Œä¾‹å¦‚ <code>runs-on: ubuntu-latest</code>ã€‚</li>
<li><strong>å®šä¹‰æ­¥éª¤</strong>ï¼šç¼–å†™æ‰§è¡Œçš„å…·ä½“æ­¥éª¤ï¼Œå¦‚æ£€å‡ºä»£ç ã€è¿è¡Œè„šæœ¬ç­‰ã€‚</li>
</ol>
</li>
<li><strong>æˆªå›¾å’Œç¤ºä¾‹</strong>ï¼šï¼ˆæ­¤å¤„æ”¾ç½®ä¸€ä¸ªåŸºæœ¬çš„ GitHub Actions é…ç½®æ–‡ä»¶çš„æˆªå›¾æˆ–ä»£ç ç‰‡æ®µï¼‰</li>
</ul>
<p><strong>é—®é¢˜è§£å†³ä¸å¸¸è§é—®é¢˜</strong></p>
<ul>
<li><strong>é—®é¢˜è§£å†³</strong>ï¼šè§£å†³æ‰§è¡Œå¤±è´¥çš„ä¸€èˆ¬æ­¥éª¤ï¼Œå¦‚æ£€æŸ¥æ—¥å¿—ã€ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚</li>
<li><strong>å¸¸è§é—®é¢˜</strong>ï¼š<ul>
<li>Q: å¦‚ä½•è§¦å‘å·¥ä½œæµç¨‹ï¼Ÿ</li>
<li>A: é€šè¿‡ GitHub äº‹ä»¶ï¼Œå¦‚ pushã€pull request æ¥è§¦å‘ã€‚</li>
<li>Q: å·¥ä½œæµç¨‹å¤±è´¥æ€ä¹ˆåŠï¼Ÿ</li>
<li>A: æŸ¥çœ‹ GitHub Actions æ—¥å¿—ä»¥è¯Šæ–­é—®é¢˜ã€‚</li>
</ul>
</li>
</ul>
<p><strong>é™„åŠ èµ„æº</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.github.com/en/actions">GitHub Actions å®˜æ–¹æ–‡æ¡£</a></li>
<li><a target="_blank" rel="noopener" href="https://www.continuousdelivery.com/">CI&#x2F;CD æœ€ä½³å®è·µ</a></li>
<li><a target="_blank" rel="noopener" href="https://yamlvalidator.com/">åœ¨çº¿ YAML æ ¼å¼éªŒè¯å·¥å…·</a></li>
</ul>
<p><strong>æ€»ç»“</strong></p>
<p>æœ¬æ•™ç¨‹æä¾›äº† GitHub Actions çš„åŸºç¡€çŸ¥è¯†å’Œæ“ä½œæŒ‡å—ï¼Œå¸®åŠ©è¯»è€…ç†è§£å¦‚ä½•åˆ©ç”¨è¿™ä¸€å¼ºå¤§çš„è‡ªåŠ¨åŒ–å·¥å…·ä¼˜åŒ–ä»–ä»¬çš„å¼€å‘æµç¨‹ã€‚é€šè¿‡å­¦ä¹ å¦‚ä½•åˆ›å»ºå’Œé…ç½®å·¥ä½œæµç¨‹ï¼Œè¯»è€…å¯ä»¥æé«˜è½¯ä»¶å¼€å‘çš„æ•ˆç‡å’Œè´¨é‡ã€‚åç»­æ­¥éª¤åŒ…æ‹¬æ·±å…¥æ¢ç´¢æ›´é«˜çº§çš„ç‰¹æ€§å’Œé›†æˆå…¶ä»–å¼€å‘å·¥å…·ï¼Œä»¥å®ç°æ›´å¤æ‚çš„è‡ªåŠ¨åŒ–éœ€æ±‚ã€‚</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/github/" style="color: #00a596">github</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/%E5%B7%A5%E4%BD%9C%E6%B5%81/" style="color: #00bcd4">å·¥ä½œæµ</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/CI/" style="color: #00a596">CI</a>
        </span>
        
    </div>
    <a href="/2024/03/07/mdstorage/domain/CICD/github_action/" class="go-post">é˜…è¯»å…¨æ–‡</a>
</div>

<div class="post">
    <a href="/2024/03/07/mdstorage/domain/db/PostgreSQL%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99/">
        <h2 class="post-title">PostgreSQLç›¸å…³èµ„æ–™.md</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/domain/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                domain
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/3/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h2 id="PostgreSQL-èµ„æ–™ä¹‹ä¸€"><a href="#PostgreSQL-èµ„æ–™ä¹‹ä¸€" class="headerlink" title="PostgreSQL èµ„æ–™ä¹‹ä¸€"></a>PostgreSQL èµ„æ–™ä¹‹ä¸€</h2><p><strong>æ–‡ç« æ¦‚è¿°</strong></p>
<ul>
<li>æ–‡ç« æ ‡é¢˜ï¼šPostgreSQLæ­£åœ¨åå™¬æ•°æ®åº“ä¸–ç•Œ</li>
<li>ä½œè€…ï¼šæœªæ˜ç¡®æ ‡æ³¨</li>
<li>å‘å¸ƒæ—¥æœŸï¼šæœªæä¾›</li>
<li>é“¾æ¥åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/685247647">https://zhuanlan.zhihu.com/p/685247647</a></li>
<li>æ–‡ç« ä¸»é¢˜ç®€ä»‹ï¼šæ–‡ç« æ¢è®¨äº†PostgreSQLä¸ä»…ä½œä¸ºä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªæ•°æ®ç®¡ç†çš„æŠ½è±¡æ¡†æ¶ï¼Œå¦‚ä½•é€šè¿‡å…¶å¯æ‰©å±•æ€§å’Œç”Ÿæ€ç³»ç»Ÿçš„å‘å±•ï¼Œé€æ¸æˆä¸ºæ•°æ®åº“é¢†åŸŸçš„ä¸»æµå®è·µï¼Œç‰¹åˆ«æ˜¯åœ¨OLAPé¢†åŸŸçš„è¡¨ç°å’Œå¯¹å¤§æ•°æ®å¤„ç†çš„å½±å“ã€‚</li>
</ul>
<p><strong>ä¸»è¦è§‚ç‚¹</strong></p>
<ul>
<li>è§‚ç‚¹ä¸€ï¼šPostgreSQLçš„ç”Ÿæ€ç³»ç»Ÿå’Œå¯æ‰©å±•æ€§ä½¿å…¶åœ¨æ•°æ®åº“é¢†åŸŸå æ®ä¸»å¯¼åœ°ä½ã€‚</li>
<li>è§‚ç‚¹äºŒï¼šPostgreSQLé€šè¿‡æ‰©å±•æ’ä»¶ï¼Œå¦‚ParadeDBå’ŒDuckDBï¼Œå¤§å¹…æå‡äº†å…¶åœ¨OLAPé¢†åŸŸçš„æ€§èƒ½ã€‚</li>
<li>è§‚ç‚¹ä¸‰ï¼šéšç€ç¡¬ä»¶çš„å‘å±•å’Œæ•°æ®åº“è½¯ä»¶çš„è¿›æ­¥ï¼Œå¤§æ•°æ®æ—¶ä»£çš„å‡è®¾æ­£åœ¨è¢«æŒ‘æˆ˜ï¼ŒPostgreSQLçš„é€‚ç”¨åœºæ™¯è¶Šæ¥è¶Šå¹¿æ³›ã€‚</li>
</ul>
<p><strong>æ”¯æŒè®ºæ®</strong></p>
<ul>
<li>è§‚ç‚¹ä¸€çš„æ”¯æŒè®ºæ®ï¼šæ–‡ç« æåˆ°PostgreSQLä¸ä»…æ˜¯ä¸€ä¸ªæ•°æ®åº“ï¼Œæ›´æ˜¯ä¸€ä¸ªæ•°æ®ç®¡ç†æ¡†æ¶ï¼Œé€šè¿‡å…¶ä¸°å¯Œçš„æ‰©å±•æ’ä»¶æ”¯æŒï¼Œèƒ½å¤Ÿè¦†ç›–æ•°æ®åº“é¢†åŸŸçš„å¤šä¸ªç»†åˆ†é¢†åŸŸï¼Œå¦‚æ—¶åºæ•°æ®åº“ã€åœ°ç†ç©ºé—´æ•°æ®åº“ç­‰ã€‚</li>
<li>è§‚ç‚¹äºŒçš„æ”¯æŒè®ºæ®ï¼šé€šè¿‡å¼•å…¥ParadeDBå’ŒDuckDBç­‰æ‰©å±•ï¼ŒPostgreSQLåœ¨OLAPæ€§èƒ½ä¸Šè¾¾åˆ°äº†ä¸ä¸“ç”¨OLAPæ•°æ®åº“ç›¸åª²ç¾çš„æ°´å¹³ï¼Œè¿™äº›æ‰©å±•æ’ä»¶æå¤§åœ°æå‡äº†PostgreSQLåœ¨æ•°æ®åˆ†æé¢†åŸŸçš„ç«äº‰åŠ›ã€‚</li>
<li>è§‚ç‚¹ä¸‰çš„æ”¯æŒè®ºæ®ï¼šéšç€ç¡¬ä»¶æ€§èƒ½çš„æå‡å’Œå­˜å‚¨æˆæœ¬çš„é™ä½ï¼Œä»¥åŠæ•°æ®åº“è½¯ä»¶æŠ€æœ¯çš„è¿›æ­¥ï¼Œå¤§æ•°æ®å¤„ç†ä¸å†æ˜¯å°‘æ•°åœºæ™¯çš„éœ€æ±‚ï¼ŒPostgreSQLçš„é€‚ç”¨æ€§å› æ­¤å¾—åˆ°äº†æå¤§çš„æ‰©å±•ã€‚</li>
</ul>
<p><strong>é€»è¾‘è¿è´¯æ€§åˆ†æ</strong></p>
<ul>
<li>æ–‡ç« é€šè¿‡å±•ç¤ºPostgreSQLçš„å¯æ‰©å±•æ€§å’Œç”Ÿæ€ç³»ç»Ÿçš„ä¼˜åŠ¿ï¼Œé€æ­¥å¼•å‡ºå…¶åœ¨OLAPé¢†åŸŸçš„è¡¨ç°å’Œå¯¹å¤§æ•°æ®å¤„ç†è§‚å¿µçš„æŒ‘æˆ˜ï¼Œé€»è¾‘ä¸Šå½¢æˆäº†ç”±å†…è€Œå¤–çš„æ‰©å±•ï¼Œä»PostgreSQLçš„å†…åœ¨ç‰¹æ€§åˆ°å…¶åœ¨å¤–éƒ¨åº”ç”¨åœºæ™¯çš„å½±å“ï¼Œå±•ç°äº†ä¸€ä¸ªå…¨é¢å‘å±•çš„è§†è§’ã€‚</li>
</ul>
<p><strong>ä¸åŒè§†è§’è€ƒé‡</strong></p>
<ul>
<li>å…¶ä»–å¯èƒ½çš„è§‚ç‚¹æˆ–åé©³ï¼šä¸€äº›ä¸“å®¶å¯èƒ½ä¼šæŒ‡å‡ºï¼Œå°½ç®¡PostgreSQLåœ¨è®¸å¤šæ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½†åœ¨ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå¦‚æç«¯çš„æ€§èƒ½è¦æ±‚æˆ–ç‰¹æ®Šçš„æ•°æ®å¤„ç†éœ€æ±‚ä¸­ï¼Œä¸“ç”¨æ•°æ®åº“å¯èƒ½ä»æœ‰å…¶ä¸å¯æ›¿ä»£çš„ä¼˜åŠ¿ã€‚</li>
<li>è¡Œä¸šæˆ–é¢†åŸŸå†…ä¸åŒä¸“å®¶çš„æ„è§ï¼šä¸åŒçš„ä¸“å®¶å¯èƒ½å¯¹PostgreSQLåœ¨æ•°æ®åº“é¢†åŸŸçš„ä¸»å¯¼åœ°ä½æŒæœ‰ä¸åŒçœ‹æ³•ï¼Œç‰¹åˆ«æ˜¯è€ƒè™‘åˆ°æ–°å…´çš„æ•°æ®åº“æŠ€æœ¯å’Œä¸æ–­å˜åŒ–çš„ä¸šåŠ¡éœ€æ±‚ã€‚</li>
</ul>
<p><strong>ç»“è®ºä¸å®è·µæ„ä¹‰</strong></p>
<ul>
<li>ä½œè€…çš„ä¸»è¦ç»“è®ºï¼šPostgreSQLé€šè¿‡å…¶å¯æ‰©å±•æ€§å’Œå¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿï¼Œæ­£åœ¨æˆä¸ºæ•°æ®åº“é¢†åŸŸçš„ä¸»æµå®è·µï¼Œç‰¹åˆ«æ˜¯åœ¨OLAPé¢†åŸŸå’Œå¤§æ•°æ®å¤„ç†æ–¹é¢å±•ç°å‡ºäº†å·¨å¤§çš„æ½œåŠ›ã€‚</li>
<li>å¯¹è¡Œä¸š&#x2F;è¯»è€…çš„å®é™…æ„ä¹‰ï¼šå¯¹äºæ•°æ®åº“ç®¡ç†å‘˜å’Œå¼€å‘è€…è€Œè¨€ï¼Œç†è§£å’Œåˆ©ç”¨PostgreSQLçš„è¿™äº›ä¼˜åŠ¿ï¼Œå¯ä»¥å¸®åŠ©ä»–ä»¬æ›´æœ‰æ•ˆåœ°è§£å†³æ•°æ®ç®¡ç†å’Œåˆ†æçš„é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿä¸ºä¼ä¸šé€‰æ‹©æ•°æ®åº“æŠ€æœ¯æä¾›äº†æ–°çš„è§†è§’ã€‚</li>
</ul>
<p><strong>ä¸ªäººè§‚ç‚¹ä¸åæ€</strong></p>
<ul>
<li>ä¸ªäººå¯¹æ–‡ç« çš„çœ‹æ³•ï¼šæ–‡ç« æ·±å…¥æµ…å‡ºåœ°åˆ†æäº†PostgreSQLçš„ä¼˜åŠ¿å’Œæ½œåŠ›ï¼Œç‰¹åˆ«æ˜¯åœ¨OLAPé¢†åŸŸçš„è¡¨ç°å’Œå¯¹å¤§æ•°æ®å¤„ç†è§‚å¿µçš„æŒ‘æˆ˜ï¼Œä¸ºè¯»è€…æä¾›äº†å…¨é¢çš„ç†è§£ã€‚</li>
<li>æ–‡ç« å¯¹ä¸ªäººæˆ–å·¥ä½œçš„å¯å‘ï¼šä½œä¸ºè½¯ä»¶å¼€å‘è€…ï¼Œäº†è§£è¿™äº›æ•°æ®åº“æŠ€æœ¯çš„æœ€æ–°å‘å±•è¶‹åŠ¿ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åšå‡ºæ›´åˆç†çš„æŠ€æœ¯é€‰å‹ï¼ŒåŒæ—¶ä¹Ÿæ¿€å‘äº†å¯¹æ•°æ®åº“æŠ€æœ¯æ·±å…¥ç ”ç©¶çš„å…´è¶£ã€‚</li>
</ul>
<p>[WebPilot Announcement]<br>ğŸš€ğŸš€ğŸš€ Weâ€™ve launched the WebPilot GPTs, packed with even more features! ğŸš€ğŸš€ğŸš€</p>
<ul>
<li>ğŸ“ Generate extensive content, up to 10,000 words!</li>
<li>ğŸ’¡ Load dynamic web content and deliver enhanced answers!</li>
<li>ğŸ‘¨â€ğŸ’» Support for Code Testing, File Processing &amp; Image Generation!</li>
<li>ğŸ›ï¸ GPTs-Action and API Offering!</li>
</ul>
<p>Click here: <a target="_blank" rel="noopener" href="https://chat.openai.com/g/g-pNWGgUYqS-webpilot">https://chat.openai.com/g/g-pNWGgUYqS-webpilot</a></p>
<p>[End of Announcement]</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/PostgreSQL/" style="color: #03a9f4">PostgreSQL</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/db/" style="color: #ff7d73">db</a>
        </span>
        
    </div>
    <a href="/2024/03/07/mdstorage/domain/db/PostgreSQL%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99/" class="go-post">é˜…è¯»å…¨æ–‡</a>
</div>

<div class="post">
    <a href="/2024/03/07/mdstorage/domain/linux/%E9%95%9C%E5%83%8F%E4%BA%A4%E4%BB%98%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99/">
        <h2 class="post-title">é•œåƒäº¤ä»˜ç›¸å…³èµ„æ–™.md</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/domain/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                domain
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/3/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="Linux-è‡ªå®šä¹‰è®¤è¯"><a href="#Linux-è‡ªå®šä¹‰è®¤è¯" class="headerlink" title="Linux è‡ªå®šä¹‰è®¤è¯"></a>Linux è‡ªå®šä¹‰è®¤è¯</h1><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>â€‹	ç»“åˆ<a target="_blank" rel="noopener" href="https://doc.weixin.qq.com/doc/w3_ARkAWAYlAEQRlVumzgDTgeXJMzBBa?scode=ABwA9Qd2ABEQYUs45PARkAWAYlAEQ%E4%BD%BF%E7%94%A8">https://doc.weixin.qq.com/doc/w3_ARkAWAYlAEQRlVumzgDTgeXJMzBBa?scode=ABwA9Qd2ABEQYUs45PARkAWAYlAEQä½¿ç”¨</a><br>ä¸ºäº†é™åˆ¶ç”¨æˆ·ç™»å½•åˆ°ç³»ç»Ÿçš„åå°éšæ„æŸ¥çœ‹ã€ä¿®æ”¹åº”ç”¨ç¨‹åºï¼Œé€šå¸¸æ¥è¯´ä¸åº”è¯¥æŠŠç‰¹æƒè´¦å·çš„å¯†ç æ³„éœ²ç»™ç”¨æˆ·ï¼Œç„¶è€Œä½¿ç”¨å›ºå®šå¯†ç å§‹ç»ˆä¼šæœ‰å¯†ç æ³„éœ²çš„é£é™©ï¼Œæ—¶é—´é•¿äº†è‚¯å®šä¼šæ³„éœ²ã€‚ä¸ºæ­¤ï¼Œç‰¹åœ°è°ƒç ”äº†ä¸€ä¸‹æŸå‚å•†çš„D,F,Tä¸‰ä¸ªäº§å“æ˜¯æ€ä¹ˆå¤„ç†è¿™ç§äº‹æƒ…çš„ã€‚<br>äº§å“ä»£å·	è§£å†³æ–¹æ¡ˆ	å®ç°éš¾åº¦<br>D	æ— æ³•æ‰“å¼€ç”¨æˆ·ç™»å½•ç•Œé¢ï¼Œè‡ªè¡Œæä¾›äº†å¦ä¸€å¥—äº¤äº’ç•Œé¢ï¼Œæ— éœ€ç™»å½•ï¼Œä¹Ÿæ— æ³•ç™»å½•å…¶ä»–ç”¨æˆ·ã€‚å‘½ä»¤è¡Œå—é™	æœªçŸ¥<br>F	ä½¿ç”¨åŠ¨æ€å¯†ç ç™»å½•ï¼Œç”¨å‚å®¶æä¾›çš„APPæ‰«ç ï¼ˆæˆ–è¾“å…¥token)æ¥è·å–ä¸´æ—¶å¯†ç ç™»å½•ã€‚åªæœ‰æœ‰å”®åæƒé™çš„äººæ‰èƒ½æ‰«ç ç™»å½•	ä¸­ï¼Œé­”æ”¹ç¨‹åº¦å°<br>T	æä¾›ä½æƒé™è´¦æˆ·ï¼Œä½¿ç”¨å›ºå®šå¯†ç ç™»å½•ï¼Œå…¶ä½™æœªçŸ¥ï¼ˆå› ä¸ºå…¨ç›˜åŠ å¯†äº†ï¼Œä¸æ¸…æ¥šç‰¹æƒè´¦æˆ·æ˜¯å¦ä¸ºå›ºå®šå¯†ç ï¼‰	ä¸­ï¼Œé­”æ”¹ç¨‹åº¦å°<br>å› ä¸ºæŠ€æœ¯æ ˆä¸ç»Ÿä¸€ï¼Œä¸‰ä¸ªäº§å“çš„é˜²æŠ¤å„æœ‰ä¸åŒï¼Œè¿™é‡ŒFäº§å“ä½¿ç”¨çš„æ–¹æ³•æ˜¯ä¸€ç§ç®€å•æœ‰æ•ˆçš„åŠæ³•ï¼Œæ‰€ä»¥è€ƒè™‘é¢„ç ”ä¸€ä¸‹ï¼Œçœ‹çœ‹æ•ˆæœã€‚</p>
<p>pam demo<br>Fäº§å“çš„å®ç°åŸç†æ˜¯è‡ªå·±ç¼–å†™äº†ä¸€ä¸ªlinux PAMæ¨¡å—ï¼Œç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­åŠ è½½è¿™æ®µé€»è¾‘ï¼Œå°±å¯ä»¥å®ç°æ‰©å±•linuxç™»å½•æ—¶çš„éªŒè¯ã€‚<br>è¿™é‡Œå…ˆå†™ä¸ªpam demoéªŒè¯ä¸€ä¸‹æœºåˆ¶</p>
<pre><code class="c">#include &lt;security/pam_appl.h&gt;
#include &lt;security/pam_modules.h&gt;
#include &lt;security/pam_ext.h&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

PAM_EXTERN int pam_sm_authenticate(pam_handle_t *pamh, int flags, int argc, const char **argv) &#123;
    const char *username;
    const char *password;
    int pam_err;

    pam_err = pam_get_user(pamh, &amp;username, &quot;Username: &quot;);
    if (pam_err != PAM_SUCCESS || username == NULL) &#123;
        return PAM_AUTH_ERR;
    &#125;

    // è·å–ç”¨æˆ·è¾“å…¥çš„å¯†ç 
    pam_err = pam_get_authtok(pamh, PAM_AUTHTOK, &amp;password, &quot;Password: &quot;);
    if (pam_err != PAM_SUCCESS || password == NULL) &#123;
        return PAM_AUTH_ERR;
    &#125;

    // æ£€æŸ¥å¯†ç æ˜¯å¦ä¸ºé¢„æœŸçš„å€¼ï¼ˆä¾‹å¦‚ï¼Œ&quot;123&quot;ï¼‰
    if (strcmp(password, &quot;123&quot;) == 0) &#123;
        return PAM_SUCCESS; // å¯†ç éªŒè¯æˆåŠŸ
    &#125; else &#123;
        return PAM_AUTH_ERR; // å¯†ç éªŒè¯å¤±è´¥
    &#125;
&#125;

PAM_EXTERN int pam_sm_setcred(pam_handle_t *pamh, int flags, int argc, const char **argv) &#123;
    // åœ¨è¿™é‡Œå®ç°è®¾ç½®å‡­æ®ï¼ˆcredentialï¼‰çš„é€»è¾‘ï¼Œå¦‚æœä¸éœ€è¦ï¼Œå¯ä»¥ç•™ç©º
    return PAM_SUCCESS;
&#125;
</code></pre>
<p>å°†ä»£ç ä¿å­˜ä¸ºcustom_auth.c ç¼–è¯‘å¹¶ä¿®æ”¹sudoçš„pamé…ç½®æ–‡ä»¶</p>
<pre><code class="c"># ç¼–è¯‘
gcc -fPIC -shared -o custom_auth.so custom_auth.c -lpam
# æ‹·è´åˆ°æ­£ç¡®çš„ä½ç½®
cp custom_auth.so /usr/lib/x86_64-linux-gnu/security/
# -rw-r--r-- root:root ä¸éœ€è¦æ‰§è¡Œæƒé™
chmod -x /usr/lib/x86_64-linux-gnu/security/custom_auth.so

# å¢åŠ æµ‹è¯•ç”¨æˆ·
sudo useradd -m testuser
sudo usermod -aG sudo testuser
# å°†å¯†ç æ”¹ä¸ºå’Œç”¨æˆ·åç›¸åŒ
passwd testuser

# ä¿®æ”¹sudoçš„PAMé…ç½®,åœ¨ç¬¬ä¸€è¡Œå¢åŠ  auth  sufficient  custom_auth.so
vim /etc/pam.d/sudo
su testuser

# æ­¤æ—¶è¾“å…¥testuseræˆ–è€…123éƒ½èƒ½æˆåŠŸï¼Œå…¶ä»–çš„å¯†ç åˆ™å¤±è´¥
sudo -k cat /etc/passwd 
</code></pre>
<h2 id="qrcode-demo"><a href="#qrcode-demo" class="headerlink" title="qrcode demo"></a>qrcode demo</h2><p>â€‹	ä½¿ç”¨äºŒç»´ç è¾“å…¥tokenä¸ä»…æ–¹ä¾¿ï¼Œè¿˜èƒ½å‡å°‘è¾“é”™çš„å¯èƒ½ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„éªŒè¯æ§åˆ¶å°è¾“å‡ºäºŒç»´ç çš„ä¾‹å­ï¼Œæ•ˆæœå¦‚å›¾ï¼ˆè¿˜æœ‰å¤šä½™çš„è¾¹æ¡†åˆ°æ—¶å€™å†ä¿®ä¿®ï¼‰ï¼Œèƒ½å¤Ÿåœ¨æ§åˆ¶å°ã€sshç­‰ä»»æ„å­—ç¬¦ç•Œé¢æ­£å¸¸æ˜¾ç¤ºã€‚</p>
<pre><code class="c">#include &lt;qrencode.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

static int margin;

static void writeANSI_margin(FILE* fp, int realwidth, char* buffer,
                             const char* white, int white_s) &#123;
  int y;

  strncpy(buffer, white, (size_t)white_s);
  memset(buffer + white_s, &#39; &#39;, (size_t)realwidth * 2);
  strcpy(buffer + white_s + realwidth * 2,
         &quot;\033[0m\n&quot;);  // reset to default colors
  for (y = 0; y &lt; margin; y++) &#123;
    fputs(buffer, fp);
  &#125;
&#125;

static void writeANSI(const char* msg,FILE* fp,  int size) &#123;
  const char *white, *black;
  char* buffer;
  int white_s, black_s, buffer_s;
  unsigned char *row, *p;
  int x, y;
  int realwidth;
  int last;
  QRcode* qrcode =
      QRcode_encodeString(msg, 0, QR_ECLEVEL_L, QR_MODE_8, 1);
      
  if (qrcode == NULL) &#123;
      fprintf(stderr, &quot;cannot parse msg to qrcode&quot;);
      return;
  &#125;

  white = &quot;\033[47m&quot;;
  white_s = 5;
  black = &quot;\033[40m&quot;;
  black_s = 5;

  realwidth = (qrcode-&gt;width + margin * 2) * size;
  buffer_s = (realwidth * white_s) * 2;
  buffer = (char*)malloc((size_t)buffer_s);
  if (buffer == NULL) &#123;
    fprintf(stderr, &quot;Failed to allocate memory.\n&quot;);
    exit(EXIT_FAILURE);
  &#125;

  /* top margin */
  writeANSI_margin(fp, realwidth, buffer, white, white_s);

  /* data */
  p = qrcode-&gt;data;
  for (y = 0; y &lt; qrcode-&gt;width; y++) &#123;
    row = (p + (y * qrcode-&gt;width));

    memset(buffer, 0, (size_t)buffer_s);
    strncpy(buffer, white, (size_t)white_s);
    for (x = 0; x &lt; margin; x++) &#123;
      strncat(buffer, &quot;  &quot;, 2);
    &#125;
    last = 0;

    for (x = 0; x &lt; qrcode-&gt;width; x++) &#123;
      if (*(row + x) &amp; 0x1) &#123;
        if (last != 1) &#123;
          strncat(buffer, black, (size_t)black_s);
          last = 1;
        &#125;
      &#125; else if (last != 0) &#123;
        strncat(buffer, white, (size_t)white_s);
        last = 0;
      &#125;
      strncat(buffer, &quot;  &quot;, 2);
    &#125;

    if (last != 0) &#123;
      strncat(buffer, white, (size_t)white_s);
    &#125;
    for (x = 0; x &lt; margin; x++) &#123;
      strncat(buffer, &quot;  &quot;, 2);
    &#125;
    strncat(buffer, &quot;\033[0m\n&quot;, 5);
    fputs(buffer, fp);
  &#125;

  /* bottom margin */
  writeANSI_margin(fp, realwidth, buffer, white, white_s);

  free(buffer);
&#125;

int main() 
&#123; 
    margin = 1;
    writeANSI(&quot;token:shrino.ouyrun.cn&quot;,stdout, 3);
&#125;
</code></pre>
<p>ç¼–è¯‘è¿è¡Œï¼š<br>å…ˆå®‰è£…åŠ¨æ€åº“ apt install libqrencode-dev<br>gcc qrtest.c -lqrencode</p>
<p>C&#x2F;S demo<br>å®ç°å®ç°éšæœºç”Ÿæˆ6ä½æ•°æ•°å­—å¯†ç ï¼Œç„¶åç”¨RSAåŠ å¯†ï¼Œå°†åŠ å¯†åçš„ä¿¡æ¯æ”¾åˆ°äºŒç»´ç ï¼Œç„¶åå”®åäººå‘˜é€šè¿‡å°†äºŒç»´ç ä¸Šä¼ åˆ°æœåŠ¡å™¨åï¼ˆè¿™é‡Œå¯ä»¥æ˜¯ç”¨æ‰‹æœºAPPæ‰«ç ï¼Œä¹Ÿå¯ä»¥æ˜¯æ‹å±æ‰‹åŠ¨å¤„ç†ï¼‰ï¼ŒæœåŠ¡å™¨ç”¨RSAè§£å¯†åï¼Œå°†ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚</p>
<p>éšæœºå¯†ç ç”Ÿæˆ</p>
<pre><code class="c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;time.h&gt;
int generateRandomPassword() &#123;
    srand(time(NULL));
    return rand() % 1000000; // ç”Ÿæˆ0åˆ°999999ä¹‹é—´çš„éšæœºæ•°
&#125;

</code></pre>
<p>åŠ å¯†éƒ¨åˆ†</p>
<pre><code class="c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;openssl/rsa.h&gt;
#include &lt;openssl/pem.h&gt;
#include &lt;string.h&gt;

void rsaEncryptPassword(const char* password, const char* publicKeyPath, const char* encryptedPath) &#123;
    FILE* publicKeyFile = fopen(publicKeyPath, &quot;rb&quot;);
    if (!publicKeyFile) &#123;
        perror(&quot;Failed to open public key file&quot;);
        return;
    &#125;

    RSA* rsa = PEM_read_RSA_PUBKEY(publicKeyFile, NULL, NULL, NULL);
    if (!rsa) &#123;
        perror(&quot;Failed to read public key&quot;);
        fclose(publicKeyFile);
        return;
    &#125;

    fclose(publicKeyFile);

    int passwordLen = strlen(password);
    unsigned char encrypted[256]; // è¦æ ¹æ®RSAå¯†é’¥çš„é•¿åº¦æ¥è®¾ç½®
    int encryptedLen = RSA_public_encrypt(passwordLen, (unsigned char*)password, encrypted, rsa, RSA_PKCS1_PADDING);

    if (encryptedLen == -1) &#123;
        perror(&quot;RSA encryption failed&quot;);
        RSA_free(rsa);
        return;
    &#125;

    FILE* encryptedFile = fopen(encryptedPath, &quot;wb&quot;);
    if (!encryptedFile) &#123;
        perror(&quot;Failed to open encrypted file&quot;);
        RSA_free(rsa);
        return;
    &#125;

    fwrite(encrypted, sizeof(unsigned char), encryptedLen, encryptedFile);
    fclose(encryptedFile);

    RSA_free(rsa);
&#125;

int main()
&#123;
        rsaEncryptPassword(&quot;123456&quot;, &quot;public_key.pem&quot;, &quot;test_encrypt_out&quot;);
        return 0;
&#125;

</code></pre>
<h4 id="å®‰è£…å¼€å‘åº“"><a href="#å®‰è£…å¼€å‘åº“" class="headerlink" title="å®‰è£…å¼€å‘åº“"></a>å®‰è£…å¼€å‘åº“</h4><pre><code class="bash"># å®‰è£…å¼€å‘åº“
apt install libssl-dev 
# ç”Ÿæˆå¯†é’¥å¯¹ï¼ˆè¿™é‡Œç”¨1024ä½
openssl genrsa -out private_key.pem 1024
openssl rsa -pubout -in private_key.pem -out public_key.pem
# ç¼–è¯‘
gcc rsa_enc.c -o rsa_enc -lssl -lcrypto
</code></pre>
<p>ç”ŸæˆäºŒç»´ç éƒ¨åˆ†</p>
<pre><code class="c">#include &lt;stdio.h&gt;
#include &lt;qrencode.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

static int margin = 1;

static void writeANSI_margin(FILE* fp, int realwidth, char* buffer,
                             const char* white, int white_s) &#123;
  int y;

  strncpy(buffer, white, (size_t)white_s);
  memset(buffer + white_s, &#39; &#39;, (size_t)realwidth * 2);
  strcpy(buffer + white_s + realwidth * 2,
         &quot;\033[0m\n&quot;);  // reset to default colors
  for (y = 0; y &lt; margin; y++) &#123;
    fputs(buffer, fp);
  &#125;
&#125;

static void writeANSI(QRcode* qrcode,FILE* fp,  int size) &#123;
  const char *white, *black;
  char* buffer;
  int white_s, black_s, buffer_s;
  unsigned char *row, *p;
  int x, y;
  int realwidth;
  int last;
  
  if (qrcode == NULL) &#123;
      return;
  &#125;

  white = &quot;\033[47m&quot;;
  white_s = 5;
  black = &quot;\033[40m&quot;;
  black_s = 5;

  realwidth = (qrcode-&gt;width + margin * 2) * size;
  buffer_s = (realwidth * white_s) * 2;
  buffer = (char*)malloc((size_t)buffer_s);
  if (buffer == NULL) &#123;
    fprintf(stderr, &quot;Failed to allocate memory.\n&quot;);
    exit(EXIT_FAILURE);
  &#125;

  /* top margin */
  writeANSI_margin(fp, realwidth, buffer, white, white_s);

  /* data */
  p = qrcode-&gt;data;
  for (y = 0; y &lt; qrcode-&gt;width; y++) &#123;
    row = (p + (y * qrcode-&gt;width));

    memset(buffer, 0, (size_t)buffer_s);
    strncpy(buffer, white, (size_t)white_s);
    for (x = 0; x &lt; margin; x++) &#123;
      strncat(buffer, &quot;  &quot;, 2);
    &#125;
    last = 0;

    for (x = 0; x &lt; qrcode-&gt;width; x++) &#123;
      if (*(row + x) &amp; 0x1) &#123;
        if (last != 1) &#123;
          strncat(buffer, black, (size_t)black_s);
          last = 1;
        &#125;
      &#125; else if (last != 0) &#123;
        strncat(buffer, white, (size_t)white_s);
        last = 0;
      &#125;
      strncat(buffer, &quot;  &quot;, 2);
    &#125;

    if (last != 0) &#123;
      strncat(buffer, white, (size_t)white_s);
    &#125;
    for (x = 0; x &lt; margin; x++) &#123;
      strncat(buffer, &quot;  &quot;, 2);
    &#125;
    strncat(buffer, &quot;\033[0m\n&quot;, 5);
    fputs(buffer, fp);
  &#125;

  /* bottom margin */
  writeANSI_margin(fp, realwidth, buffer, white, white_s);

  free(buffer);
&#125;

int generateQRCode(const char* encryptedPath) &#123;
    FILE* encryptedFile = fopen(encryptedPath, &quot;rb&quot;);
    if (!encryptedFile) &#123;
        perror(&quot;Failed to open encrypted file&quot;);
        return 1;
    &#125;

    fseek(encryptedFile, 0, SEEK_END);
    long encryptedFileSize = ftell(encryptedFile);
    rewind(encryptedFile);

    unsigned char* encryptedData = (unsigned char*)malloc(encryptedFileSize);
    if (!encryptedData) &#123;
        perror(&quot;Memory allocation failed&quot;);
        fclose(encryptedFile);
        return 1;
    &#125;

    fread(encryptedData, sizeof(unsigned char), encryptedFileSize, encryptedFile);
    fclose(encryptedFile);

    QRcode* qrcode = QRcode_encodeData(encryptedFileSize, encryptedData, 0,QR_ECLEVEL_L);
    if (!qrcode) &#123;
        perror(&quot;QRcode encoding failed&quot;);
        free(encryptedData);
        return 1;
    &#125;
    
    writeANSI(qrcode,stdout,5);
   
    return 0;
&#125;

int main()
&#123;
    generateQRCode(&quot;test_encrypt_out&quot;);
&#125;
</code></pre>
<p>æœåŠ¡ç«¯è§£ç éƒ¨åˆ†ï¼ˆæœªéªŒè¯ï¼‰</p>
<pre><code class="c">package main

import (
    &quot;fmt&quot;
    &quot;io/ioutil&quot;
    &quot;net/http&quot;
    &quot;strings&quot;

    &quot;github.com/rsc/qr&quot;
    &quot;github.com/rsc/qr/handy&quot;
)

func main() &#123;
    http.HandleFunc(&quot;/process_qr_code&quot;, func(w http.ResponseWriter, r *http.Request) &#123;
        // è¯»å–ä¸Šä¼ çš„äºŒç»´ç å›¾ç‰‡
        file, _, err := r.FormFile(&quot;qr_code&quot;)
        if err != nil &#123;
            http.Error(w, &quot;Failed to read QR code file&quot;, http.StatusBadRequest)
            return
        &#125;
        defer file.Close()

        // è§£æäºŒç»´ç 
        img, _, err := handy.Decode(file)
        if err != nil &#123;
            http.Error(w, &quot;Failed to decode QR code&quot;, http.StatusInternalServerError)
            return
        &#125;

        // ä»è§£æçš„äºŒç»´ç ä¸­æå–åŠ å¯†æ•°æ®
        encodedData := img.Content
        encryptedData := strings.TrimSpace(encodedData)

        
        // åŠ è½½RSAç§é’¥
        privateKeyPEM, err := ioutil.ReadFile(&quot;private_key.pem&quot;)
        if err != nil &#123;
            http.Error(w, &quot;Failed to read private key&quot;, http.StatusInternalServerError)
            return
        &#125;

        privateKeyBlock, _ := pem.Decode(privateKeyPEM)
        if privateKeyBlock == nil &#123;
            http.Error(w, &quot;Failed to decode private key&quot;, http.StatusInternalServerError)
            return
        &#125;

        privateKey, err := x509.ParsePKCS1PrivateKey(privateKeyBlock.Bytes)
        if err != nil &#123;
            http.Error(w, &quot;Failed to parse private key&quot;, http.StatusInternalServerError)
            return
        &#125;

        // è§£å¯†æ•°æ®
        decryptedData, err := rsa.DecryptPKCS1v15(nil, privateKey, encryptedData)
        if err != nil &#123;
            http.Error(w, &quot;Failed to decrypt data&quot;, http.StatusInternalServerError)
            return
        &#125;
        // è¿”å›è§£å¯†åçš„æ•°æ®
        w.Header().Set(&quot;Content-Type&quot;, &quot;text/plain&quot;)
        fmt.Fprintf(w, &quot;Decrypted Data: %s&quot;, decryptedData)
    &#125;)

    http.ListenAndServe(&quot;:8080&quot;, nil)
&#125;

</code></pre>
<p>å‚è€ƒèµ„æ–™<br>Linuxä¸‹PAMæ¨¡å—å­¦ä¹ æ€»ç»“ - æ•£å°½æµ®å - åšå®¢å›­ <code>https://www.cnblogs.com/kevingrace/p/8671964.html</code></p>
<p>Linux PAMå¼€å‘ç¤ºä¾‹äºŒ:ç™»å½•ç³»ç»Ÿæ—¶ä½¿ç”¨è‡ªå·±çš„PAMæ¨¡å—è¿›è¡Œå¯†ç è®¤è¯-CSDNåšå®¢</p>
<h1 id="è½¯ä»¶ä¿æŠ¤"><a href="#è½¯ä»¶ä¿æŠ¤" class="headerlink" title="è½¯ä»¶ä¿æŠ¤"></a>è½¯ä»¶ä¿æŠ¤</h1><p>è½¯ä»¶ä¿æŠ¤ç›®çš„ï¼šé˜²æ­¢è½¯ä»¶è¢«æœªæˆæƒä¸‹è½½ã€å¤åˆ¶ã€å®‰è£…ã€è¿è¡Œã€è½¬è®©ã€å‡ºç§Ÿã€ä¿®æ”¹ã€ç ´è§£</p>
<p>è½¯ä»¶ä¿æŠ¤ä»æ¥éƒ½æ˜¯å¤šæ–¹é¢å®ç°çš„ï¼Œä¸èƒ½ä»…é è½¯ä»¶è‡ªèº«ã€‚è¿™é‡Œä»4ä¸ªç»´åº¦è®¨è®ºä¸€ä¸‹å„ä¸ªå±‚é¢å¯ä»¥åšçš„äº‹æƒ…ã€‚<br><img src="http://119.91.145.27:12799/api/public/dl/p8KdAUHH/image-20240307114725324.png" alt="image-20240307114725324"></p>
<p>è½¯ä»¶æˆæƒé€šå¸¸å‡ºç°åœ¨å•†ä¸šè½¯ä»¶ä¸­ï¼Œå…¶å¯ä»¥å¯¹è½¯ä»¶çš„å®‰è£…ã€è¿è¡Œåšå‡ºé™åˆ¶ï¼Œä¾‹å¦‚æœªæˆæƒçš„ç”¨æˆ·ä½¿ç”¨è¯¥è½¯ä»¶ï¼ˆæˆ–è€…è¯¥è½¯ä»¶çš„æŸäº›åŠŸèƒ½ï¼‰ã€‚<br>åå°éšè—é€šå¸¸åœ¨TOBäº§å“çš„ç³»ç»Ÿçº§åˆ«äº§å“ä¸­ï¼Œé€šè¿‡WEBUI&#x2F;GUIç­‰éšè—å®ç°ç»†èŠ‚ï¼Œå¸¸å¸¸ä¼´éšç€ç³»ç»Ÿåå°ä¿¡æ¯éšè—ã€ï¼ˆå”®åï¼‰è§’è‰²è®¤è¯ç­‰æœºåˆ¶ï¼Œå®ƒé˜²èŒƒçš„æ˜¯ç”¨æˆ·è¿›å…¥è½¯ä»¶çš„è¿è¡ŒåŸºåº§â€”â€”æ“ä½œç³»ç»Ÿã€‚è€ŒåŸæœ¬æ“ä½œç³»ç»Ÿçš„ä¸€äº›åŸºç¡€åŠŸèƒ½ï¼ˆå¦‚æ—¶é—´æ—¥æœŸä¿®æ”¹ã€IPåœ°å€ä¿®æ”¹ï¼‰ï¼Œåˆ™é€šè¿‡UIæ¥æä¾›ç»™ç”¨æˆ·ã€‚<br>å”®åæ”¯æŒæ˜¯åœ¨è½¯ä»¶å‡ºç°é—®é¢˜æ—¶ï¼Œç”±ç‰¹å®šçš„å”®åäººå‘˜å»é€šè¿‡ç½‘ç»œç›´è¿ã€è¿œç¨‹æ¡Œé¢ã€çº¿ä¸‹æ“ä½œç­‰æ–¹å¼ã€‚ç½‘ç»œç›´è¿é€šå¸¸å‘ç”Ÿåœ¨ä¸€äº›å†…ç½®äº†å¯¹åº”æ¨¡å—çš„è½¯ä»¶ä¸­ï¼Œå®ƒå…è®¸å”®åäººå‘˜ç›´æ¥è¿æ¥åˆ°è½¯ä»¶çš„æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°ç”¨æˆ·çš„é…ç½®å’Œè½¯ä»¶çš„ä¿¡æ¯ç­‰ã€‚çº¿ä¸‹æ“ä½œçš„å½¢å¼æœ‰å¤šç§ï¼Œç®€å•çš„å¯ä»¥é€šè¿‡ç”¨æˆ·ç•Œé¢æ“ä½œï¼Œæœ‰äº›ç‰¹æ®Šçš„æ“ä½œåˆ™éœ€è¦è¿›å…¥ç³»ç»Ÿåå°æ“ä½œï¼Œè¿™æ—¶ï¼Œå‰é¢æåˆ°çš„â€åå°éšè—â€œå¿…é¡»è¦ç•™ä¸‹å”®åäººå‘˜çš„å…¥å£ã€‚<br>åŠ å¯†æ˜¯ä¸€ç§ç®€å•è€Œæœ‰æ•ˆçš„ä¿æŠ¤æ–¹å¼ï¼ŒåŠ å¯†çš„çº§åˆ«æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚æ–‡ä»¶åŠ å¯†ã€æ•°æ®åº“åŠ å¯†ã€ç£ç›˜åŠ å¯†ã€‚åŠ å¯†çš„ç®—æ³•ä¸€èˆ¬æ˜¯é˜²æŠ¤çš„å…³é”®ï¼Œéœ€è¦ç”¨å„ç§æ‰‹æ®µé™ä½ç®—æ³•è¢«æ¢æµ‹çš„å¯èƒ½ï¼Œè€Œå¯†é’¥çš„å­˜å‚¨æ¯”å¯†é’¥çš„å¼ºåº¦æ›´é‡è¦ã€‚</p>
<p>ä¸‹é¢è®¨è®ºä¸€ä¸‹å„ä¸ªéƒ¨åˆ†çš„æ–¹æ¡ˆç»†èŠ‚<br>å¯¹äºåœ¨çº¿ä½¿ç”¨çš„è½¯ä»¶ï¼Œè®©ç”¨æˆ·è‡ªè¡Œè¾“å…¥ç”¨æˆ·åæ˜¯ä¸€ç§ç®€å•æœ‰æ•ˆçš„æœºåˆ¶ï¼Œè€Œå¯¹äºå…è®¸ç¦»çº¿ä½¿ç”¨çš„è½¯ä»¶ï¼Œéœ€è¦æ”¶é›†è½¯ä»¶çš„è¿è¡Œç¯å¢ƒä¿¡æ¯ç”Ÿæˆä¸€ä¸ªå’Œç¯å¢ƒç›¸å…³çš„IDï¼Œè¿™ä¸ªIDé€šå¸¸æˆä¸ºæœºå™¨ç ï¼Œæ”¶é›†çš„ä¿¡æ¯é€šå¸¸æ˜¯ç¡¬ä»¶ä¿¡æ¯ã€‚ç„¶è€Œï¼Œåœ¨è™šæ‹ŸåŒ–ç¯å¢ƒã€dockerç¯å¢ƒä¸‹ï¼Œæƒ…å†µå¯èƒ½ç•¥æœ‰ä¸åŒï¼Œç”±äºè™šæ‹ŸåŒ–ç¯å¢ƒçš„ç¡¬ä»¶ä¿¡æ¯ä¸å‡†ç¡®ã€å®¹æ˜“å‘ç”Ÿå˜æ›´ï¼Œè€Œdockerå°±æ›´åŠ æ²¡æœ‰ç¡¬ä»¶ä¿¡æ¯ï¼Œæ‰€ä»¥å¾ˆå¤šå‚å•†éƒ½ä¼šé‡‡ç”¨ä¸€ç§å«æˆæƒæœåŠ¡å™¨çš„ä¸œè¥¿ï¼ˆä¾‹å¦‚æ·±ä¿¡æœVLSï¼‰æ¥åº”å¯¹ï¼Œè¿™ä¸ªåæ–‡å†è®¨è®ºã€‚<br>è½¯ä»¶å‚å•†é€šè¿‡éå¯¹ç§°æˆ–è€…å¯¹ç§°åŠ å¯†æŠ€æœ¯ï¼Œé’ˆå¯¹ç”¨æˆ·æä¾›çš„IDæ¥æä¾›ä¸€æ®µç»è¿‡åŠ å¯†çš„åºåˆ—å·&#x2F;æˆæƒæ–‡ä»¶ï¼Œè½¯ä»¶é€šè¿‡ç‰¹å®šçš„ç®—æ³•æ ¡éªŒIDå’Œåºåˆ—å·&#x2F;æˆæƒæ–‡ä»¶ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚ä»¥æŸä¸ªå‚å•†çš„åºåˆ—å·ä¸ºä¾‹ï¼šè½¯ä»¶é€šè¿‡è®¡ç®—ç½‘å¡MACåœ°å€çš„CRC32å¾—åˆ°IDï¼Œç”¨æˆ·æä¾›IDåï¼Œå‚å•†é€šè¿‡DESç®—æ³•å’Œå›ºå®šå¯†é’¥å°†IDå˜ä¸ºä¸€ä¸²åºåˆ—å·ï¼Œè¿™ä¸²åºåˆ—å·å¯ä»¥ç”±ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥è½¯ä»¶ä¸­ï¼Œè½¯ä»¶é€šè¿‡DESç®—æ³•å’Œä»£ç å†…ç½®çš„å›ºå®šå¯†é’¥è§£å¯†åºåˆ—å·ï¼Œå¾—åˆ°çš„ä¿¡æ¯å’ŒIDæ¯”è¾ƒã€‚<br>ä¸ºäº†é¿å…ç”¨æˆ·è¿›å…¥æ“ä½œç³»ç»Ÿåå°ï¼Œé€šå¸¸å‚å•†ä¸ä¼šæä¾›ç³»ç»Ÿçš„ç‰¹æƒè´¦å·å¯†ç ï¼Œç„¶è€Œç‰¹æƒè´¦å·çš„å¯†ç åœ¨å…¬å¸é‡Œé¢å¾ˆå¤šäººéƒ½çŸ¥é“ï¼Œä¾‹å¦‚ç ”å‘å‘˜å·¥ã€æŠ€æœ¯æ”¯æŒå‘˜å·¥ï¼Œè¿™å…¶ä¸­å­˜åœ¨å¾ˆå¤šæ³„å¯†çš„å¯èƒ½ã€‚æ‰€ä»¥æœ‰äº›å‚å•†ä¼šä¿®æ”¹æ“ä½œç³»ç»Ÿçš„è®¤è¯æœºåˆ¶ï¼Œå®ç°è‡ªå®šä¹‰çš„è®¤è¯é€»è¾‘ï¼Œä¾‹å¦‚æ‰«ç ç™»å½•ã€åŠ¨æ€å¯†ç ç­‰ã€‚è¿™é‡Œä»¥linuxç³»ç»Ÿä¸ºä¾‹ï¼Œlinuxç³»ç»Ÿæœ‰ä¸€ç§å«PAMï¼ˆPluggable Authentication Modules)çš„ä¸œè¥¿ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºè®¤è¯æ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨cè¯­è¨€æ¥å®ç°å¯¹åº”çš„æ¥å£ï¼Œç„¶åæŠŠä»£ç ç¼–è¯‘åä»¥åŠ¨æ€é“¾æ¥åº“çš„å½¢å¼æ”¾åˆ°ç‰¹å®šç›®å½•ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯ï¼Œä¸éœ€è¦ä¿®æ”¹æ“ä½œç³»ç»Ÿçš„æºä»£ç ã€‚<br>ç›¸åº”çš„ï¼Œæˆ‘ä»¬è™½ç„¶é˜»æ­¢äº†ç”¨æˆ·å¯¹ç³»ç»Ÿåå°çš„è®¿é—®æƒé™ï¼Œä½†æ˜¯ä¹Ÿè¦ç»™æŠ€æœ¯æ”¯æŒ&#x2F;å”®åç­‰ç•™ä¸‹å…¥å£ã€‚é¦–å…ˆæ˜¯è½¯ç¡¬ä»¶çš„ä¿¡æ¯æ”¶é›†ï¼Œå¹³å¸¸æˆ‘ä»¬å¯ä»¥è¿›å…¥ç³»ç»Ÿåå°ï¼Œæ‰‹åŠ¨æŸ¥çœ‹ã€æ‹·è´æ—¥å¿—æ–‡ä»¶ï¼ŒæŸ¥çœ‹ç¯å¢ƒä¿¡æ¯ï¼Œåœ¨é«˜åº¦å°é—­ç³»ç»Ÿåï¼Œè¿™äº›ä¿¡æ¯é€šå¸¸ä¼šé€šè¿‡ä¸€ä¸ªç•Œé¢ï¼Œå…è®¸ç”¨æˆ·&#x2F;æŠ€æœ¯æ”¯æŒæ¥é‡‡é›†ï¼Œæœ‰å¿…è¦çš„æ—¶å€™ï¼Œå†é€šè¿‡å”®åç³»ç»Ÿè·å–ç³»ç»Ÿçš„ç™»å½•å£ä»¤ï¼Œè¿›å…¥åå°æ‰‹åŠ¨æ“ä½œã€‚<br>æœ‰äº›è½¯ä»¶ä¼šé€šè¿‡å…¨ç›˜åŠ å¯†çš„æ–¹å¼é˜»æ­¢ç”¨æˆ·å°†ç£ç›˜æŒ‚è½½åˆ°å…¶ä»–ç³»ç»Ÿè¿›è¡Œè§£æï¼Œå¸¸è§„çš„å®ç°æ˜¯ç”¨LUKSæ¥å…¨ç›˜åŠ å¯†ï¼Œç„¶ååœ¨å¼€æœºé˜¶æ®µå»ç‰¹å®šçš„ä½ç½®è·å–å¯†é’¥ï¼Œå¤§å¤§å¢åŠ äº†ç ´è§£çš„éš¾åº¦ã€‚</p>
<h1 id="è®¾è®¡æ–‡æ¡£"><a href="#è®¾è®¡æ–‡æ¡£" class="headerlink" title="è®¾è®¡æ–‡æ¡£"></a>è®¾è®¡æ–‡æ¡£</h1><p>ç‰ˆæœ¬ä¿®è®¢è®°å½•:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>æ—¥æœŸ</td>
<td>ç‰ˆæœ¬</td>
<td>ä¿®è®¢äºº</td>
<td>ä¿®æ”¹å†…å®¹</td>
<td>å¤‡æ³¨</td>
</tr>
<tr>
<td>2023-11-1</td>
<td>0.1</td>
<td>å²‘æ€å</td>
<td>æ–¹æ¡ˆå®šå‹ï¼Œæ–‡æ¡£åŸºæœ¬å®Œæˆ</td>
<td></td>
</tr>
<tr>
<td>2023-11-6</td>
<td>0.2</td>
<td>å²‘æ€å</td>
<td>è¡¥å……æ‰“åŒ…é¡¹ç›®ä»£ç è®¾è®¡</td>
<td>Makefile</td>
</tr>
<tr>
<td>2023-11-7</td>
<td>0.3</td>
<td>å²‘æ€å</td>
<td>è¡¥å……å¯¹å…¶ä»–æ¨¡å—å½±å“ï¼›è°ƒæ•´é¡¹ç›®ç»“æ„è®¾è®¡</td>
<td>å·²è¯„å®¡</td>
</tr>
<tr>
<td>2023-11-9</td>
<td>0.4</td>
<td>å²‘æ€å</td>
<td>1.å¾®è°ƒï¼›2. ç¡®å®šç£ç›˜æ˜¾ç¤ºæ–¹æ¡ˆ</td>
<td></td>
</tr>
<tr>
<td>2023-11-14</td>
<td>0.5</td>
<td>å²‘æ€å</td>
<td></td>
<td></td>
</tr>
<tr>
<td>2023-11-15</td>
<td>0.6</td>
<td>è¢è˜å£‘</td>
<td>æ·»åŠ 5.2.1.2ç« èŠ‚</td>
<td></td>
</tr>
<tr>
<td>2023-11-22</td>
<td>0.7</td>
<td>å²‘æ€å</td>
<td>æ·»åŠ 5.2.5ç« èŠ‚</td>
<td></td>
</tr>
<tr>
<td>2023-12</td>
<td>0.8</td>
<td>å´æ¾è¾¾</td>
<td>è¡¥å……7.2.5çš„mongoåŠ¨æ€é…ç½®å®ç°</td>
<td></td>
</tr>
</tbody></table>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="1-é¡¹ç›®èƒŒæ™¯"><a href="#1-é¡¹ç›®èƒŒæ™¯" class="headerlink" title="1 é¡¹ç›®èƒŒæ™¯"></a>1 é¡¹ç›®èƒŒæ™¯</h2><p>å®‰è£…åŒ…äº¤ä»˜èƒŒæ™¯ä¸‹ï¼Œæ“ä½œç³»ç»Ÿç”±ç”¨æˆ·æä¾›ï¼Œç”¨æˆ·æ‹¥æœ‰æœ€é«˜æƒé™ï¼Œèƒ½å¤Ÿéšæ„å¯¹è½¯ä»¶è¿›è¡ŒæŸ¥çœ‹ã€ä¿®æ”¹ã€å¤åˆ¶ç­‰ï¼Œæå¤§çš„å¢åŠ äº†åç ´è§£çš„éš¾åº¦ã€‚</p>
<p>é•œåƒäº¤ä»˜æ˜¯å‹å•†å¹¿æ³›ä½¿ç”¨çš„ä¸€ç§åšæ³•ï¼Œå®ƒé™¤äº†ä½“ç§¯æ¯”è¾ƒå¤§ä¹‹å¤–ï¼Œèƒ½å¤Ÿæä¾›æ¯”å®‰è£…åŒ…äº¤ä»˜æ›´åŠ æ ‡å‡†ã€ä¾¿æ·çš„è¿‡ç¨‹ã€‚</p>
<h2 id="2-é¡¹ç›®ç›®æ ‡"><a href="#2-é¡¹ç›®ç›®æ ‡" class="headerlink" title="2 é¡¹ç›®ç›®æ ‡"></a>2 é¡¹ç›®ç›®æ ‡</h2><p>æä¾›é•œåƒäº¤ä»˜ï¼Œå°†æ“ä½œç³»ç»Ÿå’ŒçŸ³çŠ€è½¯ä»¶ä½œä¸ºä¸€ä¸ªäº¤ä»˜æ•´ä½“ï¼Œä¸å†è®©ç”¨æˆ·æä¾›æ“ä½œç³»ç»Ÿã€‚</p>
<p>é€‚é…ä¸»æµçš„è™šæ‹ŸåŒ–å¹³å°çš„äº¤ä»˜ã€‚</p>
<p>é—­ç¯é•œåƒäº¤ä»˜å„ä¸ªç¯èŠ‚å¯èƒ½éœ€è¦è§£å†³çš„æŠ€æœ¯é—®é¢˜</p>
<p>TUIéƒ¨åˆ†çš„è®¾è®¡åœ¨å¦ä¸€ç¯‡æ–‡æ¡£é‡Œé¢ <a target="_blank" rel="noopener" href="https://doc.weixin.qq.com/doc/w3_AcwAzgacAIciuwXMHlQRMqme1AmWW?scode=ABwA9Qd2ABEOAPeCbsAcwAzgacAIc">TUIæ¨¡å—è®¾è®¡è¯´æ˜ä¹¦</a></p>
<h2 id="3-åè¯è§£é‡Š"><a href="#3-åè¯è§£é‡Š" class="headerlink" title="3 åè¯è§£é‡Š"></a>3 åè¯è§£é‡Š</h2><p><strong>é•œåƒï¼š</strong>æœ¬æ–‡æ³›æŒ‡ISOé•œåƒæ–‡ä»¶ã€OVAé•œåƒæ–‡ä»¶ã€QCOW2é•œåƒæ–‡ä»¶</p>
<p><strong>ISOæ˜ åƒï¼š</strong>å³ç¬¦åˆISO 9660æ ‡å‡†çš„æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™ä¸ªæ ‡å‡†å®šä¹‰äº†ç›®å½•ç»“æ„ã€æ–‡ä»¶åè§„åˆ™ã€ç›®å½•æ·±åº¦ã€æ–‡ä»¶å±æ€§ç­‰ä¸€ç³»åˆ—ä¸œè¥¿ã€‚å¯¹äºæœ¬æ–‡è€Œè¨€ï¼ŒISOæ˜ åƒåŒ…å«ç”¨äºå®‰è£…çš„å¼•å¯¼ç¨‹åºã€æ“ä½œç³»ç»Ÿæœ¬èº«ã€å…¶ä»–é™„åŠ åº”ç”¨ï¼Œæ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<p><strong>ISOé•œåƒï¼š</strong>å’ŒISOæ˜ åƒæ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚</p>
<p><strong>ç³»ç»Ÿå®‰è£…ï¼š</strong>æœ¬æ–‡çš„ç³»ç»Ÿå®‰è£…æŒ‡çš„æ˜¯ï¼Œå°†ISOæ–‡ä»¶æŒ‚è½½æˆè™šæ‹ŸDVDè®¾å¤‡æ¥å¼•å¯¼æ“ä½œç³»ç»Ÿçš„å®‰è£…ã€‚</p>
<p><strong>é•œåƒå¯¼å…¥ï¼š</strong>å°†ç‰¹å®šæ ¼å¼çš„é•œåƒæ–‡ä»¶ä¸Šä¼ åˆ°è™šæ‹ŸåŒ–å¹³å°ç§°ä¸ºé•œåƒå¯¼å…¥ï¼Œä¸åŒçš„å¹³å°ä½¿ç”¨ä¸åŒæ ¼å¼çš„æ–‡ä»¶ï¼Œä¾‹å¦‚OVAã€‚</p>
<p><strong>VMDKï¼š</strong> æ˜¯ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼Œç”¨æ¥ä½œä¸ºè™šæ‹Ÿç£ç›˜çš„å®¹å™¨ï¼Œæœ€åˆæ˜¯ç”±vmwareå¼€å‘ä½¿ç”¨ï¼Œåæ¥å‘å¸ƒOVFæ ‡å‡†åï¼Œæˆä¸ºå¼€æ”¾æ ¼å¼ï¼Œä¸ºå¤§å¤šæ•°è™šæ‹ŸåŒ–å¹³å°æ‰€æ”¯æŒã€‚</p>
<p><strong>QCOW2ï¼š</strong>å³qcowçš„ç¬¬äºŒä¸ªç‰ˆæœ¬,å’Œvmdkç±»ä¼¼ï¼Œqcowä¹Ÿæ˜¯ä¸€ç§è™šæ‹Ÿç£ç›˜å®¹å™¨ã€‚qcowç›®å‰æœ‰ä¸‰ä¸ªç‰ˆæœ¬ï¼Œå›½å†…å¤§éƒ¨åˆ†å…¬æœ‰äº‘æ”¯æŒçš„éƒ½æ˜¯qcow2æ ¼å¼ã€‚</p>
<p><strong>OVFæ–‡ä»¶ï¼š</strong>ä¸€ç§ç”¨äºæ‰“åŒ…è™šæ‹Ÿæœºé…ç½®ä¿¡æ¯ï¼ˆå¦‚CPUï¼Œå†…å­˜ï¼Œç£ç›˜ï¼Œç½‘å¡)çš„æ–‡ä»¶ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ç§æ¯”è¾ƒä¸»æµçš„è§„èŒƒï¼Œå¤§å¤šæ•°è™šæ‹ŸåŒ–å¹³å°éƒ½æ”¯æŒã€‚</p>
<p><strong>OVAï¼š</strong>ä¸€ç§æ‰“åŒ…æ ¼å¼ï¼Œå’Œtaræ˜¯åŒä¸€ç§æ ‡å‡†ï¼Œç›¸å½“äºtaråŒ…æ”¹äº†åç¼€åã€‚é‡Œé¢åŒ…å«è‡³å°‘ä¸¤ä¸ªæ–‡ä»¶ï¼šovfå’Œvmdkï¼Œè¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„mfæ–‡ä»¶ï¼ˆå­˜å‚¨å…¶ä»–æ–‡ä»¶çš„å“ˆå¸Œå€¼ï¼‰</p>
<p><strong>åˆ†åŒºæ‰©å®¹ï¼š</strong>æŒ‡åœ¨ç°æœ‰çš„åˆ†åŒºä¸Šæ‰©å¤§åˆ†åŒºç©ºé—´ï¼Œè™½ç„¶è™šæ‹Ÿç£ç›˜å¯ä»¥è°ƒæ•´å¤§å°ï¼Œä½†æ˜¯è°ƒæ•´åçš„å¤§å°å¹¶ä¸ä¼šç›´æ¥ååº”åˆ°åˆ†åŒºä¸Šï¼Œéœ€è¦å¯¹åˆ†åŒºè¿›è¡Œæ‰©å®¹ä»¥é€‚é…æ–°çš„ç£ç›˜å¤§å°ã€‚</p>
<p><strong>å…³æœºæ‰©å®¹ï¼š</strong>å³åˆ†åŒºæ‰©å®¹éœ€è¦å…³æœºæˆ–è€…é‡å¯ï¼Œæ‰©å®¹æ‰èƒ½ç”Ÿæ•ˆã€‚</p>
<p><strong>å¼€æœºæ‰©å®¹ï¼š</strong>å³çƒ­æ‰©å®¹ï¼Œåˆ†åŒºæ‰©å®¹ä¸éœ€è¦é‡å¯å°±èƒ½ç”Ÿæ•ˆã€‚</p>
<p><strong>åŒ…ï¼š</strong>åŒ…åŸæœ¬æŒ‡å°†æ€»æ§å’Œå¼•æ“çš„äºŒè¿›åˆ¶ã€é…ç½®ã€ä¾èµ–ç­‰å‹ç¼©åœ¨ä¸€èµ·çš„ä¸€ä¸ªå¯ç”¨äºå®‰è£…ã€å‡çº§çš„åŒ…ã€‚åœ¨æœ¬æ–‡ä¸­å°†å…¶å«ä¹‰è¿›ä¸€æ­¥æ³›åŒ–ï¼Œå°†é•œåƒæ–‡ä»¶ä¹Ÿå½’ç±»åˆ°åŒ…çš„èŒƒç•´ï¼Œä¼šä»¥é•œåƒåŒ…æŒ‡ä»£é•œåƒã€‚</p>
<p><strong>ç²¾ç®€ç½®å¤‡ï¼š</strong>ç²¾ç®€ç½®å¤‡æ˜¯ä¸€ç§åŠ¨æ€åˆ†é…å­˜å‚¨ç©ºé—´çš„æŠ€æœ¯ï¼Œå®ƒå…è®¸åœ¨åˆ›å»ºæ—¶ä»…åˆ†é…å¿…è¦çš„å­˜å‚¨ç©ºé—´ï¼Œè€Œä¸æ˜¯é¢„å…ˆåˆ†é…æ•´ä¸ªç©ºé—´ã€‚è¿™æ„å‘³ç€è™šæ‹Ÿç£ç›˜çš„å®é™…å¤§å°å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€åœ°å¢é•¿ï¼Œç›´åˆ°è¾¾åˆ°é¢„è®¾çš„ä¸Šé™ã€‚ç²¾ç®€ç½®å¤‡æŠ€æœ¯å¯ä»¥æœ‰æ•ˆåœ°æé«˜å­˜å‚¨åˆ©ç”¨ç‡ï¼Œå› ä¸ºå®ƒå¯ä»¥é¿å…ä¸ºæœªæ¥å¯èƒ½ç”¨ä¸ä¸Šçš„ç©ºé—´é¢„ç•™å­˜å‚¨å®¹é‡ã€‚</p>
<p><strong>åšç½®å¤‡ï¼š</strong>åšç½®å¤‡æ˜¯ä¸€ç§é™æ€åˆ†é…å­˜å‚¨ç©ºé—´çš„æŠ€æœ¯ï¼Œå®ƒä¼šåœ¨è™šæ‹Ÿç£ç›˜åˆ›å»ºæ—¶ç«‹å³åˆ†é…æ•´ä¸ªè®¾å®šç©ºé—´ã€‚è¿™æ„å‘³ç€è™šæ‹Ÿç£ç›˜ä¼šå ç”¨æ‰€åˆ†é…çš„ç©ºé—´ï¼Œå³ä½¿å®é™…ä¸Šå¹¶æ²¡æœ‰ä½¿ç”¨å…¨éƒ¨ç©ºé—´ã€‚åšç½®å¤‡ä¼šæä¾›æ›´é«˜çš„æ€§èƒ½ï¼Œå› ä¸ºå­˜å‚¨ç©ºé—´å·²ç»è¢«é¢„å…ˆåˆ†é…å¹¶ä¿ç•™ï¼Œä½†ä¼šå¯¼è‡´ä½æ•ˆçš„å­˜å‚¨åˆ©ç”¨ç‡ã€‚</p>
<h2 id="4-æ€»ä½“è®¾è®¡"><a href="#4-æ€»ä½“è®¾è®¡" class="headerlink" title="4 æ€»ä½“è®¾è®¡"></a>4 æ€»ä½“è®¾è®¡</h2><h3 id="4-1-æ¦‚è¦è®¾è®¡"><a href="#4-1-æ¦‚è¦è®¾è®¡" class="headerlink" title="4.1 æ¦‚è¦è®¾è®¡"></a>4.1 æ¦‚è¦è®¾è®¡</h3><h4 id="-1"><a href="#-1" class="headerlink" title=""></a></h4><h4 id="4-1-1-å®ç°çš„åŠŸèƒ½"><a href="#4-1-1-å®ç°çš„åŠŸèƒ½" class="headerlink" title="4.1.1 å®ç°çš„åŠŸèƒ½"></a>4.1.1 å®ç°çš„åŠŸèƒ½</h4><p>æ¦‚è¦æè¿°è¯¥æ¨¡å—è¦å®ç°çš„åŠŸèƒ½ã€‚åˆ—å‡ºè¦å®ç°çš„åŠŸèƒ½ç‚¹åŠå­åŠŸèƒ½ç‚¹ï¼Œå¹¶å¯¹æ¯ä¸€ä¸ªåŠŸèƒ½ç‚¹è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚åŠŸèƒ½ç‚¹ä¹‹é—´çš„å±‚çº§å’Œå…³è”å…³ç³»è¦æ˜æ™°ã€‚è¿™é‡Œä»…æè¿°åŠŸèƒ½ï¼Œä¸éœ€è¦æ¶‰åŠå®ç°æ–¹æ¡ˆã€åŠŸèƒ½å–èˆç­‰é—®é¢˜ã€‚</p>
<ol>
<li><p>å®ç°è‡ªåŠ¨åŒ–é•œåƒåˆ¶ä½œ</p>
</li>
<li><p>é•œåƒæŒ‰ç…§éœ€æ±‚çš„æè¿°ï¼Œç»Ÿä¸€å„é¡¹ç³»ç»Ÿè®¾ç½®ï¼Œå®‰è£…è¿‡ç¨‹è‡ªåŠ¨åŒ–</p>
<ol>
<li><p>æŒ‰ç…§éœ€æ±‚è¿›è¡Œåˆ†åŒº</p>
</li>
<li><p>æŒ‰ç…§éœ€æ±‚å®šåˆ¶grubå¼•å¯¼</p>
</li>
</ol>
</li>
<li><p>å®ç°åˆ†åŒºçš„å…³æœºæ‰©å®¹</p>
</li>
</ol>
<h4 id="-2"><a href="#-2" class="headerlink" title=""></a></h4><h4 id="4-1-2-è®¾è®¡çš„æ€§èƒ½æŒ‡æ ‡"><a href="#4-1-2-è®¾è®¡çš„æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="4.1.2 è®¾è®¡çš„æ€§èƒ½æŒ‡æ ‡"></a>4.1.2 è®¾è®¡çš„æ€§èƒ½æŒ‡æ ‡</h4><p>æ— </p>
<h4 id="4-2-è¦†ç›–èŒƒå›´"><a href="#4-2-è¦†ç›–èŒƒå›´" class="headerlink" title="4.2 è¦†ç›–èŒƒå›´"></a>4.2 è¦†ç›–èŒƒå›´</h4><p>æè¿°æœ¬æ¬¡é¡¹ç›®è¦†ç›–çš„èŒƒå›´ï¼Œä¸ºäº†é™ä½é£é™©ï¼Œå»ºè®®é¡¹ç›®ä¸Šçº¿å‰åšå¥½ç°åº¦èŒƒå›´æ§åˆ¶</p>
<ol>
<li><p>æ‰“åŒ…å¹³å°-å‡ºåŒ…æµç¨‹</p>
</li>
<li><p>æ€»æ§å®‰è£…ã€éƒ¨ç½²ã€å‡çº§</p>
</li>
</ol>
<h2 id="5-è¯¦ç»†è®¾è®¡"><a href="#5-è¯¦ç»†è®¾è®¡" class="headerlink" title="5 è¯¦ç»†è®¾è®¡"></a>5 è¯¦ç»†è®¾è®¡</h2><h3 id="5-1-è®¾è®¡å›¾"><a href="#5-1-è®¾è®¡å›¾" class="headerlink" title="5.1 è®¾è®¡å›¾"></a>5.1 è®¾è®¡å›¾</h3><p><strong>å‡ºåŒ…è¿‡ç¨‹å›¾</strong></p>
<p>æœ¬å›¾æè¿°æœ‰å“ªäº›åŒ…ï¼Œè¿™äº›åŒ…çš„å†…å®¹æ˜¯ä»å“ªæ¥çš„ã€‚</p>
<p><img src="/../../../../home/xiaoy/media/image1.png" alt="å›¾æ ‡ æè¿°å·²è‡ªåŠ¨ç”Ÿæˆ"></p>
<p><strong>é•œåƒåˆ¶ä½œ(image-builder)é¡¹ç›®ç»“æ„è®¾è®¡</strong></p>
<p><strong>å®‰è£…éƒ¨ç½²æµç¨‹</strong></p>
<p>æœ¬å›¾æä¾›å®‰è£…éƒ¨ç½²çš„æµç¨‹å¯¹æ¯”ï¼Œå·¦è¾¹æ˜¯æ²¡æœ‰åšè¿™å—éœ€æ±‚çš„æ—¶å€™çš„é€»è¾‘ï¼Œå³è¾¹æ˜¯æœ‰äº†é•œåƒäº¤ä»˜ä¹‹åçš„é€»è¾‘.</p>
<p><img src="/../../../../home/xiaoy/media/image2.png" alt="å›¾æ ‡ æè¿°å·²è‡ªåŠ¨ç”Ÿæˆ"></p>
<p><strong>é•œåƒç”Ÿå‘½å‘¨æœŸ</strong></p>
<p>å®‰è£…å‰åŒ…æ‹¬æ‰“åŒ…çš„éƒ¨åˆ†ã€å°†åŒ…ä¸Šä¼ åˆ°ç½‘ç›˜ã€å®¢æˆ·ä¸‹è½½åŒ…ã€å¯¼å…¥åŒ…</p>
<p>å®‰è£…ä¸­ä¸»è¦æ˜¯å¯¼å…¥è¿›åº¦æ¡è·‘å®Œä¹‹åï¼Œé•œåƒçš„å®‰è£…åªéœ€è¦è°ƒæ•´é…ç½®ï¼Œè¿›åº¦æ¡å³æ˜¯ä¸Šä¼ çš„è¿›åº¦</p>
<p><img src="/../../../../home/xiaoy/media/image3.png" alt="å›¾æ ‡ æè¿°å·²è‡ªåŠ¨ç”Ÿæˆ"></p>
<h3 id="5-2-å„æ¨¡å—è¯¦ç»†è®¾è®¡"><a href="#5-2-å„æ¨¡å—è¯¦ç»†è®¾è®¡" class="headerlink" title="5.2 å„æ¨¡å—è¯¦ç»†è®¾è®¡"></a>5.2 å„æ¨¡å—è¯¦ç»†è®¾è®¡</h3><p>å¯¹å„ä¸ªæ¨¡å—è¿›è¡Œè¯¦ç»†é˜è¿°ï¼Œæ•°æ®ä¹‹é—´çš„å…³è”å…³ç³», ä½¿ç”¨çš„ä½•ç§ç®—æ³•, æ˜ç¡®çš„æ¥å£å®šä¹‰(åŒ…å«è¾“å…¥&#x2F;è¾“å‡º&#x2F;å¼‚å¸¸&#x2F;é”™è¯¯ç ), å°½é‡æ˜ç¡®åˆ°ä»£ç å±‚çº§ï¼Œè¾¾åˆ°è®¾è®¡æ–‡æ¡£äº¤ç»™ç¬¬ä¸‰ä¸ªäººä¹Ÿå¯ä»¥æŒ‰ç…§æ–‡æ¡£è¦æ±‚è¿›è¡Œä»£ç å¼€å‘</p>
<h4 id="5-2-1-åŸºISOé•œåƒè¯¦ç»†è®¾è®¡"><a href="#5-2-1-åŸºISOé•œåƒè¯¦ç»†è®¾è®¡" class="headerlink" title="5.2.1 åŸºISOé•œåƒè¯¦ç»†è®¾è®¡"></a>5.2.1 åŸºISOé•œåƒè¯¦ç»†è®¾è®¡</h4><p><strong>éœ€æ±‚å›é¡¾</strong></p>
<ol>
<li><p>ç¦ç”¨snapåŒ…ç®¡ç†å™¨</p>
</li>
<li><p>ç¦ç”¨ç³»ç»Ÿè‡ªåŠ¨æ›´æ–°</p>
</li>
<li><p>ç³»ç»Ÿå‚æ•°é¢„å®šä¹‰ï¼ˆå«è´¦æˆ·ã€åˆ†åŒºã€è¯­è¨€ç­‰ï¼‰</p>
</li>
</ol>
<p><del>ç”±äºåŸºé•œåƒéš¾ä»¥è‡ªåŠ¨åŒ–åˆ¶ä½œï¼Œæ‰€ä»¥åŸºé•œåƒéœ€è¦å°½å¯èƒ½åšåˆ°å°‘æ›´æ–°ï¼Œé‡Œé¢ä¸åŒ…å«æ€»æ§åº”ç”¨ï¼Œæ€»æ§ç”±æ‰“åŒ…æµç¨‹é›†æˆåˆ°åŸºé•œåƒä¸­ä½œä¸ºæ­£å¼é•œåƒã€‚</del></p>
<p>åç»­å¼•æ“ä¹Ÿéœ€è¦è€ƒè™‘é•œåƒäº¤ä»˜ï¼Œæ‰€ä»¥åŸºé•œåƒæ—¢æ˜¯æ€»æ§çš„åŸºé•œåƒï¼Œä¹Ÿæ˜¯å¼•æ“çš„åŸºé•œåƒã€‚ä¸ç®¡æ˜¯æ€»æ§è¿˜æ˜¯å¼•æ“ï¼Œéƒ½åº”è¯¥èƒ½å¤Ÿé¡ºåˆ©çš„åœ¨è¯¥é•œåƒé‡Œé¢å®‰è£…ï¼Œä¸ä¼šå‡ºç°ç³»ç»Ÿç‰ˆæœ¬ã€å†…æ ¸ç‰ˆæœ¬é—®é¢˜ï¼Œä¸ä¼šå‡ºç°åº•å±‚ä¾èµ–ç¼ºå¤±é—®é¢˜ã€‚</p>
<p>ç›®å‰çš„è®¾è®¡ä»…è€ƒè™‘Legacy BIOSæ¨¡å¼å³å¯ï¼Œä¸éœ€è¦è€ƒè™‘UEFIæ¨¡å¼ã€‚</p>
<p><strong>æ–¹æ¡ˆä¸€</strong>ï¼šä½¿ç”¨cubic+seedåˆ¶ä½œ</p>
<p><strong>æ–¹æ¡ˆäºŒ</strong>ï¼šä½¿ç”¨xorrios+cloud-initåˆ¶ä½œ</p>
<p>æ–¹æ¡ˆä¸€åœ¨ubuntu20.04ä¸å¯è¡Œï¼Œæ•…ä½¿ç”¨æ–¹æ¡ˆäºŒ</p>
<h5 id="5-2-1-1-ä½¿ç”¨cubicåˆ¶ä½œåŸºé•œåƒæµç¨‹"><a href="#5-2-1-1-ä½¿ç”¨cubicåˆ¶ä½œåŸºé•œåƒæµç¨‹" class="headerlink" title="5.2.1.1 ä½¿ç”¨cubicåˆ¶ä½œåŸºé•œåƒæµç¨‹"></a>5.2.1.1 ä½¿ç”¨cubicåˆ¶ä½œåŸºé•œåƒæµç¨‹</h5><ol>
<li><p>ä¸‹è½½ä¸€ä¸ªå®˜æ–¹çš„ISOé•œåƒï¼Œè¿™é‡Œä½¿ç”¨ubuntu 20.04.6</p>
</li>
<li><p>ç”¨cubicæ‰“å¼€å®˜æ–¹ISOé•œåƒ</p>
</li>
<li><p>å®šåˆ¶å‘è¡Œç‰ˆåå­—</p>
</li>
<li><p>è¿›å…¥chrootç¯å¢ƒï¼Œé€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œå®šåˆ¶</p>
<ol>
<li><p>åˆ é™¤ä¸éœ€è¦çš„åŒ…ç®¡ç†å™¨ï¼ˆsnapï¼‰</p>
</li>
<li><p><del>å…³é—­ç³»ç»Ÿè‡ªåŠ¨æ›´æ–°ï¼ˆunattended-upgradesï¼‰</del>(å¯ä»¥åœ¨preseedé‡Œæå®š)</p>
</li>
</ol>
</li>
<li><p>é€‰æ‹©å†…æ ¸ï¼ˆå¦‚æœæœ‰å¤šä¸ªï¼‰</p>
</li>
<li><p>ç¼–å†™preseedæ–‡ä»¶ï¼Œè®¾å®šå‚æ•°</p>
<ol>
<li><p>å®šåˆ¶ç½‘ç»œé…ç½®</p>
</li>
<li><p>å®šåˆ¶ç£ç›˜åˆ†åŒº</p>
</li>
<li><p>å®šåˆ¶è¯­è¨€åŠé”®ç›˜</p>
</li>
<li><p>å®šåˆ¶ç”¨æˆ·åå¯†ç ã€ä¸»æœºå</p>
</li>
<li><p>å®šåˆ¶é¢„è£…çš„è½¯ä»¶ï¼ˆssh server)</p>
</li>
<li><p>å®šåˆ¶GRUBå¯†ç </p>
</li>
</ol>
</li>
<li><p>ä¿®æ”¹&#x2F;isolinux&#x2F;txt.cfgï¼ŒæŒ‡å‘preseedæ–‡ä»¶</p>
</li>
</ol>
<p><strong>preseedæ–‡ä»¶è¯¦ç»†è®¾è®¡</strong></p>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_37579176/article/details/112492277">ã€ç²¾é€‰ã€‘ä½¿ç”¨ â€œCubicâ€ åˆ¶ä½œè‡ªå®šä¹‰ â€œubuntuâ€ ç³»ç»Ÿé•œåƒ_cubicåˆ¶ä½œé•œåƒ_æ­¤æœ¨å­çš„åšå®¢-CSDNåšå®¢</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/sexibytes/packer-sexigraf/blob/master/preseed.cfg">https://github.com/sexibytes/packer-sexigraf/blob/master/preseed.cfg</a></p>
<p><a target="_blank" rel="noopener" href="https://askubuntu.com/questions/1228909/preseed-config-using-cubic-is-ignored-during-installation">18.04 - Preseed config (using cubic) is ignored during installation - Ask Ubuntu</a></p>
<p><a target="_blank" rel="noopener" href="https://gist.github.com/styblope/2cf93a41662608f924de71fd0e91e0d1">https://gist.github.com/styblope/2cf93a41662608f924de71fd0e91e0d1</a></p>
<p><a target="_blank" rel="noopener" href="https://www.debian.org/releases/bullseye/amd64/apbs04.en.html">B.4.Contents of the preconfiguration file (for bullseye)</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/1234791">ä½¿ç”¨preseedä¸€é”®å®‰è£…Ubuntu Server 1604-é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº</a></p>
<p><a target="_blank" rel="noopener" href="https://zhangguanzhang.github.io/2019/08/06/preseed/">ubuntu preseedæ— äººåº”ç­”å®‰è£… Â· zhangguanzhang&#39;s Blog</a></p>
<p><a target="_blank" rel="noopener" href="https://sysin.org/blog/disable-ubuntu-auto-update/">https://sysin.org/blog/disable-ubuntu-auto-update/</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/covertsh/ubuntu-autoinstall-generator/tree/main">GitHub - covertsh&#x2F;ubuntu-autoinstall-generator: Generate a fully-automated Ubuntu ISO for unattended installations.</a></p>
<h5 id="5-2-1-2-ä½¿ç”¨xorrisoåˆ¶ä½œåŸºé•œåƒæµç¨‹"><a href="#5-2-1-2-ä½¿ç”¨xorrisoåˆ¶ä½œåŸºé•œåƒæµç¨‹" class="headerlink" title="5.2.1.2 ä½¿ç”¨xorrisoåˆ¶ä½œåŸºé•œåƒæµç¨‹"></a>5.2.1.2 ä½¿ç”¨xorrisoåˆ¶ä½œåŸºé•œåƒæµç¨‹</h5><ol>
<li><p>ä¸‹è½½ä¸€ä¸ªå®˜æ–¹çš„ISOé•œåƒï¼Œè¿™é‡Œä½¿ç”¨ubuntu 20.04.6</p>
</li>
<li><p>ä½¿ç”¨xorrisoè§£å‹é•œåƒæ–‡ä»¶</p>
</li>
<li><p>é€šè¿‡unsquashå°†è§£å‹å‡ºæ¥çš„æ–‡ä»¶filesystem.squashfsè¿›è¡Œåç¼–è¯‘</p>
</li>
<li><p>é€šè¿‡chrootæ“ä½œè§£å‹å‡ºæ¥çš„filesystem.squashfsæ–‡ä»¶ç³»ç»Ÿï¼Œå¯¹åº”å®‰è£…åçš„ubuntuæ ¹ç›®å½•ï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œå°†squashfsæ–‡ä»¶é‡æ–°æ‰“åŒ…æˆfilesystem.squashfsæ–‡ä»¶ï¼Œæ”¾å…¥è§£å‹çš„é•œåƒç›®å½•ä¸­ã€‚</p>
</li>
<li><p>ubuntu20.04åŠå…¶ä¹‹åéƒ½ä½¿ç”¨cloud-initæ–¹å¼å®ç°è‡ªåŠ¨åŒ–å®‰è£…ï¼Œå°†è‡ªåŠ¨å®‰è£…å‚æ•°autoinstall ds&#x3D;nocloud;s&#x3D;&#x2F;cdrom&#x2F;cloud_init&#x2F;æ·»åŠ åˆ°isolinux&#x2F;txt.cfgæ–‡ä»¶ä¸­quietä¹‹å‰ï¼Œç„¶åå°†å¿…è¦çš„æ–‡ä»¶user-data, meta-dataå¤åˆ¶åˆ°åˆ¶å®šæ–‡ä»¶è·¯å¾„ &#x2F;cloud_initç›®å½•ä¸‹ã€‚åœ¨user-dataå’Œmeta-dataä¸­å³å¯å¼€å¯è‡ªåŠ¨å®‰è£…è®¾ç½®ï¼Œä¸è®¾ç½®å³èµ°é»˜è®¤çš„å®‰è£…è®¾ç½®ã€‚</p>
<ol>
<li><p>å®šåˆ¶ç½‘ç»œé…ç½® &#x2F;&#x2F; å·²å®Œæˆ</p>
</li>
<li><p>å‰ç½®èµ„æºæ£€æŸ¥ &#x2F;&#x2F; å¦‚ä½•å‘Šè¯‰ç”¨æˆ·ï¼Ÿ</p>
</li>
<li><p>å®šåˆ¶ç£ç›˜åˆ†åŒº &#x2F;&#x2F; å·²å®Œæˆ</p>
</li>
<li><p>å®šåˆ¶è¯­è¨€åŠé”®ç›˜ &#x2F;&#x2F; å·²å®Œæˆ</p>
</li>
<li><p>å®šåˆ¶ç”¨æˆ·åå¯†ç ã€ä¸»æœºå &#x2F;&#x2F; å·²å®Œæˆ</p>
</li>
<li><p>å®šåˆ¶é¢„è£…çš„è½¯ä»¶ï¼ˆssh server) &#x2F;&#x2F; å·²å®Œæˆ</p>
</li>
<li><p>å®šåˆ¶GRUBå¯†ç  &#x2F;&#x2F; å·²å®Œæˆ</p>
</li>
<li><p>ä¿®æ”¹grubèœå•é€‰é¡¹</p>
</li>
</ol>
</li>
<li><p>é•œåƒä¿®æ”¹å®Œæˆä¹‹åï¼Œé€šè¿‡xorrisoå†å°†æ–‡ä»¶æ‰“åŒ…æˆisoé•œåƒã€‚</p>
</li>
</ol>
<p><strong>user-dataæ–‡ä»¶é…ç½®</strong></p>
<p><strong>åˆ¶ä½œé•œåƒshellè„šæœ¬(å¤§æ¦‚æµç¨‹ï¼Œå®ç°ä¸æ­¤ä¸åŒ)</strong></p>
<p>å‚è€ƒèµ„æ–™</p>
<p><a target="_blank" rel="noopener" href="https://cloudinit.readthedocs.io/en/latest/reference/datasources/nocloud.html">ubuntu nocloud-initæ–‡æ¡£</a></p>
<p><a target="_blank" rel="noopener" href="https://netplan.readthedocs.io/en/stable/netplan-yaml/#properties-for-device-type-ethernets">ç½‘ç»œé…ç½®</a></p>
<p><a target="_blank" rel="noopener" href="https://curtin.readthedocs.io/en/latest/topics/storage.html#lvm-partition-command">curtinè®¾ç½®æ–‡ä»¶ç³»ç»Ÿåˆ†åŒº</a></p>
<p><a target="_blank" rel="noopener" href="https://www.gnu.org/software/grub/manual/grub/html_node/Authentication-and-authorisation.html">grubå¯†ç è®¾ç½®æ–‡æ¡£</a></p>
<p><a target="_blank" rel="noopener" href="https://michlstechblog.info/blog/linux-disable-assignment-of-new-names-for-network-interfaces/">ç½‘å¡åç§°å…¼å®¹</a></p>
<h4 id="5-2-2-æ‰©å®¹è„šæœ¬è¯¦ç»†è®¾è®¡"><a href="#5-2-2-æ‰©å®¹è„šæœ¬è¯¦ç»†è®¾è®¡" class="headerlink" title="5.2.2 æ‰©å®¹è„šæœ¬è¯¦ç»†è®¾è®¡"></a>5.2.2 æ‰©å®¹è„šæœ¬è¯¦ç»†è®¾è®¡</h4><p><strong>ç›®çš„</strong></p>
<p>é•œåƒäº¤ä»˜ä¸‹çš„ç£ç›˜æ˜¯å·²ç»åˆ†å¥½åŒºçš„ï¼Œæ˜¯ç¡®å®šçš„å¤§å°ï¼Œè€Œå®¢æˆ·æœ‰ä¸åŒçš„ç›®çš„ï¼Œéœ€è¦çš„ç£ç›˜ç©ºé—´æ˜¯ä¸ç¡®å®šçš„ã€‚è„šæœ¬çš„ç›®çš„æ˜¯è‡ªåŠ¨è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿçš„é…ç½®ï¼Œè·Ÿè¸ªç‰©ç†ç£ç›˜çš„å®¹é‡å˜åŒ–ï¼ˆåªå¢ä¸å‡ï¼‰ã€‚</p>
<h5 id="5-2-2-1-å¯é€‰æ–¹æ¡ˆ"><a href="#5-2-2-1-å¯é€‰æ–¹æ¡ˆ" class="headerlink" title="5.2.2.1 å¯é€‰æ–¹æ¡ˆ"></a>5.2.2.1 å¯é€‰æ–¹æ¡ˆ</h5><p><strong>æ–¹æ¡ˆä¸€ å•ç£ç›˜è®¾è®¡</strong></p>
<p>æ€è·¯: ç›‘æ§ç‰¹å®šçš„ç¡¬ç›˜&#x2F;dev&#x2F;sdaçš„ç‰©ç†å®¹é‡æ˜¯å¦å‘ç”Ÿå˜åŒ–, å˜åŒ–ååˆ™è°ƒæ•´æ•°æ®åˆ†åŒºå¤§å°</p>
<p>ç‰¹ç‚¹: é€‚ç”¨äºè™šæ‹ŸåŒ–ç¯å¢ƒå’Œå¸¦RAIDå¡çš„ç‰©ç†æœºç¯å¢ƒï¼Œåªèƒ½å…³æœºæ‰©å®¹ã€‚</p>
<p>è¦æ±‚: ä»¥è™šæ‹Ÿæœºä¸ºä¾‹, ç¼–è¾‘è™šæ‹Ÿæœºçš„ç£ç›˜é…ç½®,è°ƒå¤§ç£ç›˜å¤§å°å³å¯ã€‚ä»¥ç‰©ç†æœºä¸ºä¾‹ï¼Œæ’å…¥ä¸€å—æ–°çš„ç¡¬ç›˜ï¼Œç„¶ååœ¨BIOSé‡Œé¢è°ƒæ•´RAIDé…ç½®ã€‚</p>
<p><strong>æ–¹æ¡ˆäºŒ å¤šç£ç›˜è®¾è®¡</strong></p>
<p>æ€è·¯: ç›‘æ§æ–°å¢çš„ç£ç›˜ï¼Œå¦‚æœè¯†åˆ«åˆ°å¤šäº†ä¸€å—æ²¡ä½¿ç”¨çš„ç¡¬ç›˜ï¼Œåˆ™å°†å…¶å®¹é‡å¢åŠ åˆ°æ•°æ®åˆ†åŒº</p>
<p>ç‰¹ç‚¹ï¼šé€‚ç”¨äºè™šæ‹ŸåŒ–ç¯å¢ƒå’Œä¸å¸¦RAIDå¡ï¼ˆæˆ–è€…RAIDå¤„äºITæ¨¡å¼ï¼‰çš„ç‰©ç†æœºç¯å¢ƒï¼Œå¯ä»¥å¼€æœºæ‰©å®¹</p>
<p>è¦æ±‚ï¼šä»¥è™šæ‹Ÿæœºä¸ºä¾‹ï¼Œå¢åŠ ä¸€ä¸ªå—ä»»æ„å¤§å°çš„è™šæ‹Ÿç£ç›˜å³å¯ã€‚ä»¥ç‰©ç†æœºä¸ºä¾‹ï¼Œæ’å…¥ä¸€ä¸ªæ–°çš„ç¡¬ç›˜å³å¯ã€‚</p>
<p>æœ¬èŠ‚ä¸­ï¼Œå‡å®š<strong>æ–¹æ¡ˆäºŒ</strong>æ›´å¸¸è§ï¼Œå¹¶ä»¥æ­¤åšè¿›ä¸€æ­¥è®¾è®¡ã€‚</p>
<h5 id="5-2-2-2-æ£€æµ‹åŸç†"><a href="#5-2-2-2-æ£€æµ‹åŸç†" class="headerlink" title="5.2.2.2 æ£€æµ‹åŸç†"></a>5.2.2.2 æ£€æµ‹åŸç†</h5><p>è€ƒè™‘å…³æœºæ‰©å®¹ï¼Œé‚£ä¹ˆå‡è®¾æœ‰ä¸€ä¸ªè„šæœ¬ï¼Œå®ƒåœ¨å¼€æœºåæ‰§è¡Œ</p>
<p>åŸºäºå•ç£ç›˜æ–¹æ¡ˆï¼ˆ<strong>æ–¹æ¡ˆä¸€</strong>ï¼‰ï¼š</p>
<ol>
<li><p>å…³æœºï¼Œä¿®æ”¹ç¡¬ç›˜å¤§å°</p>
</li>
<li><p>ä½¿ç”¨pvresize è°ƒæ•´pvå¤§å°</p>
</li>
<li><p>ä½¿ç”¨lvextendæ‰©å®¹lvåˆ°å½“å‰vgå¤§å°</p>
</li>
<li><p>ä½¿ç”¨resize2fsè°ƒæ•´ext4åˆ†åŒºå¤§å°</p>
</li>
</ol>
<p>åŸºäºå¤šç£ç›˜æ–¹æ¡ˆï¼ˆ<strong>æ–¹æ¡ˆäºŒ</strong>ï¼‰ï¼š</p>
<p>éå†ç£ç›˜åˆ—è¡¨ï¼Œå¦‚æœå‘ç°æœ‰æ²¡æœ‰ç™»è®°è¿‡çš„ç£ç›˜ï¼Œåˆ™å°†å…¶æ·»åŠ åˆ°vgä¸­ï¼Œç„¶åå†è°ƒæ•´lv</p>
<p>æ‰‹åŠ¨æ“ä½œè¿‡ç¨‹ï¼š</p>
<ol>
<li><p>æ·»åŠ ä¸€å—ç£ç›˜</p>
</li>
<li><p>äººè‚‰åˆ¤æ–­å“ªä¸ªç›˜æ˜¯æ–°åŠ çš„ç›˜</p>
</li>
<li><p>ç”¨pvcreateå°†è¯¥ç›˜æ·»åŠ åˆ°pv</p>
</li>
<li><p>ç”¨vgextendå°†pvæ·»åŠ åˆ°vg</p>
</li>
<li><p>ç”¨lvextendå°†lvæ‰©å®¹åˆ°å½“å‰vgçš„å¤§å°</p>
</li>
<li><p>ç”¨resize2fså°†lvçš„å®¹é‡åº”ç”¨åˆ°ext4åˆ†åŒºå¤§å°</p>
</li>
</ol>
<p><img src="/../../../../home/xiaoy/media/image4.png" alt="å›¾æ ‡ æè¿°å·²è‡ªåŠ¨ç”Ÿæˆ"></p>
<h5 id="5-2-2-3-å¼€æœºè¿è¡Œå®ç°"><a href="#5-2-2-3-å¼€æœºè¿è¡Œå®ç°" class="headerlink" title="5.2.2.3 å¼€æœºè¿è¡Œå®ç°"></a>5.2.2.3 å¼€æœºè¿è¡Œå®ç°</h5><p>æ–¹æ¡ˆä¸€ï¼šsystemd</p>
<p>æ–¹æ¡ˆäºŒï¼šinit.d</p>
<p>æ–¹æ¡ˆäºŒåœ¨centosç³»ç»Ÿç”¨çš„æ¯”è¾ƒå¤šï¼Œæœ¬æ–‡é‡‡ç”¨çš„é¦–é€‰æ–¹æ¡ˆä¸ºæ–¹æ¡ˆä¸€</p>
<h4 id="5-2-3-æ‰“åŒ…æ¨¡å—è¯¦ç»†è®¾è®¡"><a href="#5-2-3-æ‰“åŒ…æ¨¡å—è¯¦ç»†è®¾è®¡" class="headerlink" title="5.2.3 æ‰“åŒ…æ¨¡å—è¯¦ç»†è®¾è®¡"></a>5.2.3 æ‰“åŒ…æ¨¡å—è¯¦ç»†è®¾è®¡</h4><h5 id="5-2-3-1-ISOé•œåƒæ‰“åŒ…æ–¹æ¡ˆ"><a href="#5-2-3-1-ISOé•œåƒæ‰“åŒ…æ–¹æ¡ˆ" class="headerlink" title="5.2.3.1 ISOé•œåƒæ‰“åŒ…æ–¹æ¡ˆ"></a>5.2.3.1 ISOé•œåƒæ‰“åŒ…æ–¹æ¡ˆ</h5><p>æ¦‚è¿°</p>
<p>åœ¨åŸºISOé•œåƒçš„åŸºç¡€ä¸Šï¼ŒæŒ‰ç…§æ€»æ§å®‰è£…çš„æµç¨‹ï¼Œå°†äºŒè¿›åˆ¶æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ã€ä¾èµ–çš„åº“æ‹·è´åˆ°å®‰è£…åçš„ç›®å½•ã€‚åŸºISOé•œåƒçš„åˆ¶ä½œä½¿ç”¨äº†cubicï¼Œä½†cubicæ˜¯ä¸€ä¸ªå›¾å½¢åŒ–å·¥å…·ï¼Œä¸åˆ©äºè‡ªåŠ¨åŒ–ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°å‘½ä»¤è¡Œå·¥å…·æ¥è¾¾æˆç›®çš„ã€‚</p>
<p>ç›¸å…³å·¥å…·</p>
<ul>
<li><p>xorriso ç”¨äºè§£åŒ…å’Œæ‰“åŒ…ISO</p>
</li>
<li><p>unsquashfs ç”¨äºå±•å¼€casperå‹ç¼©æ–‡ä»¶</p>
</li>
<li><p>mksquashfs ç”¨äºå°†æ–‡ä»¶ç³»ç»Ÿå‹ç¼©æˆcasper</p>
</li>
<li><p>fakeroot ç”¨äºå®ç°chrootï¼Œåˆ‡æ¢æ ¹ç›®å½•ï¼Œæ–¹ä¾¿è¿›è¡Œaptå®‰è£…ç­‰æ“ä½œ</p>
</li>
</ul>
<p>å…³é”®æ­¥éª¤å®ç°</p>
<ul>
<li><p>æ–‡ä»¶æ‹·è´</p>
</li>
<li><p>ç³»ç»Ÿåˆå§‹åŒ–</p>
</li>
</ul>
<p>ISOæŒ‚è½½</p>
<p>ISOè§£é™¤æŒ‚è½½</p>
<p>åˆ‡æ¢æ ¹ç›®å½•</p>
<h5 id="5-2-3-2-OVAé•œåƒæ‰“åŒ…æ–¹æ¡ˆ"><a href="#5-2-3-2-OVAé•œåƒæ‰“åŒ…æ–¹æ¡ˆ" class="headerlink" title="5.2.3.2 OVAé•œåƒæ‰“åŒ…æ–¹æ¡ˆ"></a>5.2.3.2 OVAé•œåƒæ‰“åŒ…æ–¹æ¡ˆ</h5><p><img src="/../../../../home/xiaoy/media/image5.png" alt="å›¾æ ‡ æè¿°å·²è‡ªåŠ¨ç”Ÿæˆ"></p>
<p>å¦‚å›¾ï¼Œå¦‚æœé‡‡ç”¨å®˜æ–¹ISOé•œåƒæ¥åˆ¶ä½œOVAï¼Œé‚£ä¹ˆåˆ¶ä½œå‡ºæ¥çš„æ˜¯åŸºOVAé•œåƒï¼Œå®ƒéœ€è¦ä¸€æ¬¡åˆ¶ä½œï¼Œä¸æ–­æ›´æ–°ã€‚åœ¨æ— æ³•å®ç°åˆ¶ä½œçŸ³çŠ€ISOçš„èƒŒæ™¯ä¸‹ï¼Œæ˜¯æ¯”è¾ƒåˆé€‚çš„è·¯ã€‚</p>
<p>æ— è®ºå‰é¢çš„æ–¹æ¡ˆå¦‚ä½•ï¼Œæœ€ç»ˆåˆ¶ä½œOVAæ—¶ï¼Œéƒ½éœ€è¦ä¸€ä¸ªVMDKæ–‡ä»¶ï¼ˆè™šæ‹Ÿç£ç›˜æ–‡ä»¶ï¼‰ï¼Œè¿™ä¸ªæ–‡ä»¶çš„åˆ›å»ºæœ‰ä¸¤æ¡è·¯èµ°ï¼Œä¸€æ¡æ˜¯ä½¿ç”¨vmwareæ¥æ“ä½œä¸€éå®‰è£…æµç¨‹ï¼Œä¸€æ¡æ˜¯ç”¨å‘½ä»¤åˆ›å»ºä¸€ä¸ªç©ºçš„vmdkæ–‡ä»¶ï¼Œå¹¶é€šè¿‡æŸç§æ–¹å¼æŒ‚è½½åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç„¶åé€šè¿‡æŸç§æ–¹å¼æ¥å°†ç³»ç»Ÿå®‰è£…åˆ°vmdkä¸Šã€‚ å‰è€…å®ç°ç®€å•ï¼Œä½†æ˜¯å­˜åœ¨éš¾ä»¥è‡ªåŠ¨åŒ–çš„é—®é¢˜ï¼Œåè€…å®ç°ä¸ç¡®å®šæ€§æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯æ˜¯ç†è®ºä¸Šå¯ä»¥è‡ªåŠ¨åŒ–çš„æ–¹æ¡ˆã€‚</p>
<p>ç»¼åˆå¤šæ–¹è€ƒè™‘ï¼Œå–ä¸¤ç§æ–¹æ¡ˆï¼Œåˆ†åˆ«ä¸ºå›¾ä¸­è“è‰²å’Œç»¿è‰²ä¸¤ç§ã€‚ç»¿è‰²æ˜¯æ¯”è¾ƒç†æƒ³çš„æƒ…å†µï¼Œå®ƒæ„å‘³ç€ISOé•œåƒçš„æ–¹æ¡ˆæ¯”è¾ƒæˆç†Ÿï¼Œå¯ä»¥å¾ˆå¥½çš„æ”¯æ’‘å…¶ä»–ç±»å‹é•œåƒçš„åˆ¶ä½œã€‚è“è‰²æ˜¯å¦¥åçš„æƒ…å†µï¼Œè¿™é‡Œç€é‡è¯´ä¸€ä¸‹ã€‚</p>
<p>è“è‰²çš„åˆ¶ä½œæ­¥éª¤ä¸ºï¼š</p>
<ol>
<li><p>è·å–å®˜æ–¹ISOé•œåƒ</p>
</li>
<li><p>æ‰‹å·¥æ“ä½œvmwareï¼Œåˆ›å»ºè™šæ‹Ÿæœºï¼Œç„¶åå®‰è£…è¯¥é•œåƒ</p>
</li>
<li><p>å®‰è£…å®Œæˆåï¼Œä¸è¦é‡å¯ï¼Œç›´æ¥å…³æœºï¼Œé¿å…è¿›å…¥ç³»ç»Ÿ</p>
</li>
<li><p>æ­¤æ—¶å¾—åˆ°çš„vmdkå¯ä»¥è®¤ä¸ºæ˜¯åŸºOVAï¼Œä¸‹é¢æ­¥éª¤è¦å®ç°è‡ªåŠ¨åŒ–ï¼Œå¦åˆ™å…¨æ‰‹æ“æ•ˆç‡æä½</p>
</li>
<li><p>å°†åŸºOVAæ‹·è´ï¼ŒæŒ‚è½½åˆ°å…¶ä»–ç³»ç»Ÿ</p>
<ol>
<li><p>ovftoolå°†ovaé‡Œçš„vmdkè½¬åŒ–ä¸ºå¯è¯»å†™çš„vmdk</p>
</li>
<li><p>guestmountæŒ‚è½½vmdké‡Œçš„æ–‡ä»¶ç³»ç»Ÿåˆ°æŸä¸ªç›®å½•</p>
</li>
</ol>
</li>
<li><p>å°†ä¸€äº›å®šåˆ¶åŒ–çš„å†…å®¹æ”¾åˆ°è¯¥ç£ç›˜ä¸­ï¼ˆè¿™ä¸€æ­¥å¯ä»¥å‰ç§»åˆ°åŸºé•œåƒï¼‰</p>
</li>
<li><p>å°†æ€»æ§å®‰è£…åˆ°è¯¥ç£ç›˜ä¸­</p>
<ol>
<li><p>æ–‡ä»¶æ ¡éªŒ</p>
</li>
<li><p>æ‹·è´äºŒè¿›åˆ¶ã€é…ç½®åˆ°&#x2F;$æŒ‚è½½ç›®å½•&#x2F;opt&#x2F;xxxï¼ˆä¸å«systemd)</p>
</li>
<li><p>æ‹·è´systemdé…ç½®åˆ°&#x2F;$æŒ‚è½½ç›®å½•&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;</p>
</li>
<li><p>chroot + ä¾èµ–å®‰è£… + æ·»åŠ è‡ªå¯åŠ¨</p>
</li>
<li><p>åˆå§‹åŒ–mysql,mongo</p>
</li>
</ol>
</li>
<li><p>è§£é™¤æŒ‚è½½ï¼Œå°†vmdkå’Œovfå°è£…æˆova</p>
</li>
</ol>
<p>ç›¸å…³å·¥å…·</p>
<ul>
<li><p>guestmount</p>
</li>
<li><p>ovftool</p>
</li>
</ul>
<p>ovftoolè§£åŒ…</p>
<p>ovftoolæ‰“åŒ…</p>
<p>OVAæŒ‚è½½</p>
<p>OVAè§£é™¤æŒ‚è½½</p>
<p>å‚è€ƒèµ„æ–™</p>
<p><a target="_blank" rel="noopener" href="https://dev.to/otomato_io/how-to-create-custom-debian-based-iso-4g37">How to Create Custom Debian BasedISO - DEV Community</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/covertsh/ubuntu-autoinstall-generator/blob/main/ubuntu-autoinstall-generator.sh">https://github.com/covertsh/ubuntu-autoinstall-generator/blob/main/ubuntu-autoinstall-generator.sh</a></p>
<p><a target="_blank" rel="noopener" href="http://zenki2001cn.github.io/Wiki/Debian/iso%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6%E5%88%B6%E4%BD%9C.html">isoé•œåƒæ–‡ä»¶åˆ¶ä½œ</a></p>
<h5 id="5-2-3-3-main-shè„šæœ¬è®¾è®¡"><a href="#5-2-3-3-main-shè„šæœ¬è®¾è®¡" class="headerlink" title="5.2.3.3 main.shè„šæœ¬è®¾è®¡"></a>5.2.3.3 main.shè„šæœ¬è®¾è®¡</h5><p>å•çº¯çš„æ–‡ä»¶æ‹·è´ï¼Œå¯ä»¥ç”±main.shçš„å„ä¸ªå‡½æ•°å®Œæˆï¼Œè€Œæœ‰äº›éœ€è¦åœ¨åˆ‡æ¢rootåæ‰§è¡Œçš„å‘½ä»¤ï¼Œåˆ™ä½œä¸ºå•ç‹¬çš„æ–‡ä»¶ï¼Œåœ¨guest-installç›®å½•ç®¡ç†ï¼Œå°†å…¶æ‹·è´åˆ°æŒ‚è½½è·¯å¾„åï¼Œåœ¨åˆ‡æ¢rootåæ‰§è¡Œå¯¹åº”çš„è„šæœ¬</p>
<p><img src="/../../../../home/xiaoy/media/image6.png" alt="å›¾æ ‡ æè¿°å·²è‡ªåŠ¨ç”Ÿæˆ"></p>
<h5 id="5-2-3-4-Makefileè®¾è®¡"><a href="#5-2-3-4-Makefileè®¾è®¡" class="headerlink" title="5.2.3.4 Makefileè®¾è®¡"></a>5.2.3.4 Makefileè®¾è®¡</h5><p>è°ƒç”¨<a target="_blank" rel="noopener" href="http://main.sh/">main.sh</a> ä¼ é€’è§£å‹åçš„æ€»æ§åŒ…ï¼ŒåŸºé•œåƒï¼Œä»¥åŠç›®æ ‡é•œåƒä½œä¸ºå‚æ•° ã€‚ç›®æ ‡é•œåƒå°±æ˜¯ä¸åŒçš„target</p>
<p><strong>targetä¾èµ–å…³ç³»å›¾</strong></p>
<ul>
<li><p>ubuntu-iso-20-officialæ˜¯å®˜æ–¹é•œåƒï¼Œä½¿ç”¨Ubuntu 20.04.6</p>
</li>
<li><p>srhino-packageæ˜¯æ‰“åŒ…å¹³å°å‡ºçš„tar.gzåŒ…</p>
</li>
</ul>
<p>çº¢è‰²éƒ¨åˆ†æ˜¯è¯†åˆ«åˆ°çš„éš¾ä»¥è‡ªåŠ¨åŒ–çš„æ­¥éª¤ï¼Œæ•…è€Œubuntu-ova-m1è¿™ä¸ªåˆ†æ”¯å½“å‰ä¸å…·æœ‰å¯è¡Œæ€§ï¼Œå¯¼è‡´æ•´ä¸ªisoåˆ†æ”¯æš‚æ—¶å¤±å»äº†ä»·å€¼ã€‚ç›®å‰è®¡åˆ’ä»…å®ç°ç»¿è‰²è·¯å¾„çš„target</p>
<p><img src="/../../../../home/xiaoy/media/image7.png" alt="å›¾æ ‡ æè¿°å·²è‡ªåŠ¨ç”Ÿæˆ"></p>
<h4 id="5-2-4-ç£ç›˜åˆ†åŒºè¯¦ç»†è®¾è®¡"><a href="#5-2-4-ç£ç›˜åˆ†åŒºè¯¦ç»†è®¾è®¡" class="headerlink" title="5.2.4 ç£ç›˜åˆ†åŒºè¯¦ç»†è®¾è®¡"></a>5.2.4 ç£ç›˜åˆ†åŒºè¯¦ç»†è®¾è®¡</h4><h5 id="5-2-4-1-åˆå§‹åˆ†åŒºå¤§å°è§„åˆ’"><a href="#5-2-4-1-åˆå§‹åˆ†åŒºå¤§å°è§„åˆ’" class="headerlink" title="5.2.4.1 åˆå§‹åˆ†åŒºå¤§å°è§„åˆ’"></a>5.2.4.1 åˆå§‹åˆ†åŒºå¤§å°è§„åˆ’</h5><p>[TABLE]</p>
<h5 id="5-2-4-2-LVMè®¾è®¡"><a href="#5-2-4-2-LVMè®¾è®¡" class="headerlink" title="5.2.4.2. LVMè®¾è®¡"></a>5.2.4.2. LVMè®¾è®¡</h5><p>å°†ç³»ç»Ÿç›˜åˆ†ä¸º3ä¸ªVG+1ä¸ªæ™®é€šåˆ†åŒºï¼Œæ™®é€šåˆ†åŒºæ˜¯&#x2F;bootåˆ†åŒºï¼Œä½¿ç”¨ext3æˆ–ext4æ–‡ä»¶ç³»ç»Ÿ</p>
<p>3ä¸ªVGåˆ†åˆ«å’Œ5.2.4.1ä¸­æè¿°çš„åˆ†åŒºå¤§å°ä¸€ä¸€å¯¹åº”ï¼Œæ¯ä¸ªVGåˆ’åˆ†ä¸€ä¸ªLV</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>VG(å·ç»„)</td>
<td>PV(ç‰©ç†å·)</td>
<td>Size</td>
</tr>
<tr>
<td>vg_root</td>
<td>&#x2F;dev&#x2F;sdaX</td>
<td>28G</td>
</tr>
<tr>
<td>vg_app</td>
<td>&#x2F;dev&#x2F;sdaX</td>
<td>10G</td>
</tr>
<tr>
<td>vg_data</td>
<td>&#x2F;dev&#x2F;sdaX &#x2F;dev&#x2F;sdbX â€¦</td>
<td>60G+n</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>LV(é€»è¾‘å·)</td>
<td>VG(å·ç»„)</td>
</tr>
<tr>
<td>lv_root</td>
<td>vg_root</td>
</tr>
<tr>
<td>lv_app</td>
<td>vg_app</td>
</tr>
<tr>
<td>lv_data</td>
<td>vg_data</td>
</tr>
</tbody></table>
<h5 id="5-2-4-3-è½¯é“¾æ¥"><a href="#5-2-4-3-è½¯é“¾æ¥" class="headerlink" title="5.2.4.3. è½¯é“¾æ¥"></a>5.2.4.3. è½¯é“¾æ¥</h5><p>åœ¨å½“å‰ç‰ˆæœ¬çš„é•œåƒé‡Œé¢ï¼Œåˆ›å»ºå¥½ä»¥ä¸‹çš„è½¯è¿æ¥ï¼Œå°†å ç”¨ç©ºé—´æ¯”è¾ƒå¤§çš„ï¼Œä¸”éå›ºå®šå¤§å°çš„ç›®å½•éƒ½é“¾æ¥åˆ°æ•°æ®åˆ†åŒºï¼Œå¦‚ï¼šæ•°æ®åº“æ–‡ä»¶ã€ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ã€‚</p>
<p>è½¯è¿æ¥ç›®å‰ä»…ç”¨äºå…¼å®¹åŸæœ‰è®¾è®¡ï¼Œåç»­éœ€è¦å°†å„ä¸ªç¨‹åºçš„è·¯å¾„æ”¹ä¸ºç›®çš„åœ°æ‰€åœ¨çš„è·¯å¾„</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>è½¯é“¾æ¥</td>
<td>ç›®çš„åœ°</td>
<td>è¯´æ˜</td>
</tr>
<tr>
<td>&#x2F;opt&#x2F;mongodb&#x2F;data</td>
<td>&#x2F;data&#x2F;mongodb&#x2F;data</td>
<td>mongodbæ•°æ®å­˜å‚¨ç›®å½•</td>
</tr>
<tr>
<td><del>&#x2F;opt&#x2F;mongodb&#x2F;log&#x2F;</del></td>
<td><del>&#x2F;data&#x2F;mongodb&#x2F;log</del></td>
<td><del>mongoæ—¥å¿—ï¼ˆæœ‰è½®è½¬ï¼‰</del></td>
</tr>
<tr>
<td>&#x2F;opt&#x2F;etcd&#x2F;data</td>
<td>&#x2F;data&#x2F;etcd&#x2F;data</td>
<td>etcdæ•°æ®</td>
</tr>
<tr>
<td>&#x2F;opt&#x2F;etcd&#x2F;wal</td>
<td>&#x2F;data&#x2F;etcd&#x2F;wal</td>
<td>etcdé¢„å†™</td>
</tr>
<tr>
<td>&#x2F;opt&#x2F;nsq&#x2F;data</td>
<td>&#x2F;data&#x2F;nsq&#x2F;data</td>
<td>mqæ•°æ®</td>
</tr>
<tr>
<td>&#x2F;opt&#x2F;redis&#x2F;data</td>
<td>&#x2F;data&#x2F;redis&#x2F;data</td>
<td>redisæ•°æ®</td>
</tr>
<tr>
<td>&#x2F;opt&#x2F;sv&#x2F;cache</td>
<td>&#x2F;data&#x2F;sv&#x2F;cache</td>
<td>å¯è§†åŒ–æ•°æ®</td>
</tr>
<tr>
<td>&#x2F;opt&#x2F;mysql&#x2F;data</td>
<td>&#x2F;data&#x2F;mysql&#x2F;data</td>
<td>mysqlæ•°æ®</td>
</tr>
<tr>
<td>&#x2F;opt&#x2F;repo</td>
<td>&#x2F;data&#x2F;repo</td>
<td>æ’ä»¶åŒ…&#x2F;åŸå§‹åŒ…</td>
</tr>
<tr>
<td>&#x2F;opt&#x2F;sc&#x2F;data</td>
<td>&#x2F;data&#x2F;sc&#x2F;data</td>
<td>å¤‡ä»½ç›®å½•</td>
</tr>
<tr>
<td>&#x2F;opt&#x2F;data</td>
<td>&#x2F;data&#x2F;installer&#x2F;data</td>
<td>å¼•æ“çš„è¯ä¹¦</td>
</tr>
<tr>
<td>&#x2F;opt&#x2F;installer&#x2F;data</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&#x2F;opt&#x2F;os&#x2F;data</td>
<td>&#x2F;data&#x2F;os&#x2F;data</td>
<td>ç³»ç»Ÿå®šåˆ¶ç¨‹åºçš„æ•°æ®</td>
</tr>
</tbody></table>
<h5 id="5-2-4-4-OEMåˆ†åŒºæ–‡ä»¶"><a href="#5-2-4-4-OEMåˆ†åŒºæ–‡ä»¶" class="headerlink" title="5.2.4.4. OEMåˆ†åŒºæ–‡ä»¶"></a>5.2.4.4. OEMåˆ†åŒºæ–‡ä»¶</h5><p>æ–‡ä»¶æ ¼å¼ä¸ºINIæ ¼å¼</p>
<p>ä½äº&#x2F;oem&#x2F;infoï¼Œæƒé™è®¾è®¡ä¸ºrwâ€”â€”-</p>
<p>æ–‡ä»¶å†…å®¹çš„ç®¡ç†ç›®å‰ä¸ºæ‰‹åŠ¨æ›´æ–°ï¼Œå…¶æ‰˜ç®¡åœ¨gitä¸Šï¼Œé›†æˆåˆ°åŸºé•œåƒä¸­</p>
<p>æ³¨ï¼šå…³äºSPç‰ˆæœ¬ï¼ŒåŸè®¾è®¡æ˜¯ä¸“æ³¨äºç³»ç»Ÿå†…éƒ¨ç¨‹åºè¡¥ä¸ç‰ˆæœ¬ï¼Œç°åœ¨æ—¢ç„¶æŠŠTUIå’Œæ‰©å®¹é›†æˆè¿›æ¥ï¼Œæœªæ¥SPç‰ˆæœ¬ä¹Ÿä¼šå—åˆ°TUIå’Œæ‰©å®¹è„šæœ¬çš„ç‰ˆæœ¬å½±å“ã€‚</p>
<h4 id="5-2-5-é¢„å¤„ç†è„šæœ¬è¯¦ç»†è®¾è®¡"><a href="#5-2-5-é¢„å¤„ç†è„šæœ¬è¯¦ç»†è®¾è®¡" class="headerlink" title="5.2.5 é¢„å¤„ç†è„šæœ¬è¯¦ç»†è®¾è®¡"></a>5.2.5 é¢„å¤„ç†è„šæœ¬è¯¦ç»†è®¾è®¡</h4><p>å½“å‰æ€»æ§æ‰“å‡ºçš„åŒ…æ„Ÿè§‰æ ¼å¼ä¸ç»Ÿä¸€ï¼Œåœ¨ç»Ÿä¸€è§„èŒƒæœªå®ç°ä¹‹å‰ï¼Œæœ¬é¡¹ç›®é€šè¿‡ä¸€ä¸ªè„šæœ¬æ¥ä¿®æ­£ä¸€äº›ä¸åˆç†çš„æ–‡ä»¶ã€é…ç½®ã€å¸ƒå±€ã€‚é•œåƒåˆ¶ä½œç¨‹åºä¼šæŒ‰ç…§é¢„å¤„ç†åçš„æ ¼å¼è¿›è¡Œç¼–ç ï¼Œä¸ºäº†ä¸å‡ºç°ç»´æŠ¤é—®é¢˜ï¼Œä»¥åçš„æ‰“åŒ…è„šæœ¬åº”è¯¥æ»¡è¶³ä¸‹é¢çš„è§„èŒƒï¼Œæ»¡è¶³åé€šçŸ¥é•œåƒè¿™è¾¹ï¼Œé•œåƒè¿™è¾¹å†ç§»é™¤ç›¸åº”çš„é€»è¾‘ã€‚</p>
<h5 id="5-2-5-1-ç»Ÿä¸€systemdæ–‡ä»¶"><a href="#5-2-5-1-ç»Ÿä¸€systemdæ–‡ä»¶" class="headerlink" title="5.2.5.1 ç»Ÿä¸€systemdæ–‡ä»¶"></a>5.2.5.1 ç»Ÿä¸€systemdæ–‡ä»¶</h5><p><strong>åŸåˆ™ï¼š</strong></p>
<ul>
<li><p>åœ¨æ€»æ§é€šè¿‡systemdæ‰˜ç®¡çš„ç¨‹åºï¼Œå…¶serviceæ–‡ä»¶éƒ½è¦æ”¾åˆ°systemdå­ç›®å½•ä¸‹</p>
</li>
<li><p>serviceæ–‡ä»¶å¿…é¡»æ˜¯LFæ¢è¡Œç¬¦</p>
</li>
</ul>
<p><strong>å½“å‰å®ç°ï¼š</strong></p>
<ul>
<li><p>api-gov&#x2F;hack&#x2F;*.service -&gt; api-gov&#x2F;systemd&#x2F;</p>
</li>
<li><p>sv&#x2F;hack&#x2F;sv.service -&gt; sv&#x2F;systemd&#x2F;sv.service</p>
</li>
<li><p>å°†nsq&#x2F;systemd&#x2F;nsqlookupd.serviceçš„æ¢è¡Œç¬¦æ”¹ä¸ºLF</p>
</li>
</ul>
<h5 id="5-2-5-2-ç»Ÿä¸€é…ç½®æ–‡ä»¶å±‚çº§"><a href="#5-2-5-2-ç»Ÿä¸€é…ç½®æ–‡ä»¶å±‚çº§" class="headerlink" title="5.2.5.2 ç»Ÿä¸€é…ç½®æ–‡ä»¶å±‚çº§"></a>5.2.5.2 ç»Ÿä¸€é…ç½®æ–‡ä»¶å±‚çº§</h5><p><strong>åŸåˆ™ï¼š</strong></p>
<ul>
<li><p>åœ¨æ€»æ§è¿è¡Œçš„ç¨‹åºï¼Œå…¶é…ç½®æ–‡ä»¶åœ¨configå­ç›®å½•ä¸‹</p>
</li>
<li><p>èŒè´£åˆ†æ˜ï¼Œä¾èµ–çš„å¤„ç†åº”è¯¥ç”±å®‰è£…&#x2F;å‡çº§é˜¶æ®µè§£å†³</p>
</li>
</ul>
<p><strong>å½“å‰å®ç°ï¼š</strong></p>
<ul>
<li><p>åˆ é™¤mysql&#x2F;templateç›®å½•</p>
</li>
<li><p>ç§»é™¤mysqld.serviceçš„`ExecStartPre&#x3D;&#x2F;opt&#x2F;mysql&#x2F;bin&#x2F;mysql-systemd-start pre`</p>
</li>
<li><p>åˆ é™¤etcd&#x2F;workç›®å½•</p>
</li>
<li><p>ä¿®æ”¹etcd.serviceçš„`EnvironmentFile&#x3D;&#x2F;opt&#x2F;etcd&#x2F;config&#x2F;etcd.conf`PI</p>
</li>
<li><p>å°†redis&#x2F;etcæ”¹ä¸ºredis&#x2F;confg</p>
</li>
<li><p>ä¿®æ”¹redis.serviceçš„`ExecStart&#x3D;&#x2F;opt&#x2F;redis&#x2F;bin&#x2F;redis-server &#x2F;opt&#x2F;redis&#x2F;config&#x2F;redis-stack.conf`</p>
</li>
<li><p>&#x2F;etc&#x2F;mysql&#x2F;my.cnfä»æ‹·è´æ”¹ä¸ºåˆ›å»ºé“¾æ¥åˆ°&#x2F;opt&#x2F;mysql&#x2F;config&#x2F;my.cnf</p>
</li>
</ul>
<p><strong>æš‚æ—¶ä»…é™äºé•œåƒï¼š</strong></p>
<p>æœ‰äº›ä¸œè¥¿æš‚æ—¶è¦æ±‚ä¸äº†ï¼Œä»…æ”¾é•œåƒè¿™è¾¹ï¼Œåé¢å†çœ‹æƒ…å†µ(2023-11-23)</p>
<ul>
<li><p>åˆ é™¤mongod.serviceçš„`ExecStartPre&#x3D;ln -sf â€¦â€¦..`</p>
</li>
<li><p>åˆ é™¤mongod.serviceçš„`Environment&#x3D;â€LD_LIBRARY_PATH&#x3D;â€¦`</p>
</li>
</ul>
<h5 id="5-2-5-3-ç»Ÿä¸€dataç›®å½•"><a href="#5-2-5-3-ç»Ÿä¸€dataç›®å½•" class="headerlink" title="5.2.5.3 ç»Ÿä¸€dataç›®å½•"></a>5.2.5.3 ç»Ÿä¸€dataç›®å½•</h5><p>TODO</p>
<h3 id="5-3-åŠŸèƒ½å®ç°"><a href="#5-3-åŠŸèƒ½å®ç°" class="headerlink" title="5.3 åŠŸèƒ½å®ç°"></a>5.3 åŠŸèƒ½å®ç°</h3><h4 id="5-3-1-é•œåƒåˆ¶ä½œç›¸å…³å®ç°"><a href="#5-3-1-é•œåƒåˆ¶ä½œç›¸å…³å®ç°" class="headerlink" title="5.3.1 é•œåƒåˆ¶ä½œç›¸å…³å®ç°"></a>5.3.1 é•œåƒåˆ¶ä½œç›¸å…³å®ç°</h4><h5 id="5-3-1-1-ç³»ç»Ÿå®šåˆ¶ç›¸å…³è¯´æ˜"><a href="#5-3-1-1-ç³»ç»Ÿå®šåˆ¶ç›¸å…³è¯´æ˜" class="headerlink" title="5.3.1.1 ç³»ç»Ÿå®šåˆ¶ç›¸å…³è¯´æ˜"></a>5.3.1.1 ç³»ç»Ÿå®šåˆ¶ç›¸å…³è¯´æ˜</h5><ul>
<li>rootç”¨æˆ·å¯†ç è®¾ç½®</li>
</ul>
<p>cloud-initä¸æ”¯æŒç›´æ¥ä½¿ç”¨åœ¨identityä¸­è®¾ç½®çš„rootç”¨æˆ·ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹rootç”¨æˆ·çš„ç›¸å…³æƒé™</p>
<p>é¦–å…ˆè§£é”rootç”¨æˆ·åï¼Œè®¾ç½®ç›¸å…³å¯†ç </p>
<p>å¯†ç ä½¿ç”¨openssl passwd -6 -stdin &lt;&lt;&lt; 123.comç”Ÿæˆ</p>
<ul>
<li>å…³é—­swapæ–‡ä»¶</li>
</ul>
<p>&nbsp;</p>
<ul>
<li>å…³é—­ç¬¬ä¸€æ¬¡å¼€æœºsshinitä¿¡æ¯</li>
</ul>
<p>&nbsp;</p>
<ul>
<li>ç¦ç”¨ç³»ç»Ÿè‡ªåŠ¨æ›´æ–°</li>
</ul>
<h5 id="5-3-1-2-grubå®šåˆ¶ç›¸å…³è¯´æ˜"><a href="#5-3-1-2-grubå®šåˆ¶ç›¸å…³è¯´æ˜" class="headerlink" title="5.3.1.2 grubå®šåˆ¶ç›¸å…³è¯´æ˜"></a>5.3.1.2 grubå®šåˆ¶ç›¸å…³è¯´æ˜</h5><ul>
<li>è®¾ç½®é‡å¯åè¿›å…¥grubç•Œé¢</li>
</ul>
<p>é€šè¿‡è®¾ç½®grubèœå•é€‰æ‹©è¶…æ—¶æ—¶é—´ï¼Œé‡å¯é»˜è®¤è¿›å…¥grubï¼Œå³ä½¿æ²¡æœ‰å¤šä¸ªå¯åŠ¨é€‰é¡¹</p>
<ul>
<li>å¼€å¯grubèœå•ç¼–è¾‘å¯†ç ä¿æŠ¤</li>
</ul>
<p>&nbsp;</p>
<ul>
<li>ä¿®æ”¹grubèœå•æ˜¾ç¤ºæ ·å¼</li>
</ul>
<h5 id="5-3-1-3-å†…æ ¸å¯åŠ¨å‚æ•°å®šåˆ¶è¯´æ˜"><a href="#5-3-1-3-å†…æ ¸å¯åŠ¨å‚æ•°å®šåˆ¶è¯´æ˜" class="headerlink" title="5.3.1.3 å†…æ ¸å¯åŠ¨å‚æ•°å®šåˆ¶è¯´æ˜"></a>5.3.1.3 å†…æ ¸å¯åŠ¨å‚æ•°å®šåˆ¶è¯´æ˜</h5><ul>
<li>è®¾ç½®ç½‘å¡é»˜è®¤åç§°</li>
</ul>
<p>ç½‘å¡åç§°é€šå¸¸åˆ†ä¸ºä¸¤ç±»(enå“å’Œeth)ï¼Œè¿™é‡Œå…¨éƒ¨é»˜è®¤ä¸ºeth0</p>
<h5 id="5-3-1-4-ç¦»çº¿aptä»“åº“åˆ¶ä½œ"><a href="#5-3-1-4-ç¦»çº¿aptä»“åº“åˆ¶ä½œ" class="headerlink" title="5.3.1.4 ç¦»çº¿aptä»“åº“åˆ¶ä½œ"></a>5.3.1.4 ç¦»çº¿aptä»“åº“åˆ¶ä½œ</h5><ol>
<li><p>ç”Ÿæˆgpgå¯†é’¥ï¼Œç”¨äºç¦»çº¿aptä»“åº“çš„ç­¾åã€‚</p>
</li>
<li><p>åˆ¶ä½œç¦»çº¿ä»“åº“åŒ…</p>
</li>
<li><p>åŸºç¡€é•œåƒæ·»åŠ ç¦»çº¿æº</p>
</li>
<li><p>ä½¿ç”¨echoè¾“å…¥å¯†ç </p>
</li>
<li><p>æ‰“åŒ…debä¾èµ–åˆ°ç¦»çº¿ä»“åº“</p>
</li>
</ol>
<h5 id="5-3-1-5-å®¹å™¨åˆå§‹åŒ–æ•°æ®åº“"><a href="#5-3-1-5-å®¹å™¨åˆå§‹åŒ–æ•°æ®åº“" class="headerlink" title="5.3.1.5 å®¹å™¨åˆå§‹åŒ–æ•°æ®åº“"></a>5.3.1.5 å®¹å™¨åˆå§‹åŒ–æ•°æ®åº“</h5><ol>
<li>åˆ©ç”¨dockerå®ç°</li>
</ol>
<p>éœ€è¦ç¼–å†™dockerFile å°†æ–‡ä»¶æ˜ å°„åˆ°dockerä¸­ï¼Œåˆ©ç”¨dockerä¸­çš„åº”ç”¨è¿è¡Œæ¥åˆå§‹åŒ–ç›¸å…³æ•°æ®æ–‡ä»¶ã€‚ä¼˜ç‚¹: ä¸éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ç›¸å…³ç³»ç»Ÿèµ„æºã€‚ç¼ºç‚¹ï¼šæ‰“åŒ…éœ€è¦å¼•å…¥dockerç»„ä»¶ï¼Œå’Œä¸€ä¸ªdockerFileæ–‡ä»¶ã€‚</p>
<ol start="2">
<li>åˆ©ç”¨linuxè‡ªå¸¦çš„å‘½åç©ºé—´å®ç°</li>
</ol>
<p>é€šè¿‡unshareæ¥éš”ç¦»ä¸»æœºä¸­çš„å„ä¸ªå‘½åç©ºé—´å®ç°èµ„æºéš”ç¦»ï¼Œä¸ºdockerçš„å®ç°åŸç†ï¼Œä½†æ˜¯éœ€è¦æ‰‹åŠ¨ç®¡ç†ç›¸å…³çš„éš”ç¦»èµ„æºã€‚ä¼˜ç‚¹ï¼šä¸éœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œç›´æ¥åœ¨squashfsæ–‡ä»¶ä¸­è¿è¡Œï¼Œä¸éœ€è¦åšæ•°æ®æ–‡ä»¶æ‹·è´ã€‚ç¼ºç‚¹ï¼šåœ¨ä½¿ç”¨ä¸Šå¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜éœ€è¦æ‰‹åŠ¨è§£å†³ã€‚</p>
<ol start="3">
<li>ä½¿ç”¨systemd-nspawnå®ç°</li>
</ol>
<p>æš‚æœªè°ƒç ”</p>
<h5 id="5-3-1-6-å…³é—­cloud-initæœåŠ¡çš„sshè¾“å‡º"><a href="#5-3-1-6-å…³é—­cloud-initæœåŠ¡çš„sshè¾“å‡º" class="headerlink" title="5.3.1.6 å…³é—­cloud-initæœåŠ¡çš„sshè¾“å‡º"></a>5.3.1.6 å…³é—­cloud-initæœåŠ¡çš„sshè¾“å‡º</h5><h5 id="5-3-1-7-ç³»ç»Ÿå¯åŠ¨ä¿¡æ¯è¾“å‡ºæœåŠ¡"><a href="#5-3-1-7-ç³»ç»Ÿå¯åŠ¨ä¿¡æ¯è¾“å‡ºæœåŠ¡" class="headerlink" title="5.3.1.7 ç³»ç»Ÿå¯åŠ¨ä¿¡æ¯è¾“å‡ºæœåŠ¡"></a>5.3.1.7 ç³»ç»Ÿå¯åŠ¨ä¿¡æ¯è¾“å‡ºæœåŠ¡</h5><p>ç³»ç»Ÿå¯åŠ¨ä¿¡æ¯è¾“å‡ºæ˜¯æ“ä½œç³»ç»Ÿå¼€æœºæ—¶è¾“å‡ºçš„ç³»ç»Ÿç›¸å…³çš„ä¿¡æ¯ï¼Œä¸»è¦ä¸ºç”¨æˆ·äº†è§£å½“å‰çš„å¼€æœºæƒ…å†µï¼Œå…¶ä¸­åŒ…å«ç³»ç»ŸåŸºç¡€ä¿¡æ¯è¾“å‡ºï¼Œä»¥åŠçŸ³çŠ€ç»„ä»¶çŠ¶æ€åœ¨å¼€æœºè¿‡ç¨‹ä¸­çš„è¾“å‡ºã€‚</p>
<ol>
<li><p>ubuntuçš„å¼€æœºè¿‡ç¨‹ä¸»è¦æ‰˜ç®¡åˆ°äº†systemdæœåŠ¡ä¸­ï¼Œæˆ‘ä»¬åŒ…å«çš„cpuã€lvmã€å†…å­˜ã€ç½‘å¡ä¿¡æ¯ä»¥åŠæ€»æ§ç»„ä»¶çš„ç›¸å…³çŠ¶æ€è¾“å‡º</p>
</li>
<li><p>è¯¥æœåŠ¡ä¸é˜»å¡ç³»ç»Ÿçš„æ­£å¸¸å¯åŠ¨ï¼Œä»…ä»…åªæ˜¯ä¸ºäº†æ·»åŠ ç³»ç»Ÿå¯åŠ¨çš„ä¸€ä¸ªè¾“å‡ºç”»é¢ï¼Œè¯¥æœåŠ¡åœ¨TUIæœåŠ¡å¯åŠ¨ä¹‹å‰å®Œæˆï¼Œé¿å…å°†consoleä¿¡æ¯è¾“å‡ºåˆ°TUIç•Œé¢ä¸Šé€ æˆæ··ä¹±ã€‚</p>
</li>
</ol>
<ul>
<li>å®ç°</li>
</ul>
<p>é€šè¿‡è¯»å–config&#x2F;srhino_serviceè·å–å½“å‰æ€»æ§æ‰€åœ¨æœºå™¨çš„æ‰€æœ‰ç»„ä»¶ä¿¡æ¯ï¼Œç„¶åè¿›è¡ŒæœåŠ¡çŠ¶æ€è¾“å‡ºã€‚åç»­æ€»æ§å‡çº§æ—¶æ·»åŠ äº†ç»„ä»¶ä¹Ÿéœ€è¦å°†ç»„ä»¶ä¿¡æ¯æ–°å¢åˆ°è¿™ä¸ªé…ç½®æ–‡ä»¶ã€‚</p>
<h5 id="5-3-1-8-æ·»åŠ æœåŠ¡çŠ¶æ€èœå•é€‰é¡¹"><a href="#5-3-1-8-æ·»åŠ æœåŠ¡çŠ¶æ€èœå•é€‰é¡¹" class="headerlink" title="5.3.1.8 æ·»åŠ æœåŠ¡çŠ¶æ€èœå•é€‰é¡¹"></a>5.3.1.8 æ·»åŠ æœåŠ¡çŠ¶æ€èœå•é€‰é¡¹</h5><p>å°†åŸæ¥TUIç¬¬äº”ä¸ªæŠ€æœ¯æ”¯æŒé€‰é¡¹ä¿®æ”¹ä¸ºæœåŠ¡çŠ¶æ€é€‰é¡¹ï¼Œèƒ½å¤Ÿè·å–å½“å‰æ€»æ§çš„å„ä¸ªç»„ä»¶çš„å¯¹åº”çŠ¶æ€ï¼Œåœ¨ç»„ä»¶çš„å³è¾¹å¦‚æœæ˜¯ç»¿è‰²åˆ™è¡¨ç¤ºè¯¥ç»„ä»¶æ˜¯æ­£å¸¸çš„ï¼Œå¦‚æœæ˜¯çº¢è‰²åˆ™è¡¨ç¤ºè¯¥ç»„ä»¶æ˜¯ä¸æ­£å¸¸çš„ã€‚</p>
<ul>
<li>å®ç°</li>
</ul>
<p>åœ¨TUIçš„èœå•ä¸­æ˜¾ç¤ºç»„ä»¶çŠ¶æ€ï¼Œä¾ç„¶ä½¿ç”¨config&#x2F;srhino_serivceæ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯ã€‚ä¸”è€ƒè™‘åˆ°ç»„ä»¶å¯èƒ½æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œè¿™é‡Œçš„TUIä½¿ç”¨åŠ¨æ€è¡Œé«˜æ¥å±•ç¤ºç»„ä»¶çŠ¶æ€ã€‚</p>
<h5 id="5-3-1-9-ç³»ç»Ÿç¡¬ä»¶ä¿¡æ¯å±•ç¤º"><a href="#5-3-1-9-ç³»ç»Ÿç¡¬ä»¶ä¿¡æ¯å±•ç¤º" class="headerlink" title="5.3.1.9 ç³»ç»Ÿç¡¬ä»¶ä¿¡æ¯å±•ç¤º"></a>5.3.1.9 ç³»ç»Ÿç¡¬ä»¶ä¿¡æ¯å±•ç¤º</h5><p>åœ¨å‘½ä»¤è¡Œé€‰é¡¹é‡Œé¢ï¼Œæ–°å¢äº†ä¸€ä¸ªhardware_infoçš„å‘½ä»¤ï¼Œè¯¥å‘½ä»¤èƒ½å¤Ÿå±•ç¤ºå½“å‰ç³»ç»Ÿçš„cpuï¼Œmemoryï¼Œdiskçš„ç›¸å…³ä½¿ç”¨æƒ…å†µï¼Œè¯¥å‘½ä»¤ä¾èµ–äºfree, dfå‘½ä»¤ã€‚</p>
<ul>
<li>å®ç°</li>
</ul>
<p>è·å–ç³»ç»Ÿç¡¬ä»¶ä¿¡æ¯çš„æ—¶å€™ï¼Œä¸»è¦é€šè¿‡dfå’Œfreeå‘½ä»¤è·å–ç›¸å…³å†…å­˜ä¿¡æ¯å’Œåˆ†åŒºä¿¡æ¯ã€‚</p>
<ol>
<li><p>å†…å­˜ä¿¡æ¯çš„ä½¿ç”¨ä¸ºfree -hä¸­çš„usedè¿™ä¸€æ ï¼Œç›®å‰æ²¡æœ‰å±•ç¤ºå‰©ä½™å¯ç”¨å†…å­˜ã€‚</p>
</li>
<li><p>ç£ç›˜ä¸»è¦å±•ç¤ºçŸ³çŠ€è‡ªå®šä¹‰çš„ä¸‰ä¸ªåˆ†åŒºç›¸å…³ä½¿ç”¨æƒ…å†µ(&#x2F; , &#x2F;data, &#x2F;opt)</p>
</li>
<li><p>cpuçš„ä½¿ç”¨ç‡ä¸ºé—´éš”ä¸€ç§’è¯»å–&#x2F;proc&#x2F;cpuinfoè®¡ç®—å¾—åˆ°ã€‚ç›®å‰ä»…ä»…åªæœ‰å½“å‰cpuä½¿ç”¨ç‡ã€‚</p>
</li>
</ol>
<h4 id="5-3-2-isoè‡ªåŠ¨åŒ–åˆ¶ä½œovaæ–‡ä»¶"><a href="#5-3-2-isoè‡ªåŠ¨åŒ–åˆ¶ä½œovaæ–‡ä»¶" class="headerlink" title="5.3.2 isoè‡ªåŠ¨åŒ–åˆ¶ä½œovaæ–‡ä»¶"></a>5.3.2 isoè‡ªåŠ¨åŒ–åˆ¶ä½œovaæ–‡ä»¶</h4><h5 id="5-3-2-1-è™šæ‹Ÿæœºçš„ç›¸å…³é…ç½®"><a href="#5-3-2-1-è™šæ‹Ÿæœºçš„ç›¸å…³é…ç½®" class="headerlink" title="5.3.2.1 è™šæ‹Ÿæœºçš„ç›¸å…³é…ç½®"></a>5.3.2.1 è™šæ‹Ÿæœºçš„ç›¸å…³é…ç½®</h5><p>è¿™ä¸ªæ˜¯srhino.vmxé…ç½®æ–‡ä»¶ï¼Œé€šå¸¸ç”¨æ¥æè¿°ä¸€ä¸ªè™šæ‹Ÿæœºçš„é…ç½®ï¼Œè¿™é‡Œç”¨äºovftoolå¯¼å‡ºæ—¶ï¼Œå¯¼å‡ºå¯¹åº”çš„è™šæ‹Ÿæœºé…ç½®ã€‚</p>
<h5 id="5-3-2-2-qemuå¯åŠ¨å‚æ•°"><a href="#5-3-2-2-qemuå¯åŠ¨å‚æ•°" class="headerlink" title="5.3.2.2 qemuå¯åŠ¨å‚æ•°"></a>5.3.2.2 qemuå¯åŠ¨å‚æ•°</h5><p>é€šè¿‡qemuæŒ‚è½½isoé•œåƒä¹‹åå¯åŠ¨é•œåƒå®‰è£…åˆ°æŒ‡å®švmdkç£ç›˜</p>
<p>ç„¶åé€šè¿‡ovftoolå¯¼å‡ºovaç£ç›˜æ–‡ä»¶</p>
<p>5.3.2.3 é•œåƒå¯åŠ¨å¤±è´¥å¤‡ç”¨æ–¹æ¡ˆ</p>
<h2 id="6-è‡ªæµ‹"><a href="#6-è‡ªæµ‹" class="headerlink" title="6 è‡ªæµ‹"></a>6 è‡ªæµ‹</h2><p>å½“å‰å·¥ç¨‹ä¸‹è‡ªå·±éœ€è¦è‡ªæµ‹çš„æ¨¡å—ä»¥åŠè‡ªæµ‹æ–¹æ³•</p>
<h3 id="6-1-è‡ªæµ‹æ¨¡å—"><a href="#6-1-è‡ªæµ‹æ¨¡å—" class="headerlink" title="6.1 è‡ªæµ‹æ¨¡å—"></a>6.1 è‡ªæµ‹æ¨¡å—</h3><p>åŒ…å«å½“å‰è®¾è®¡çš„æ¨¡å—ä¸ä¾èµ–çš„å‘¨è¾¹ç»„ä»¶&#x2F;æ¨¡å—</p>
<h3 id="-3"><a href="#-3" class="headerlink" title=""></a></h3><h3 id="6-2-è‡ªæµ‹æ–¹å¼"><a href="#6-2-è‡ªæµ‹æ–¹å¼" class="headerlink" title="6.2 è‡ªæµ‹æ–¹å¼"></a>6.2 è‡ªæµ‹æ–¹å¼</h3><p>è¿›è¡Œæµ‹è¯•éªŒè¯çš„æ–¹æ³•, ä½¿ç”¨çš„å·¥å…·, è¯·æ±‚çš„å‚æ•°, é¢„æœŸå“åº”çš„ç»“æœ</p>
<ul>
<li><p>æ‰©å®¹è„šæœ¬è‡ªæµ‹æ–¹å¼</p>
<ul>
<li><p>å¢åŠ ä¸€å—SATAç£ç›˜ï¼Œ10GB</p>
</li>
<li><p>å¢åŠ ä¸€å—IDE&#x2F;SCSI&#x2F;NVMEç£ç›˜ï¼Œ10GB</p>
</li>
<li><p>å¢åŠ ä¸€å—virtioç£ç›˜ï¼Œ10GB</p>
</li>
<li><p>è¯¯è°ƒç³»ç»Ÿç›˜å¤§å°æµ‹è¯•</p>
</li>
</ul>
</li>
<li><p>ISOé•œåƒè‡ªæµ‹æ–¹å¼</p>
<ul>
<li><p>åœ¨vmwareå¹³å°å®‰è£…æµ‹è¯•ï¼Œéœ€è¦æå‰å‡†å¤‡ESXI6.5ç¯å¢ƒ</p>
</li>
<li><p>åœ¨HCIå¹³å°å®‰è£…æµ‹è¯•</p>
</li>
</ul>
</li>
<li><p>OVAé•œåƒè‡ªæµ‹æ–¹å¼</p>
<ul>
<li><p>å‚è€ƒéƒ¨ç½²æ–‡æ¡£ï¼Œåœ¨ä¸åŒå¹³å°æµ‹è¯•</p>
</li>
<li><p>éœ€è¦æµ‹è¯•å¼•æ“å®‰è£…</p>
</li>
</ul>
</li>
<li><p>åˆ†åŒºè‡ªæµ‹æ–¹å¼</p>
<ul>
<li>äººè‚‰åˆ¤æ–­ï¼Œä½¿ç”¨å‘½ä»¤lsblkï¼Œ dfç­‰</li>
</ul>
</li>
<li><p><del>å•å…ƒæµ‹è¯•</del></p>
</li>
</ul>
<h2 id="7-é£é™©è¯„ä¼°åŠå¯¹å…¶å®ƒæ¨¡å—-ç³»ç»Ÿå½±å“"><a href="#7-é£é™©è¯„ä¼°åŠå¯¹å…¶å®ƒæ¨¡å—-ç³»ç»Ÿå½±å“" class="headerlink" title="7 é£é™©è¯„ä¼°åŠå¯¹å…¶å®ƒæ¨¡å—&#x2F;ç³»ç»Ÿå½±å“"></a>7 é£é™©è¯„ä¼°åŠå¯¹å…¶å®ƒæ¨¡å—&#x2F;ç³»ç»Ÿå½±å“</h2><p>å®ç°å½“å‰è®¾è®¡å­˜åœ¨ä»€ä¹ˆå·²çŸ¥é£é™©</p>
<ul>
<li><p>åˆ†åŒºåï¼Œå¯èƒ½ä¼šå­˜åœ¨é—æ¼çš„å…¶ä»–æ¨¡å—ä»åœ¨ä½¿ç”¨ç³»ç»Ÿåˆ†åŒºï¼ˆæ ¹åˆ†åŒºï¼‰ï¼Œåœ¨æ¸…ç†ç­–ç•¥ä¸èµ·æ•ˆçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´OSå¼‚å¸¸</p>
</li>
<li><p>è½¯è¿æ¥å¯èƒ½æœ‰é—æ¼æˆ–è€…è¢«åº”ç”¨ç¨‹åºè¯¯åˆ å¯¼è‡´æœ‰äº›å¤§æ•°æ®ä½¿ç”¨åˆ°äº†åº”ç”¨åˆ†åŒºçš„ç©ºé—´</p>
</li>
<li><p>OVAå’ŒISOé•œåƒå¯èƒ½ä¼šæ¯”è¾ƒå¤§ï¼Œä¼°è®¡å¤§å°ä¸º3~4GBï¼Œç”±äºå…¬å¸æ²¡æœ‰ç§æœ‰ç½‘ç›˜ï¼Œå¯èƒ½ä¼šå¯¹å®æ–½é€ æˆä¸€äº›å½±å“</p>
</li>
</ul>
<h3 id="7-1-å·²çŸ¥çš„æˆ–å¯é¢„çŸ¥çš„é£é™©"><a href="#7-1-å·²çŸ¥çš„æˆ–å¯é¢„çŸ¥çš„é£é™©" class="headerlink" title="7.1 å·²çŸ¥çš„æˆ–å¯é¢„çŸ¥çš„é£é™©"></a>7.1 å·²çŸ¥çš„æˆ–å¯é¢„çŸ¥çš„é£é™©</h3><p>åœ¨è¿™é‡ŒåŠ ä¸Šå·²ç»çŸ¥é“çš„æˆ–å¯èƒ½ä¼šå‘ç”Ÿçš„é£é™©ï¼ŒåŒ…æ‹¬æŠ€æœ¯ã€ä¸šåŠ¡ç­‰æ–¹é¢ã€‚æœ€å¥½é’ˆå¯¹æ¯ä¸ªé£é™©ï¼Œåˆ—å‡ºç›¸åº”çš„åº”å¯¹æªæ–½ã€‚</p>
<h4 id="7-1-1-å•†åŸçš„ç”Ÿäº§åœ°å€å¯èƒ½ä¸å¯ç”¨"><a href="#7-1-1-å•†åŸçš„ç”Ÿäº§åœ°å€å¯èƒ½ä¸å¯ç”¨" class="headerlink" title="7.1.1 å•†åŸçš„ç”Ÿäº§åœ°å€å¯èƒ½ä¸å¯ç”¨"></a>7.1.1 å•†åŸçš„ç”Ÿäº§åœ°å€å¯èƒ½ä¸å¯ç”¨</h4><p>æ€»æ§çš„é…ç½®é¡¹[shopCenter]ä¸‹çš„ä¸¤ä¸ªåœ°å€ï¼Œä¸€ä¸ªç”¨äºè·å–æ•°æ®ï¼Œä¸€ä¸ªç”¨äºä¸ŠæŠ¥æ•°æ®ã€‚è¿™é‡Œçš„é£é™©æ˜¯ç”Ÿäº§çš„æ€»æ§ä¸ä¸€å®šå¯ç”¨</p>
<h4 id="7-1-2-CPUæŒ‡ä»¤é›†æ£€æŸ¥"><a href="#7-1-2-CPUæŒ‡ä»¤é›†æ£€æŸ¥" class="headerlink" title="7.1.2 CPUæŒ‡ä»¤é›†æ£€æŸ¥"></a>7.1.2 CPUæŒ‡ä»¤é›†æ£€æŸ¥</h4><p>æ€»æ§ä¾èµ–AVXæŒ‡ä»¤ï¼Œéœ€è¦æ£€æŸ¥CPUæŒ‡ä»¤é›†ã€‚</p>
<p>ISOè¦åœ¨æ­£å¼å®‰è£…ç³»ç»Ÿå‰ï¼Œè¿›è¡Œæ£€æŸ¥ã€‚</p>
<p><img src="/../../../../home/xiaoy/media/image8.png" alt="descript"></p>
<p>OVAç›®å‰è¿˜ä¸ç¡®å®šæ£€æŸ¥ååœ¨å“ªæç¤ºï¼Œ<del>è€Œä¸”æ²¡æœ‰AVXå¥½åƒä¹Ÿè£…ä¸äº†ESXIã€‚</del></p>
<h4 id="7-1-3-æ€»æ§WEBUIä¿®æ”¹IPé•¿æ—¶é—´ä¸èƒ½è½åœ°"><a href="#7-1-3-æ€»æ§WEBUIä¿®æ”¹IPé•¿æ—¶é—´ä¸èƒ½è½åœ°" class="headerlink" title="7.1.3 æ€»æ§WEBUIä¿®æ”¹IPé•¿æ—¶é—´ä¸èƒ½è½åœ°"></a>7.1.3 æ€»æ§WEBUIä¿®æ”¹IPé•¿æ—¶é—´ä¸èƒ½è½åœ°</h4><p>å½“å‰TUIè®¾è®¡æˆé…åˆWEBUIä½¿ç”¨ï¼Œä½†æ˜¯WEBUIçš„éœ€æ±‚éƒ½è¿˜æ²¡å®Œå…¨å®šä¸‹æ¥ï¼ŒåªçŸ¥é“1.4.0è¦åšï¼Œåœ¨WEBç•Œé¢ä¿®æ”¹IPå®ç°ä»¥å‰ï¼Œé•œåƒä¹Ÿè¿˜æœ‰æŒä¹…åŒ–ä¿®æ”¹IPçš„éœ€æ±‚ï¼Œç›®å‰çš„è®¾æƒ³æ˜¯é€šè¿‡ä¸€ä¸ªè„šæœ¬æ¥ä»£æ›¿WEBUIçš„æ“ä½œã€‚</p>
<p>ä¸è®ºæ˜¯ç”¨äºä»£æ›¿çš„è„šæœ¬è¿˜æ˜¯æœªæ¥çš„WEBç•Œé¢ï¼Œåœ¨å®‰è£…å¼•æ“ä¹‹å‰éƒ½éœ€è¦é€šè¿‡ä»–ä»¬æ¥è®¾ç½®IPï¼Œä»¥ä¾¿æŒä¹…åŒ–å’Œä¿®æ”¹å¯¹åº”åº”ç”¨çš„é…ç½®ï¼Œå¦åˆ™æ— æ³•å®‰è£…å¼•æ“ã€‚</p>
<p>è„šæœ¬è·¯å¾„ä¸º&#x2F;user&#x2F;sbin&#x2F;quickstart_network_set</p>
<h3 id="7-2-ä¸å…¶å®ƒæ¨¡å—-ç³»ç»Ÿå¯èƒ½çš„å½±å“"><a href="#7-2-ä¸å…¶å®ƒæ¨¡å—-ç³»ç»Ÿå¯èƒ½çš„å½±å“" class="headerlink" title="7.2 ä¸å…¶å®ƒæ¨¡å—&#x2F;ç³»ç»Ÿå¯èƒ½çš„å½±å“"></a>7.2 ä¸å…¶å®ƒæ¨¡å—&#x2F;ç³»ç»Ÿå¯èƒ½çš„å½±å“</h3><p>åœ¨è¯¦ç»†è®¾è®¡ä¸­æè¿°äº†è¯¥æ¨¡å—ä¸å…¶å®ƒæ¨¡å—çš„ä¾èµ–å…³ç³»ã€‚åœ¨è¿™é‡Œæè¿°è¿™äº›ä¾èµ–å…³ç³»å¯èƒ½å¸¦æ¥çš„å½±å“ã€‚åŒ…æ‹¬æœ¬æ¨¡å—å¯¹å…¶å®ƒæ¨¡å—å¯èƒ½é€ æˆçš„å½±å“ä»¥åŠå…¶å®ƒæ¨¡å—å¯èƒ½ç»™æœ¬æ¨¡å—é€ æˆçš„å½±å“ä¸¤ä¸ªæ–¹é¢ã€‚</p>
<h4 id="7-2-1-å¯¹æ€»æ§ç›‘æ§ä½“ç³»çš„å½±å“"><a href="#7-2-1-å¯¹æ€»æ§ç›‘æ§ä½“ç³»çš„å½±å“" class="headerlink" title="7.2.1 å¯¹æ€»æ§ç›‘æ§ä½“ç³»çš„å½±å“"></a>7.2.1 å¯¹æ€»æ§ç›‘æ§ä½“ç³»çš„å½±å“</h4><p>UIç›®å½•ï¼š</p>
<ul>
<li><p>ç³»ç»Ÿç®¡ç†-è¿è¡ŒçŠ¶æ€-ç¡¬ç›˜</p>
</li>
<li><p>ç³»ç»Ÿç®¡ç†-æ—¥å¿—ç®¡ç†-ç³»ç»Ÿæ—¥å¿—é…ç½®</p>
</li>
</ul>
<p><strong>æè¿°ï¼š</strong></p>
<p>åˆ†åŒºä¹‹åï¼ŒåŸæœ‰ç£ç›˜ç©ºé—´ä½¿ç”¨ç‡ä¸èƒ½é€‚åº”åˆ†åŒºåçš„å®é™…æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¾ç¤ºçš„ä¸å‡†ç¡®ï¼Œå¹¶ä¸”è¿™å—ä¼šè¢«æ¸…ç†ç­–ç•¥ä¾èµ–ï¼Œä¼šäº§ç”Ÿè¿›ä¸€æ­¥çš„å½±å“ã€‚</p>
<p>åŸå› ï¼š</p>
<p>åˆ†åŒºä¹‹åï¼Œæœ¬è´¨ä¸Šæ˜¯ç›¸å½“äºå°†ä¸€ä¸ªç¡¬ç›˜åˆ†ä¸ºå¤šä¸ªç¡¬ç›˜ï¼Œä½†æ˜¯UIæ˜¾ç¤ºä¸Šè¿˜æ˜¯æŒ‰ç…§ä¸€ä¸ªç¡¬ç›˜æ¥æ˜¾ç¤ºã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>æ–¹æ¡ˆ1. è°ƒæ•´UIï¼Œå°†ç¡¬ç›˜æ”¹ä¸ºç³»ç»Ÿç›˜+æ•°æ®ç›˜åŒæ˜¾ã€‚ç³»ç»Ÿç›˜æ¶µæ‹¬æ ¹åˆ†åŒºã€åº”ç”¨åˆ†åŒºå’Œå¯åŠ¨åˆ†åŒº</p>
<p>æ–¹æ¡ˆ2. è°ƒæ•´ç®—æ³•ï¼Œæ˜¾ç¤ºæ•°æ®ç›˜çš„ä½¿ç”¨ç‡</p>
<p>æ–¹æ¡ˆ3. è°ƒæ•´ç®—æ³•ï¼Œæ˜¾ç¤ºä¸ºï¼ˆç¡¬ç›˜1ä½¿ç”¨+ç¡¬ç›˜2ä½¿ç”¨+â€¦.+ç¡¬ç›˜nä½¿ç”¨)&#x2F;ï¼ˆç¡¬ç›˜1+ç¡¬ç›˜2+â€¦.+ç¡¬ç›˜n)</p>
<p>æ–¹æ¡ˆ4. è°ƒæ•´UIï¼Œæ¯ä¸ªç›˜ï¼ˆåˆ†åŒºï¼‰åˆ†åˆ«æ˜¾ç¤º</p>
<p><strong>ä¼˜ç¼ºç‚¹ï¼š</strong></p>
<p>æ–¹æ¡ˆ1. ä¼˜ç‚¹ï¼šé€‚é…å®ç°ï¼Œèƒ½å¤Ÿå‡å°‘å¯¹ç”¨æˆ·çš„è¯¯å¯¼ï¼Œæ•°æ®ç›˜å…è®¸ç£ç›˜ä½¿ç”¨ç‡ä½è¾¾1%ï¼›ç¼ºç‚¹ï¼šéœ€è¦è°ƒæ•´UIï¼Œæ¸…ç†ç­–ç•¥UIæ–‡æ¡ˆä¹Ÿéœ€è¦åŒºåˆ†ç³»ç»Ÿç›˜å’Œæ•°æ®ç›˜ã€‚</p>
<p>æ–¹æ¡ˆ2. ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œå…è®¸ç£ç›˜ä½¿ç”¨ç‡ä½è¾¾1%ï¼›ç¼ºç‚¹ï¼šå¦‚æœå“ªå¤©éœ€è¦æ˜¾ç¤ºç¡¬ç›˜çš„å…·ä½“å®¹é‡ï¼Œè¿™é‡Œæ˜¾ç¤ºçš„æ•°æ®ç›˜å®¹é‡ä¼šå¼•èµ·ç”¨æˆ·çš„å›°æƒ‘ï¼ˆå®¹é‡å°äºåˆ†åŒºå‰çš„ç£ç›˜ï¼‰ï¼Œå¦å¤–ï¼Œå¦‚æœå“ªä¸ªåº”ç”¨ä¸å°å¿ƒæŠŠæ•°æ®å†™åˆ°æ•°æ®ç›˜ï¼Œå¹¶ä¸”è¿˜å†™æ»¡äº†ï¼Œç•Œé¢ä¸Šä¹Ÿæ— æ³•ååº”å‡ºæ¥ã€‚</p>
<p>æ–¹æ¡ˆ3. ä¼˜ç‚¹ï¼šç›¸æ¯”å…¶ä»–æ–¹æ¡ˆç›¸å¯¹ä¸­åº¸ï¼Œæ²¡æœ‰æ˜æ˜¾çš„ä¼˜ç‚¹ï¼›ç¼ºç‚¹ï¼šç£ç›˜ä½¿ç”¨ç‡è¯¯å¯¼æ€§å¼ºï¼Œæ— æ³•åæ˜ ç”¨æˆ·æœ€å…³å¿ƒçš„æŒ‡æ ‡ï¼Œæ•°æ®åŒºæ»¡äº†ä¹Ÿä¸ä¼šæ˜¾ç¤º100%ï¼Œæ•°æ®åŒºç©ºäº†æ˜¾ç¤ºçš„å¯èƒ½æ˜¯20%</p>
<p>æ”¾å“ª4. ä¼˜ç‚¹ï¼šæ˜¾ç¤ºçš„æœ€ä¸ºç²¾ç¡®ï¼Œèƒ½å¤Ÿå‘ç°ä»»æ„åˆ†åŒºä½¿ç”¨ç‡è¿‡é«˜ï¼Œå¯¹æ’æŸ¥é—®é¢˜æ¯”è¾ƒå‹å¥½ï¼›ç¼ºç‚¹ï¼šæš´éœ²ç³»ç»Ÿç»†èŠ‚ã€ç”¨æˆ·è®¤çŸ¥ä¸ä¾¿ï¼Œä¸çŸ¥é“è¿™äº›åˆ†åŒºæ˜¯ä»€ä¹ˆ</p>
<p><strong>ç»“è®º</strong>ï¼š</p>
<ul>
<li><p>é€‰æ‹©æ–¹æ¡ˆ2ï¼šæ˜¾ç¤ºæ•°æ®ç›˜çš„ä½¿ç”¨ç‡</p>
</li>
<li><p>åŒæœºä¸»ä»åŒæ­¥ç­‰æœªæ¥åœºæ™¯ä¸å—åˆ†åŒºå½±å“</p>
</li>
</ul>
<h4 id="7-2-2-å¯¹æ–‡ä»¶ç›®å½•è§„èŒƒçš„å½±å“"><a href="#7-2-2-å¯¹æ–‡ä»¶ç›®å½•è§„èŒƒçš„å½±å“" class="headerlink" title="7.2.2 å¯¹æ–‡ä»¶ç›®å½•è§„èŒƒçš„å½±å“"></a>7.2.2 å¯¹æ–‡ä»¶ç›®å½•è§„èŒƒçš„å½±å“</h4><p>åŸæœ¬å„ä¸ªåº”ç”¨çš„æ–‡ä»¶ç›®å½•è§„èŒƒä¸ºï¼š</p>
<ol>
<li><p>æ¯ä¸ªåº”ç”¨ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç§°ä¸ºåº”ç”¨æ–‡ä»¶å¤¹</p>
</li>
<li><p>åº”ç”¨æ–‡ä»¶å¤¹ä¸‹æ”¾ç½®bin,config,dataç­‰å¤šä¸ªç›®å½•ï¼Œç”¨äºå­˜å‚¨äºŒè¿›åˆ¶ã€é…ç½®ã€æ•°æ®ç­‰</p>
</li>
</ol>
<p>è¿™ç§æ–¹å¼å¯¹äºæ•°æ®åˆ†ç±»å­˜å‚¨ä¸åˆ©ï¼Œç›´æ¥é™åˆ¶äº†åˆ†åŒºçš„ä½¿ç”¨ï¼Œè°ƒæ•´åçš„ç›®å½•è§„èŒƒä¸ºï¼š</p>
<p>åŸæœ‰è§„èŒƒåŸºæœ¬ä¸å˜ï¼Œå°†dataç›®å½•è°ƒæ•´åˆ°æ•°æ®åˆ†åŒº</p>
<p>è°ƒæ•´å‰ï¼š${åº”ç”¨ç›®å½•}&#x2F;${åº”ç”¨å}&#x2F;data</p>
<p>è°ƒæ•´åï¼š${æ•°æ®ç›®å½•}&#x2F;${åº”ç”¨å}&#x2F;data</p>
<ol start="3">
<li><del>ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ï¼Œåœ¨tmpç›®å½•æš‚å­˜åï¼Œç§»åŠ¨åˆ°åˆé€‚çš„ä½ç½®</del></li>
</ol>
<p>è°ƒæ•´å‰ï¼š&#x2F;tmp&#x2F;${tmpdir}&#x2F;uploadxxx</p>
<p>è°ƒæ•´åï¼š&#x2F;data&#x2F;${tmpdir}&#x2F;uploadxxx</p>
<p><del>å¦ä¸€ä¸ªå¯é€‰è°ƒæ•´æ˜¯ï¼Œåº”ç”¨ç›®å½•ä½¿ç”¨ä¸“æœ‰æ ‡è¯†ï¼Œä¸å†ä½¿ç”¨optï¼ˆå¾…è¯„å®¡ç¡®å®šï¼‰<br>è°ƒæ•´å‰ï¼š${åº”ç”¨ç›®å½•} &#x3D;&#x3D; &#x2F;opt</del></p>
<p><del>è°ƒæ•´åï¼š${åº”ç”¨ç›®å½•} &#x3D;&#x3D; &#x2F;srhino</del></p>
<p><del>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåšæ¸…ç†ç±»æ“ä½œæ—¶ï¼Œå¯ä»¥ç›´æ¥rm -rf &#x2F;srhino&#x2F;* è€Œä¸ç”¨å°å¿ƒç¿¼ç¿¼çš„åˆ é™¤æ¯ä¸ªoptä¸‹çš„æ–‡ä»¶ã€‚ä½†æ˜¯æ¸…ç†è¿™ä¸ªéœ€æ±‚ç†è®ºä¸Šä¸åº”è¯¥å‡ºç°åœ¨å®¢æˆ·çš„åœºæ™¯é‡Œï¼Œç‰¹åˆ«æ˜¯é•œåƒäº¤ä»˜çš„åœºæ™¯ï¼Œå”¯ä¸€æœ‰ç”¨çš„åœºæ™¯å¯èƒ½æ˜¯å†…éƒ¨è‡ªæµ‹çš„æ—¶å€™ï¼Œæ„ä¹‰ä¸å¤ªæ˜ç¡®ã€‚</del></p>
<p>ä¸Šé¢è¯´çš„éƒ½æ˜¯ç†è®ºä¸Šçš„åœºæ™¯ï¼Œå®é™…è€ƒå¯Ÿå‘ç°åŸæœ‰ç›®å½•è§„èŒƒå¹¶ä¸æ˜¯æ¯ä¸ªåº”ç”¨éƒ½èƒ½éµå®ˆçš„ï¼Œå¹¶ä¸”å‡ºäºè¿‡æ¸¡æœŸçš„è€ƒé‡ï¼Œä¸ä¼šé©¬ä¸Šåˆ‡åˆ°æ–°çš„è§„èŒƒ</p>
<p>å½“å‰ç‰ˆæœ¬è®¾è®¡çš„æ˜¯æŒ‰ç…§ã€5.2.4.3 è½¯é“¾æ¥ã€‘æè¿°ï¼Œåœ¨åˆ¶ä½œé•œåƒçš„æ—¶å€™ï¼Œä¼šå°†å¯¹åº”çš„è½¯è¿æ¥åˆ›å»ºå¥½ã€‚è¿™æ ·åšæœ‰ä¸€äº›è¦æ±‚ï¼Œä¸»è¦æ˜¯å‡çº§å’Œé‡è£…çš„æ—¶å€™ä¼šæœ‰å½±å“ï¼Œåœ¨ä¸‹é¢ä¸¤èŠ‚ä¼šæœ‰è¯¦ç»†æè¿°ã€‚</p>
<p>ç»“è®ºï¼š</p>
<p>ä¸éœ€è¦&#x2F;srhino,,éœ€è¦ä¸€ä¸ªè§„èŒƒæ–‡æ¡£</p>
<h4 id="7-2-3-å¯¹å‡çº§çš„å½±å“"><a href="#7-2-3-å¯¹å‡çº§çš„å½±å“" class="headerlink" title="7.2.3 å¯¹å‡çº§çš„å½±å“"></a>7.2.3 å¯¹å‡çº§çš„å½±å“</h4><p>å¯¼å…¥è¿‡ç¨‹ï¼š</p>
<ul>
<li><p>æµè§ˆå™¨&gt;&gt;&gt;&gt;&#x2F;tmp&#x2F;${tmpdir}&#x2F;xxx.tar.gz</p>
</li>
<li><p>&#x2F;tmp&#x2F;${tmpdir}&#x2F;xxx.tar.gz &gt;&gt;&gt; sc &gt;&gt;&gt; æ ¡éªŒ &gt;&gt; è§£å‹ &gt;&gt;&gt; &#x2F;opt&#x2F;repo</p>
</li>
</ul>
<p>å‡çº§è¿‡ç¨‹ï¼š</p>
<ul>
<li><p>å¯åŠ¨&#x2F;opt&#x2F;repo&#x2F;sc&#x2F;sc&#x2F;bin&#x2F;sc (ç®€ç§°sc_new)ï¼Œæ¥ç®¡tcp listener socket</p>
</li>
<li><p>sc_new æ‹·è´&#x2F;opt&#x2F;repo&#x2F;éƒ¨åˆ†æ–‡ä»¶åˆ°&#x2F;opt&#x2F;å¯¹åº”çš„ç¨‹åºä¸‹ï¼Œæ›¿æ¢äºŒè¿›åˆ¶å’Œé…ç½®</p>
</li>
<li><p>sc_new æ‰§è¡Œ&#x2F;opt&#x2F;sc&#x2F;hack&#x2F;seederï¼Œè¿™é‡Œä¼šæ¶‰åŠæ•°æ®è¿ç§»ç­‰å„ç§å¤æ‚å¤„ç†</p>
</li>
</ul>
<p>è¦æ±‚ï¼š</p>
<p><strong>æ•´ä½“çº¦æŸï¼š</strong></p>
<p>å‡çº§è¿‡ç¨‹æ‰§è¡Œæµæ¯”è¾ƒä¸ç¡®å®šï¼Œéœ€è¦ç¡®ä¿è¿‡ç¨‹ä¸­ä¸ä¼šåˆ é™¤&#x2F;optä¸‹çš„ç›®å½•ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´è½¯é“¾æ¥å¤±æ•ˆã€‚</p>
<p><strong>å‡çº§å‰çº¦æŸï¼š</strong></p>
<p>å‡çº§å‰ï¼Œæ£€æŸ¥&#x2F;oem&#x2F;infoæ–‡ä»¶ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ¤å®šä¸ºè½¯ä»¶éƒ¨ç½²</p>
<p>å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ£€æŸ¥OS.os-releaseå’ŒOS.os-patchï¼Œå½“å‰ç‰ˆæœ¬ä»…åˆ¤æ–­os-releaseæ˜¯å¦ä¸ºsrhino focalå³å¯ï¼Œä»¥åå¦‚æœæœ‰å…¶ä»–ç±»å‹çš„ç³»ç»Ÿï¼Œåˆ™éœ€è¦åœ¨å‡çº§å‰åŒ¹é…å¥½ã€‚</p>
<p><strong>ç³»ç»Ÿå‡çº§åŒ…ï¼š</strong></p>
<p>åœ¨æ“ä½œç³»ç»Ÿä¹Ÿå½’æˆ‘ä»¬ç®¡åï¼Œå¯¹äºæ“ä½œç³»ç»Ÿçš„å®‰å…¨æ›´æ–°ä¹Ÿéœ€è¦é€šè¿‡å‡çº§åŒ…çš„æ–¹å¼å‘å¸ƒã€‚ç³»ç»Ÿæ›´æ–°ä¸»è¦æ˜¯ç³»ç»Ÿè½¯ä»¶çš„æ›´æ–°ï¼Œç†è®ºä¸Šæ¥è¯´åº”è¯¥æ˜¯æŠŠå¯¹åº”çš„debåŒ…æ‰“åŒ…ï¼Œå¹¶ä¸”åˆ¶ä½œå‡çº§è„šæœ¬å³å¯ã€‚å¯¹äºç³»ç»Ÿå‡çº§è€Œè¨€ï¼Œéœ€è¦æ›´æ–°&#x2F;oem&#x2F;infoæ–‡ä»¶çš„SPç‰ˆæœ¬</p>
<p><strong>å‡çº§åŒ…å’Œå®‰è£…åŒ…åˆ†ç¦»ï¼š</strong></p>
<p>ç›®å‰å‡çº§åŒ…å’Œå®‰è£…åŒ…éƒ½æ˜¯åŒä¸€ä¸ªåŒ…ï¼Œç»äº†è§£ï¼Œè¯¥åŒ…ç”¨ä½œå‡çº§ç”¨é€”æ—¶ï¼Œæ˜¯ä¸éœ€è¦å®‰è£…è„šæœ¬ï¼ˆinstall.sh)çš„ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºåº”è¯¥å°†ä¸¤ä¸ªåŒ…åˆ†ç¦»å¼€æ¥ï¼Œå¯¹å¤–ä»¥åä¸å‘å¸ƒå®‰è£…åŒ…ï¼Œä»…å‘å¸ƒé•œåƒå’Œå‡çº§åŒ…ï¼Œå‡çº§åŒ…é‡Œé¢ä¸åŒ…å«å®‰è£…è„šæœ¬å’Œå¸è½½è„šæœ¬ã€‚</p>
<p>ç»“è®ºï¼š</p>
<p>åˆ†ç¦»</p>
<p>æ·»åŠ ç‰ˆæœ¬æ ‡è¯†æå‡å…¼å®¹æ€§</p>
<h4 id="7-2-4-å¯¹é‡è£…çš„å½±å“"><a href="#7-2-4-å¯¹é‡è£…çš„å½±å“" class="headerlink" title="7.2.4 å¯¹é‡è£…çš„å½±å“"></a>7.2.4 å¯¹é‡è£…çš„å½±å“</h4><p>é‡è£…åº”è¯¥ä»…å‘ç”Ÿåœ¨å…¬å¸å†…éƒ¨ï¼Œå¤–éƒ¨è¦ä¹ˆç”¨é•œåƒé‡æ–°éƒ¨ç½²ï¼Œè¦ä¹ˆç”¨å‡çº§åŒ…å‡çº§ã€‚</p>
<p>å¸è½½è„šæœ¬åˆ çš„æ¯”è¾ƒå½»åº•ï¼Œè½¯é“¾æ¥æ˜¯ä¸€å®šä¼šè¢«åˆ é™¤çš„ï¼Œæ‰€ä»¥è¦è°ƒæ•´çš„æ˜¯å®‰è£…è„šæœ¬ï¼Œå®‰è£…è„šæœ¬éœ€è¦</p>
<p>åœ¨å¯åŠ¨å„ä¸ªè¿›ç¨‹ä¹‹å‰ï¼Œå…ˆæŠŠè§£å‹åçš„ä¸€äº›æ–‡ä»¶å¤¹æŒªåˆ°&#x2F;dataç›®å½•(ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ï¼Œç„¶ååˆ›å»ºå¥½å¯¹åº”çš„è½¯è¿æ¥</p>
<h4 id="7-2-5-mongodbçš„åŠ¨æ€é…ç½®"><a href="#7-2-5-mongodbçš„åŠ¨æ€é…ç½®" class="headerlink" title="7.2.5 mongodbçš„åŠ¨æ€é…ç½®"></a>7.2.5 mongodbçš„åŠ¨æ€é…ç½®</h4><h5 id="7-2-5-1-mongodbä½¿ç”¨çš„æœºå™¨èµ„æºé™åˆ¶"><a href="#7-2-5-1-mongodbä½¿ç”¨çš„æœºå™¨èµ„æºé™åˆ¶" class="headerlink" title="7.2.5.1 mongodbä½¿ç”¨çš„æœºå™¨èµ„æºé™åˆ¶"></a>7.2.5.1 mongodbä½¿ç”¨çš„æœºå™¨èµ„æºé™åˆ¶</h5><p><strong>CPUèµ„æºé™åˆ¶</strong></p>
<ul>
<li><p>æ ¹æ® CPU æ ¸å¿ƒæ•°é‡ï¼ˆCPU_NUMï¼‰è®¡ç®—æ ¸å¿ƒæœ€å¤§åˆ©ç”¨ç‡ï¼š</p>
<ul>
<li><p><strong>CPU_NUM â‰¤ 1</strong>ï¼šæ¯æ ¸æœ€å¤§åˆ©ç”¨ç‡ 20%</p>
</li>
<li><p><strong>1 &lt; CPU_NUM &lt; 4</strong>ï¼šæ¯æ ¸æœ€å¤§åˆ©ç”¨ç‡ 40%</p>
</li>
<li><p><strong>4 â‰¤ CPU_NUM &lt; 8</strong>ï¼šæ¯æ ¸æœ€å¤§åˆ©ç”¨ç‡ 60%</p>
</li>
<li><p><strong>8 â‰¤ CPU_NUM &lt; 10</strong>ï¼šæ¯æ ¸æœ€å¤§åˆ©ç”¨ç‡ 80%</p>
</li>
<li><p><strong>10 â‰¤ CPU_NUM &lt; 32</strong>ï¼šæ¯æ ¸æœ€å¤§åˆ©ç”¨ç‡ 85%</p>
</li>
<li><p><strong>CPU_NUM â‰¥ 32</strong>ï¼šæ¯æ ¸æœ€å¤§åˆ©ç”¨ç‡ 90%</p>
</li>
</ul>
</li>
</ul>
<p><strong>å†…å­˜èµ„æºé™åˆ¶</strong></p>
<ul>
<li>MongoDB é™åˆ¶ä¸ºä½¿ç”¨æœ€å¤šæœºå™¨å®é™…å†…å­˜çš„ 30%ã€‚</li>
</ul>
<h5 id="7-2-5-2-å®ç°MongoDB-æœºå™¨èµ„æºé™åˆ¶çš„æ–¹æ³•"><a href="#7-2-5-2-å®ç°MongoDB-æœºå™¨èµ„æºé™åˆ¶çš„æ–¹æ³•" class="headerlink" title="7.2.5.2 å®ç°MongoDB æœºå™¨èµ„æºé™åˆ¶çš„æ–¹æ³•"></a>7.2.5.2 å®ç°MongoDB æœºå™¨èµ„æºé™åˆ¶çš„æ–¹æ³•</h5><ul>
<li><p>CPUä½¿ç”¨ç‡é™åˆ¶ï¼šåˆ©ç”¨ systemd é…ç½®çš„ CPUQuota å‚æ•°æ¥é™åˆ¶ CPU æ€»ä½¿ç”¨ç‡ã€‚</p>
</li>
<li><p>å†…å­˜ä½¿ç”¨ç‡é™åˆ¶ï¼šé€šè¿‡ systemd é…ç½®ä¸­çš„ MemoryLimitï¼ˆæ—§ç‰ˆï¼‰å’Œ MemoryMaxï¼ˆæ–°ç‰ˆï¼‰å‚æ•°è®¾ç½® MongoDB å†…å­˜ä½¿ç”¨ä¸Šé™ã€‚ä½¿ç”¨mongodçš„å¯åŠ¨å‚æ•°wiredTigerCacheSizeGBï¼Œæ¥é™åˆ¶mongodbçš„ç¼“å†²åŒºå¤§å°ã€‚</p>
</li>
<li><p>Mongodbç¼“å†²åŒºå¤§å°é™åˆ¶ï¼šä½¿ç”¨ MongoDB å¯åŠ¨å‚æ•° wiredTigerCacheSizeGB æ¥é™åˆ¶ç¼“å†²åŒºå¤§å°ã€‚</p>
</li>
</ul>
<h5 id="7-2-5-3-mongodbçš„serviceæ–‡ä»¶å†…å®¹è®¡ç®—"><a href="#7-2-5-3-mongodbçš„serviceæ–‡ä»¶å†…å®¹è®¡ç®—" class="headerlink" title="7.2.5.3 mongodbçš„serviceæ–‡ä»¶å†…å®¹è®¡ç®—"></a>7.2.5.3 mongodbçš„serviceæ–‡ä»¶å†…å®¹è®¡ç®—</h5><p><strong>ç›®æ ‡ï¼š</strong>æ ¹æ®å½“å‰æœºå™¨èµ„æºä¿¡æ¯ç”Ÿæˆ mongod.service æ–‡ä»¶ã€‚</p>
<p><strong>å†…å®¹åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li><p>è®¡ç®—å‡ºCPU å’Œå†…å­˜ä½¿ç”¨çš„é™åˆ¶é…ç½®ã€‚</p>
</li>
<li><p>è®¡ç®—å‡ºMongoDB å¯åŠ¨å‚æ•°ï¼Œå¦‚ wiredTigerCacheSizeGBï¼Œä»¥æ§åˆ¶ç¼“å†²åŒºå¤§å°ã€‚</p>
</li>
</ul>
<p><strong>å…·ä½“å®ç°ï¼š</strong></p>
<ol>
<li><p><strong>CPUä½¿ç”¨ç‡çš„è®¡ç®—ï¼š</strong></p>
<ol>
<li><p><del>ä½¿ç”¨ grep -c â€œprocessorâ€ &#x2F;proc&#x2F;cpuinfo å‘½ä»¤å¾—åˆ°å½“å‰CPUçš„æ ¸å¿ƒæ•°ï¼Œå¹¶ç»™ cpu_num èµ‹å€¼</del></p>
</li>
<li><p>ä½¿ç”¨ nproc å‘½ä»¤å¾—åˆ°å½“å‰CPUçš„æ ¸å¿ƒæ•°ï¼Œå¹¶ç»™ cpu_num èµ‹å€¼</p>
</li>
<li><p>åˆ¤æ–­CPUçš„æ ¸å¿ƒæ•°æ‰€å¯¹åº”çš„æ ¸å¿ƒä½¿ç”¨ç‡ï¼Œå¹¶ç»™quotientèµ‹å€¼</p>
</li>
<li><p>è®¡ç®—å‡ºCPUQuotaçš„å€¼ï¼šcpu_quota&#x3D;$((${cpu_num} * $quotient))</p>
</li>
</ol>
</li>
<li><p><strong>å†…å­˜é™åˆ¶è®¡ç®—ï¼š</strong></p>
<ol>
<li>æ ¹æ®&#x2F;proc&#x2F;meminfoæ–‡ä»¶ä¸­çš„MemTotalå­—æ®µçš„å€¼å¾—åˆ°æ€»å†…å­˜ï¼Œå¹¶è®¡ç®—å‡ºæ€»å†…å­˜30%çš„å¤§å°ï¼š$(($(awk â€˜&#x2F;MemTotal&#x2F; {print $2}â€™ &#x2F;proc&#x2F;meminfo) * 30 &#x2F; 100))ï¼Œå¹¶èµ‹å€¼ç»™mongodb_limit_mem</li>
</ol>
</li>
<li><p><strong>mongoç¼“å†²åŒºå¤§å°è®¡ç®—ï¼š</strong></p>
<ol>
<li><p>å°†mongodb_limit_memç”±åŸæ¥çš„KBè½¬æ¢æˆä»¥GBä¸ºå•ä½ï¼Œå¹¶å‘ä¸Šå–æ•´</p>
</li>
<li><p>å…·ä½“å®ç°ï¼š</p>
<ol>
<li><p>1 GB &#x3D; 1048576 KB</p>
</li>
<li><p>è®©KBçš„å€¼åŠ ä¸Š1048575ï¼Œè®©å®ƒè¾¾åˆ°ä¸‹ä¸€ä¸ªGBçš„é˜ˆå€¼ï¼Œæˆ–è¾¾åˆ°å½“å‰GBçš„æœ€å¤§å€¼</p>
</li>
<li><p>å†è®©KBçš„å€¼é™¤ä»¥1048576ï¼Œåˆ©ç”¨è®¡ç®—è‡ªåŠ¨å‘ä¸‹å–æ•´çš„æœºåˆ¶å¾—åˆ°KBè½¬æ¢æˆGBç„¶åå‘ä¸Šå–æ•´çš„å€¼</p>
</li>
<li><p>mongodb_limit_mem_GB&#x3D;$(( (mongodb_limit_mem + 1048575) &#x2F; 1048576 ))</p>
</li>
</ol>
</li>
</ol>
</li>
<li><p><strong>å°†è®¡ç®—å¥½çš„å€¼å¡«å…¥mongodbçš„æ¨¡æ¿serviceä¸­å¹¶å¾—åˆ°æœ€ç»ˆçš„serviceæ–‡ä»¶å†…å®¹</strong></p>
</li>
</ol>
<p><strong>mongoçš„serviceæ¨¡æ¿ï¼š</strong></p>
<h5 id="-4"><a href="#-4" class="headerlink" title=""></a></h5><h5 id="7-2-5-4-åŠ¨æ€é…ç½®çš„å®ç°"><a href="#7-2-5-4-åŠ¨æ€é…ç½®çš„å®ç°" class="headerlink" title="7.2.5.4 åŠ¨æ€é…ç½®çš„å®ç°"></a>7.2.5.4 åŠ¨æ€é…ç½®çš„å®ç°</h5><p><strong>æ¦‚è¦</strong>ï¼š</p>
<ol>
<li><p>åœ¨mongodbå¯åŠ¨çš„æ—¶å€™è®¾ç½®ä¸€ä¸ªå‰ç½®æ‰§è¡Œè„šæœ¬</p>
</li>
<li><p>å‰ç½®è„šæœ¬çš„ä½œç”¨ä½¿æ ¹æ®å½“å‰æœºå™¨ç¯å¢ƒç”Ÿæˆmongoçš„serviceå†…å®¹ï¼Œå¹¶ä¸å½“å‰è¢«é…ç½®åˆ°systemdçš„serviceå†…å®¹æ¯”è¾ƒï¼Œå¦‚æœæœ‰å·®å¼‚ï¼Œåˆ™æ›´æ–°systemdä¸Šçš„serviceå†…å®¹ï¼Œå¹¶è°ƒç”¨systemdçš„é…ç½®é‡è½½æ“ä½œï¼Œå¦‚æœæ²¡æœ‰å·®å¼‚ï¼Œåˆ™ä¸ä½œæ“ä½œã€‚</p>
</li>
</ol>
<p><strong>å…·ä½“å®ç°ï¼š</strong></p>
<h2 id="8-é™„ä»¶åŠå‚è€ƒèµ„æ–™"><a href="#8-é™„ä»¶åŠå‚è€ƒèµ„æ–™" class="headerlink" title="8 é™„ä»¶åŠå‚è€ƒèµ„æ–™"></a>8 é™„ä»¶åŠå‚è€ƒèµ„æ–™</h2><p>å¡«å†™æ–‡æ¡£ç›¸å…³çš„é™„ä»¶æˆ–å‚è€ƒèµ„æ–™ã€‚</p>
<p>ã€ä¼å¾®æ–‡æ¡£ã€‘ç ”å‘å‚ä¸æµç¨‹</p>
<p><a target="_blank" rel="noopener" href="https://doc.weixin.qq.com/sheet/e3_AYEAsQYMALY1HrUK7yXQsqdy4wf7K?scode=ABwA9Qd2ABEY9IZnbYAYEAsQYMALY&tab=819xxa">ç ”å‘å‚ä¸æµç¨‹</a></p>
<p><a target="_blank" rel="noopener" href="https://doc.weixin.qq.com/doc/w3_ARkAWAYlAEQthA0ZiCxTuOexfXksQ?scode=ABwA9Qd2ABEpJroZxqARkAWAYlAEQ">ubuntu server 20.04 å®‰è£…æµç¨‹</a></p>
<p><a target="_blank" rel="noopener" href="https://doc.weixin.qq.com/doc/w3_ARkAWAYlAEQAyAAmu0ZTH29vNPcWA?scode=ABwA9Qd2ABE4iZqsuzARkAWAYlAEQ">åŸºäºå®˜æ–¹é•œåƒåˆ¶ä½œåŸºOVAè¿‡ç¨‹</a></p>
<p><a target="_blank" rel="noopener" href="https://doc.weixin.qq.com/mind/m4_ARkAWAYlAEQwHM912uWR3e72MrE63?scode=ABwA9Qd2ABEbo5nbAUARkAWAYlAEQ">CPUæŒ‡ä»¤é›†è°ƒç ”</a></p>
<p><a target="_blank" rel="noopener" href="https://doc.weixin.qq.com/doc/w3_AcwAzgacAIcdOkk7yyKQeOwsSOL0X?scode=ABwA9Qd2ABELAP25QwAcwAzgacAIc">LVMä»‹ç»åŠä½¿ç”¨</a></p>
<p><a target="_blank" rel="noopener" href="https://doc.weixin.qq.com/doc/w3_ARkAWAYlAEQJVecguFrTkaXWFm2Jg?scode=ABwA9Qd2ABE9IioVr6ARkAWAYlAEQ">è½¯ä»¶ä¿æŠ¤éœ€æ±‚æ–‡æ¡£</a></p>
<p><a target="_blank" rel="noopener" href="https://doc.weixin.qq.com/doc/w3_ARkAWAYlAEQk8xh84ZXSBmbtHNEYm?scode=ABwA9Qd2ABEJpM0tXrARkAWAYlAEQ">é•œåƒäº¤ä»˜åŸ¹è®­èµ„æ–™</a></p>
<h3 id="8-1-è¯¦ç»†ä¿®æ”¹å†å²"><a href="#8-1-è¯¦ç»†ä¿®æ”¹å†å²" class="headerlink" title="8.1 è¯¦ç»†ä¿®æ”¹å†å²"></a>8.1 è¯¦ç»†ä¿®æ”¹å†å²</h3><p>2023-11-6ï¼Œå²‘æ€åï¼š</p>
<ul>
<li><p>å¢åŠ 5.2.3.3-5.2.3.5 ä¸‰ä¸ªå°ç« èŠ‚ï¼Œæè¿°æ‰“åŒ…é¡¹ç›®çš„ä»£ç è®¾è®¡</p>
</li>
<li><p>å¢åŠ 7.2.1-7.2.3 ä¸‰ä¸ªå°ç« èŠ‚ï¼Œæè¿°å¯¹å…¶ä»–æ¨¡å—äº§ç”Ÿçš„å½±å“</p>
</li>
<li><p>å¢åŠ 5.2.4.2ä¸€èŠ‚ï¼Œæè¿°å…³äºLVMçš„è®¾è®¡</p>
</li>
</ul>
<p>2023-11-7ï¼Œ å²‘æ€å:</p>
<ul>
<li><p>å°†ä¿ç•™åˆ†åŒºæ˜¾å¼çš„æŒ‚è½½ä¸º&#x2F;oemï¼Œå­˜å‚¨ä¸€äº›oemä¿¡æ¯</p>
</li>
<li><p>ç»§ç»­å®Œå–„7.2éƒ¨åˆ†çš„å†…å®¹</p>
</li>
<li><p>ä¿®æ”¹é¡¹ç›®ç»“æ„ï¼Œå»æ‰install.shå’Œinit.shï¼Œå¢åŠ main.shï¼Œè¡¥å……main.shçš„ç»†èŠ‚</p>
</li>
</ul>
<p>2023-11-9ï¼Œå²‘æ€å</p>
<ul>
<li><p>è¡¥å……æ‰©å®¹è„šæœ¬çš„ç›®çš„</p>
</li>
<li><p>è¡¥å……é™„ä»¶åŠå‚è€ƒèµ„æ–™</p>
</li>
<li><p>äº§å“å’ŒæŠ€æœ¯éƒ¨æ²Ÿé€šåï¼Œç¡®å®šç£ç›˜ç™¾åˆ†æ¯”æ˜¾ç¤ºé‡‡ç”¨æ–¹æ¡ˆ2ï¼ˆæ˜¾ç¤ºæ•°æ®ç›˜å ç”¨ï¼‰</p>
</li>
</ul>
<p>2023-11-14ï¼Œå²‘æ€å</p>
<ul>
<li><p>è¡¥å……mongodbé…ç½®æ–‡ä»¶çš„é£é™©</p>
</li>
<li><p>ç»†åŒ–ovaæ„å»ºç»†èŠ‚</p>
</li>
</ul>
<p>2023-11-15ï¼Œå²‘æ€å</p>
<ul>
<li>æ›´æ–°7.2.5çš„æ–°æ–¹æ¡ˆä¸ç»“è®º</li>
</ul>
<p>2023-11-15ï¼Œè¢è˜å£‘</p>
<ul>
<li>æ–°å¢5.2.1.2ç« èŠ‚</li>
</ul>
<p>2023-11-18ï¼Œæ²™æ±‰è·¯</p>
<ul>
<li>å¢åŠ LVMç›¸å…³å‚è€ƒèµ„æ–™</li>
</ul>
<p>2023-11-20ï¼Œå²‘æ€å</p>
<ul>
<li>æ›´æ–°5.2.3.2å…³äºovaæ–‡ä»¶çš„å¤„ç†æ–¹æ¡ˆï¼šovftool</li>
</ul>
<p>2023-11-22ï¼Œå²‘æ€å</p>
<ul>
<li><p>å°†æ•°æ®åˆ†åŒºä»å›ºå®šçš„60Gæ”¹ä¸ºä½¿ç”¨å‰©ä½™æ‰€æœ‰ç©ºé—´ï¼ˆ60G+ï¼‰</p>
</li>
<li><p>å¢åŠ 5.2.5ç« èŠ‚</p>
</li>
</ul>
<p>2023-11-29 è¢è˜å£‘</p>
<ul>
<li>å¢åŠ 5.3åŠŸèƒ½å®ç°ç« èŠ‚ åŒ…å«5.3.1é•œåƒåˆ¶ä½œçš„ç›¸å…³å®ç°</li>
</ul>
<p>2023-11-30ï¼Œå²‘æ€å</p>
<ul>
<li>æ›´æ–°5.2.4.4, è®¾å®šoemæ–‡ä»¶çš„ç®¡ç†ä½ç½®å’Œç®¡ç†æ–¹å¼</li>
</ul>
<p>2023-12-7ï¼Œå´æ¾è¾¾</p>
<ul>
<li>å¢åŠ 7.2.5ï¼Œå¢åŠ mongodbåŠ¨æ€é…ç½®çš„å®ç°</li>
</ul>
<p>2023-12-7ï¼Œè¢è˜å£‘</p>
<ul>
<li>å¢åŠ 5.3.1.5ï¼Œå¢åŠ å®¹å™¨åˆå§‹åŒ–æ•°æ®åº“å®ç°</li>
</ul>
<p>2023-12-8ï¼Œå²‘æ€å</p>
<ul>
<li><p>æ›´æ–°åŸºé•œåƒçš„éœ€æ±‚è¯´æ˜</p>
</li>
<li><p>å¢åŠ oemæ–‡ä»¶SPç‰ˆæœ¬çš„å«ä¹‰å¤‡æ³¨</p>
</li>
<li><p>å¢åŠ 7.1.3ç« èŠ‚</p>
</li>
</ul>
<p>2023-12-11ï¼Œå²‘æ€å</p>
<ul>
<li>æ›´æ–°å…³äºISOé•œåƒçš„UEFIè¡¥å……è¯´æ˜ï¼Œä¸æ”¯æŒUEFI</li>
</ul>
<p>2023-12-12ï¼Œè¢è˜å£‘</p>
<ul>
<li><p>æ›´æ–°å…³äºgrubå¯†ç å…¼å®¹é—®é¢˜ï¼Œåœ¨5.3.1.2ç« </p>
</li>
<li><p>æ›´æ–°gpgç¦ç”¨uiè¾“å…¥å¯†ç ï¼Œåœ¨5.3.1.4ç« </p>
</li>
<li><p>æ·»åŠ grubé™é»˜å¯åŠ¨ï¼Œåœ¨5.3.1.3ç« </p>
</li>
<li><p>åˆ é™¤sshåˆå§‹åŒ–æ‰“å°è„šæœ¬ï¼Œåœ¨5.3.1.6ç« </p>
</li>
<li><p>ä¿®æ”¹7.1.3è„šæœ¬è·¯å¾„</p>
</li>
</ul>
<p>2023-12-14ï¼Œå²‘æ€å</p>
<ul>
<li><p>&#x2F;user&#x2F;sbin&#x2F;quickstart_network_set.shæ”¹ä¸º&#x2F;user&#x2F;sbin&#x2F;quickstart_network_set</p>
</li>
<li><p>grubå¯†ç æ˜“æ··æ·†çš„å°å†™Lå’Œæ•°å­—1ï¼Œæ”¹ä¸ºå¤§å†™L</p>
</li>
</ul>
<p>2024-01-02ï¼Œè¢è˜å£‘</p>
<ul>
<li>æ·»åŠ isoåˆ¶ä½œovaæµç¨‹ï¼Œåœ¨5.3.2ç« </li>
</ul>
<p>2024-01-03ï¼Œè¢è˜å£‘</p>
<ul>
<li>å¢åŠ é•œåƒå¯åŠ¨ä¸äº†åçš„å¤‡ç”¨æ–¹æ¡ˆ</li>
</ul>
<p>2024-01-15ï¼Œè¢è˜å£‘</p>
<ul>
<li>æ–°å¢5.3.1.7åˆ°5.3.1.9èŠ‚</li>
</ul>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/Linux/" style="color: #ff7d73">Linux</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/%E9%95%9C%E5%83%8F%E4%BA%A4%E4%BB%98/" style="color: #00a596">é•œåƒäº¤ä»˜</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/%E9%83%A8%E7%BD%B2/" style="color: #03a9f4">éƒ¨ç½²</a>
        </span>
        
    </div>
    <a href="/2024/03/07/mdstorage/domain/linux/%E9%95%9C%E5%83%8F%E4%BA%A4%E4%BB%98%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99/" class="go-post">é˜…è¯»å…¨æ–‡</a>
</div>

<div class="post">
    <a href="/2024/03/07/mdstorage/domain/%E6%8B%9B%E8%81%98/%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B8%85%E5%8D%95/">
        <h2 class="post-title">é¢è¯•é¢˜æ¸…å•.md</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/domain/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                domain
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/3/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h2 id="Linux-ç³»ç»Ÿ"><a href="#Linux-ç³»ç»Ÿ" class="headerlink" title="Linux ç³»ç»Ÿ"></a>Linux ç³»ç»Ÿ</h2><h3 id="è¯¦ç»†æè¿°-Linux-ç³»ç»Ÿä¸­ï¼Œå†™å…¥ä¸€ä¸ªæ–‡ä»¶çš„è¿‡ç¨‹"><a href="#è¯¦ç»†æè¿°-Linux-ç³»ç»Ÿä¸­ï¼Œå†™å…¥ä¸€ä¸ªæ–‡ä»¶çš„è¿‡ç¨‹" class="headerlink" title="è¯¦ç»†æè¿° Linux ç³»ç»Ÿä¸­ï¼Œå†™å…¥ä¸€ä¸ªæ–‡ä»¶çš„è¿‡ç¨‹"></a>è¯¦ç»†æè¿° Linux ç³»ç»Ÿä¸­ï¼Œå†™å…¥ä¸€ä¸ªæ–‡ä»¶çš„è¿‡ç¨‹</h3><ol>
<li><strong>ç”¨æˆ·ç©ºé—´æ“ä½œ</strong>:<ul>
<li>åº”ç”¨ç¨‹åºé€šè¿‡è°ƒç”¨æ ‡å‡†åº“ï¼ˆå¦‚ C è¯­è¨€çš„ <code>stdio</code> åº“ï¼‰æˆ–ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ <code>write</code>ï¼‰æ¥è¯·æ±‚å†™å…¥æ•°æ®åˆ°æ–‡ä»¶ã€‚</li>
<li>å¦‚æœä½¿ç”¨çš„æ˜¯æ ‡å‡†åº“å‡½æ•°ï¼ˆå¦‚ <code>fwrite</code>ï¼‰ï¼Œé¦–å…ˆè¿™äº›æ•°æ®å¯èƒ½ä¼šè¢«æš‚å­˜åˆ°åº”ç”¨ç¨‹åºçš„è¾“å‡ºç¼“å†²åŒºä¸­ã€‚å½“ç¼“å†²åŒºæ»¡æˆ–è€…æ˜¾å¼è°ƒç”¨åˆ·æ–°ï¼ˆå¦‚ <code>fflush</code>ï¼‰æ—¶ï¼Œæ ‡å‡†åº“ä¼šè¿›ä¸€æ­¥è°ƒç”¨ç›¸åº”çš„ç³»ç»Ÿè°ƒç”¨æ¥å®é™…æ‰§è¡Œå†™å…¥æ“ä½œã€‚</li>
</ul>
</li>
<li><strong>ç³»ç»Ÿè°ƒç”¨</strong>:<ul>
<li>å½“æ‰§è¡Œå†™å…¥çš„ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ <code>write</code>ï¼‰æ—¶ï¼Œæ§åˆ¶æƒä»ç”¨æˆ·ç©ºé—´ä¼ é€’åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚</li>
<li>å†…æ ¸æ¥æ”¶åˆ°è¿™ä¸ªè°ƒç”¨åï¼Œä¼šè¿›è¡Œå¿…è¦çš„æƒé™æ£€æŸ¥ï¼Œç¡®è®¤è°ƒç”¨è¿›ç¨‹æœ‰æƒå†™å…¥æŒ‡å®šæ–‡ä»¶ã€‚</li>
</ul>
</li>
<li><strong>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰</strong>:<ul>
<li>Linux ä½¿ç”¨è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰ä½œä¸ºæ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼ˆå¦‚ ext4ã€xfsã€btrfs ç­‰ï¼‰çš„æŠ½è±¡å±‚ã€‚VFS è´Ÿè´£å°†é€šç”¨çš„æ–‡ä»¶æ“ä½œè½¬æ¢ä¸ºç‰¹å®šæ–‡ä»¶ç³»ç»Ÿçš„æ“ä½œã€‚</li>
<li>VFS æ ¹æ®æ–‡ä»¶æè¿°ç¬¦æ‰¾åˆ°å¯¹åº”çš„ inodeï¼ˆç´¢å¼•èŠ‚ç‚¹ï¼‰ï¼Œinode åŒ…å«äº†æ–‡ä»¶çš„å…ƒæ•°æ®ä»¥åŠæŒ‡å‘æ–‡ä»¶å®é™…æ•°æ®å—çš„æŒ‡é’ˆã€‚</li>
</ul>
</li>
<li><strong>æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</strong>:<ul>
<li>æ ¹æ® VFS å’Œå…·ä½“æ–‡ä»¶ç³»ç»Ÿçš„æ“ä½œï¼Œæ•°æ®ä¼šè¢«å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ç¼“å†²åŒºã€‚è¿™ä¸€æ­¥å¯èƒ½æ¶‰åŠå°†æ•°æ®æ‹·è´åˆ°å†…æ ¸çš„é¡µé¢ç¼“å­˜ï¼ˆpage cacheï¼‰ã€‚</li>
<li>æ–‡ä»¶ç³»ç»Ÿå¯èƒ½ä¼šæ‰§è¡Œä¸€äº›ä¼˜åŒ–ï¼Œå¦‚åˆå¹¶è¿ç»­çš„å†™å…¥è¯·æ±‚ä»¥å‡å°‘å®é™…çš„ç£ç›˜æ“ä½œã€‚</li>
</ul>
</li>
<li><strong>å†™å›ï¼ˆWrite-backï¼‰</strong>:<ul>
<li>æ•°æ®é¦–å…ˆè¢«å†™å…¥åˆ°ç¼“å†²åŒºä¸­ï¼Œå¹¶åœ¨ä¸€æ®µæ—¶é—´åå¼‚æ­¥å†™å›åˆ°ç£ç›˜ã€‚è¿™ä¸ªæœºåˆ¶å¯ä»¥æé«˜æ€§èƒ½ï¼Œå› ä¸ºå®ƒå‡å°‘äº†ç£ç›˜ I&#x2F;O æ“ä½œçš„æ¬¡æ•°ã€‚</li>
<li>ç³»ç»Ÿä¹Ÿå¯èƒ½é€šè¿‡â€œå†™ç©¿â€ï¼ˆwrite-throughï¼‰ç­–ç•¥ç›´æ¥å†™å…¥ç£ç›˜ï¼Œè¿™å–å†³äºæ–‡ä»¶ç³»ç»Ÿçš„é…ç½®å’Œå…·ä½“æ“ä½œï¼ˆå¦‚ <code>fsync</code> ç³»ç»Ÿè°ƒç”¨ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>ç¡¬ä»¶å±‚é¢</strong>:<ul>
<li>æ•°æ®æœ€ç»ˆé€šè¿‡å­˜å‚¨è®¾å¤‡çš„é©±åŠ¨ç¨‹åºå†™å…¥ç£ç›˜ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯å›ºæ€ç¡¬ç›˜ï¼ˆSSDï¼‰ï¼Œæ•°æ®å®é™…ä¸Šæ˜¯å†™å…¥åˆ° NAND é—ªå­˜å•å…ƒï¼›å¦‚æœæ˜¯ä¼ ç»Ÿçš„æœºæ¢°ç¡¬ç›˜ï¼ˆHDDï¼‰ï¼Œæ•°æ®åˆ™æ˜¯å†™å…¥åˆ°ç£ç›˜çš„ç‰©ç†æ‰‡åŒºã€‚</li>
</ul>
</li>
<li><strong>ç¡®è®¤å†™å…¥å®Œæˆ</strong>:<ul>
<li>ä¸€æ—¦æ•°æ®æˆåŠŸå†™å…¥å­˜å‚¨è®¾å¤‡ï¼Œç›¸åº”çš„ç³»ç»Ÿè°ƒç”¨ä¼šå®Œæˆï¼Œå¹¶å°†æ§åˆ¶æƒè¿”å›ç»™ç”¨æˆ·ç©ºé—´åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶è¿”å›å†™å…¥æ“ä½œçš„çŠ¶æ€ã€‚</li>
</ul>
</li>
</ol>
<h3 id="è¯¦ç»†æè¿°è®¿é—®ä¸€ä¸ªåŸŸååˆ°æµè§ˆå™¨æ˜¾ç¤ºé¡µé¢çš„è¿‡ç¨‹"><a href="#è¯¦ç»†æè¿°è®¿é—®ä¸€ä¸ªåŸŸååˆ°æµè§ˆå™¨æ˜¾ç¤ºé¡µé¢çš„è¿‡ç¨‹" class="headerlink" title="è¯¦ç»†æè¿°è®¿é—®ä¸€ä¸ªåŸŸååˆ°æµè§ˆå™¨æ˜¾ç¤ºé¡µé¢çš„è¿‡ç¨‹"></a>è¯¦ç»†æè¿°è®¿é—®ä¸€ä¸ªåŸŸååˆ°æµè§ˆå™¨æ˜¾ç¤ºé¡µé¢çš„è¿‡ç¨‹</h3><ol>
<li><strong>åŸŸåè§£æ</strong>:<ul>
<li>æµè§ˆå™¨é¦–å…ˆæ£€æŸ¥åŸŸåæ˜¯å¦å·²åœ¨æœ¬åœ°ç¼“å­˜ä¸­è§£æè¿‡ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ç›´æ¥ä½¿ç”¨è¯¥ IP åœ°å€ã€‚å¦‚æœæ²¡æœ‰ï¼Œæµè§ˆå™¨ä¼šå‘èµ·ä¸€ä¸ª DNS (Domain Name System) æŸ¥è¯¢æ¥å°†åŸŸåè½¬æ¢æˆ IP åœ°å€ã€‚è¿™å¯èƒ½æ¶‰åŠå¤šçº§æŸ¥è¯¢ï¼Œä»æœ¬åœ° DNS æœåŠ¡å™¨åˆ°æ ¹ DNS æœåŠ¡å™¨ï¼Œå†åˆ°è´Ÿè´£è¯¥é¡¶çº§åŸŸåï¼ˆTLDï¼‰çš„æœåŠ¡å™¨ï¼Œæœ€åæ˜¯è´Ÿè´£è¯¥å…·ä½“åŸŸåçš„åç§°æœåŠ¡å™¨ã€‚</li>
</ul>
</li>
<li><strong>å»ºç«‹è¿æ¥</strong>:<ul>
<li>æµè§ˆå™¨ä½¿ç”¨è§£æå¾—åˆ°çš„ IP åœ°å€å°è¯•ä¸ç›®æ ‡æœåŠ¡å™¨å»ºç«‹ TCP è¿æ¥ã€‚è¿™ä¸€è¿‡ç¨‹é€šå¸¸æ¶‰åŠä¸‰æ¬¡æ¡æ‰‹ï¼Œç¡®ä¿åŒæ–¹æ­£ç¡®å»ºç«‹è¿æ¥ã€‚</li>
<li>å¦‚æœç½‘ç«™ä½¿ç”¨ HTTPSï¼Œè¿˜éœ€è¦è¿›è¡Œ SSL&#x2F;TLS æ¡æ‰‹ï¼Œä»¥å®‰å…¨åœ°åŠ å¯†ä¹‹åçš„é€šä¿¡ã€‚</li>
</ul>
</li>
<li><strong>å‘é€ HTTP è¯·æ±‚</strong>:<ul>
<li>ä¸€æ—¦å»ºç«‹äº† TCP è¿æ¥ï¼ˆå’Œå¯é€‰çš„ SSL&#x2F;TLS åŠ å¯†å±‚ï¼‰ï¼Œæµè§ˆå™¨å°±ä¼šå‘æœåŠ¡å™¨å‘é€ HTTP è¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚åŒ…æ‹¬è¯·æ±‚è¡Œï¼ˆå¦‚ <code>GET / HTTP/1.1</code>ï¼‰ï¼Œè¯·æ±‚å¤´ï¼ˆåŒ…æ‹¬ç”¨æˆ·ä»£ç†ã€æ¥å—çš„å†…å®¹ç±»å‹ç­‰ï¼‰ï¼Œä»¥åŠå¯é€‰çš„è¯·æ±‚ä½“ã€‚</li>
</ul>
</li>
<li><strong>æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶å“åº”</strong>:<ul>
<li>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šæ ¹æ®è¯·æ±‚çš„èµ„æºï¼ˆå¦‚ç½‘é¡µã€å›¾ç‰‡ç­‰ï¼‰è¿›è¡Œå¤„ç†ã€‚è¿™å¯èƒ½æ¶‰åŠåˆ°æœåŠ¡å™¨ç«¯çš„è„šæœ¬æˆ–åº”ç”¨ç¨‹åºçš„æ‰§è¡Œï¼Œå¦‚æ•°æ®åº“æŸ¥è¯¢æˆ–åŠ¨æ€å†…å®¹çš„ç”Ÿæˆã€‚</li>
<li>å¤„ç†å®Œæˆåï¼ŒæœåŠ¡å™¨ä¼šå°†å“åº”æ•°æ®ï¼ˆå¦‚ HTML é¡µé¢ï¼‰ä»¥åŠå“åº”å¤´ï¼ˆçŠ¶æ€ç ã€å†…å®¹ç±»å‹ç­‰ï¼‰å‘é€å›æµè§ˆå™¨ã€‚</li>
</ul>
</li>
<li><strong>æµè§ˆå™¨å¤„ç†å“åº”</strong>:<ul>
<li>æµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡å™¨çš„å“åº”æ•°æ®åï¼Œé¦–å…ˆä¼šæ£€æŸ¥çŠ¶æ€ç ã€‚å¦‚æœæ˜¯æˆåŠŸçš„å“åº”ï¼ˆå¦‚ 200 OKï¼‰ï¼Œæµè§ˆå™¨ä¼šç»§ç»­è§£æè¿”å›çš„å†…å®¹ã€‚</li>
<li>æµè§ˆå™¨è§£æ HTML å†…å®¹ï¼Œå¹¶æ ¹æ®éœ€è¦å‘èµ·é¢å¤–çš„è¯·æ±‚æ¥è·å–åµŒå…¥èµ„æºï¼ˆå¦‚ CSS æ–‡ä»¶ã€JavaScript è„šæœ¬ã€å›¾ç‰‡ç­‰ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>æ¸²æŸ“é¡µé¢</strong>:<ul>
<li>æµè§ˆå™¨æ ¹æ® HTML å’Œ CSS æ„å»º DOM (Document Object Model) æ ‘å’Œ CSSOM (CSS Object Model) æ ‘ï¼Œç„¶åå°†å®ƒä»¬åˆå¹¶æˆæ¸²æŸ“æ ‘ã€‚</li>
<li>æµè§ˆå™¨æ ¹æ®æ¸²æŸ“æ ‘æ¥å¸ƒå±€é¡µé¢ï¼Œè®¡ç®—æ¯ä¸ªå…ƒç´ çš„å°ºå¯¸å’Œä½ç½®ã€‚</li>
<li>æœ€åï¼Œæµè§ˆå™¨ç»˜åˆ¶é¡µé¢å†…å®¹åˆ°å±å¹•ä¸Šã€‚</li>
</ul>
</li>
<li><strong>JavaScript æ‰§è¡Œ</strong>:<ul>
<li>å¦‚æœé¡µé¢åŒ…å« JavaScriptï¼Œæµè§ˆå™¨è¿˜ä¼šè§£æå’Œæ‰§è¡Œè„šæœ¬ã€‚è¿™å¯èƒ½ä¼šä¿®æ”¹ DOMï¼Œè§¦å‘é‡æ–°æ¸²æŸ“ã€‚</li>
</ul>
</li>
</ol>
<h3 id="è¯¦ç»†æè¿°åœ¨ä¸¤ä¸ªLinuxç³»ç»Ÿä¸­åŒæ–¹å‘é€æ¥å—-TCP-è¯·æ±‚çš„è¿‡ç¨‹"><a href="#è¯¦ç»†æè¿°åœ¨ä¸¤ä¸ªLinuxç³»ç»Ÿä¸­åŒæ–¹å‘é€æ¥å—-TCP-è¯·æ±‚çš„è¿‡ç¨‹" class="headerlink" title="è¯¦ç»†æè¿°åœ¨ä¸¤ä¸ªLinuxç³»ç»Ÿä¸­åŒæ–¹å‘é€æ¥å— TCP è¯·æ±‚çš„è¿‡ç¨‹"></a>è¯¦ç»†æè¿°åœ¨ä¸¤ä¸ªLinuxç³»ç»Ÿä¸­åŒæ–¹å‘é€æ¥å— TCP è¯·æ±‚çš„è¿‡ç¨‹</h3><h4 id="1-TCP-ä¸‰æ¬¡æ¡æ‰‹ï¼ˆå»ºç«‹è¿æ¥ï¼‰"><a href="#1-TCP-ä¸‰æ¬¡æ¡æ‰‹ï¼ˆå»ºç«‹è¿æ¥ï¼‰" class="headerlink" title="1. TCP ä¸‰æ¬¡æ¡æ‰‹ï¼ˆå»ºç«‹è¿æ¥ï¼‰"></a>1. TCP ä¸‰æ¬¡æ¡æ‰‹ï¼ˆå»ºç«‹è¿æ¥ï¼‰</h4><ol>
<li><strong>SYN å‘é€</strong>:<ul>
<li>ä¸»åŠ¨æ–¹ï¼ˆå®¢æˆ·ç«¯ï¼‰å‘é€ä¸€ä¸ª SYNï¼ˆåŒæ­¥åºåˆ—ç¼–å·ï¼‰æŠ¥æ–‡ç»™è¢«åŠ¨æ–¹ï¼ˆæœåŠ¡å™¨ï¼‰ï¼Œè¡¨ç¤ºå¼€å§‹å»ºç«‹ä¸€ä¸ªæ–°çš„è¿æ¥ã€‚è¿™ä¸ª SYN æŠ¥æ–‡åŒ…å«ä¸€ä¸ªå®¢æˆ·ç«¯é€‰æ‹©çš„åˆå§‹åºåˆ—å·ï¼ˆISNï¼‰ã€‚</li>
<li>æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯è¿›å…¥ SYN-SENT çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><strong>SYN-ACK æ¥æ”¶</strong>:<ul>
<li>æœåŠ¡å™¨æ”¶åˆ° SYN æŠ¥æ–‡åï¼Œä¼šè¿”å›ä¸€ä¸ª SYN-ACK æŠ¥æ–‡ã€‚è¿™ä¸ªæŠ¥æ–‡åŒ…å«æœåŠ¡å™¨è‡ªå·±çš„åˆå§‹åºåˆ—å·ï¼Œä»¥åŠå¯¹å®¢æˆ·ç«¯ ISN çš„ç¡®è®¤ï¼ˆå®¢æˆ·ç«¯ ISN+1ï¼‰ã€‚</li>
<li>æœåŠ¡å™¨æ­¤æ—¶è¿›å…¥ SYN-RECEIVED çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><strong>ACK å‘é€</strong>:<ul>
<li>å®¢æˆ·ç«¯æ”¶åˆ° SYN-ACK åï¼Œå‘é€ä¸€ä¸ª ACKï¼ˆç¡®è®¤ï¼‰æŠ¥æ–‡ç»™æœåŠ¡å™¨ï¼Œç¡®è®¤å·ä¸ºæœåŠ¡å™¨ ISN+1ã€‚</li>
<li>å‘é€å®Œè¿™ä¸ª ACK æŠ¥æ–‡åï¼Œå®¢æˆ·ç«¯è¿›å…¥ ESTABLISHED çŠ¶æ€ã€‚æœåŠ¡å™¨åœ¨æ”¶åˆ°è¿™ä¸ª ACK åä¹Ÿè¿›å…¥ ESTABLISHED çŠ¶æ€ã€‚</li>
<li>æ­¤æ—¶ï¼ŒTCP è¿æ¥å»ºç«‹å®Œæˆï¼ŒåŒæ–¹å¯ä»¥å¼€å§‹æ•°æ®ä¼ è¾“ã€‚</li>
</ul>
</li>
</ol>
<h4 id="2-æ•°æ®ä¼ è¾“"><a href="#2-æ•°æ®ä¼ è¾“" class="headerlink" title="2. æ•°æ®ä¼ è¾“"></a>2. æ•°æ®ä¼ è¾“</h4><ul>
<li>ä¸€æ—¦ TCP è¿æ¥å»ºç«‹ï¼Œä¸¤ä¸ª Linux ç³»ç»Ÿå¯ä»¥å¼€å§‹åŒå‘æ•°æ®ä¼ è¾“ã€‚åº”ç”¨æ•°æ®è¢«å°è£…åœ¨ TCP æ®µä¸­ï¼Œæ¯ä¸ª TCP æ®µéƒ½åŒ…å«åºåˆ—å·å’Œç¡®è®¤å·ï¼Œä»¥ç¡®ä¿æ•°æ®çš„å¯é ä¼ è¾“å’Œé¡ºåºåˆ°è¾¾ã€‚</li>
<li>TCP æä¾›æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œç¡®ä¿ç½‘ç»œæ¡ä»¶å˜åŒ–æ—¶è°ƒæ•´æ•°æ®å‘é€é€Ÿç‡ï¼Œä¼˜åŒ–æ€§èƒ½å’Œèµ„æºåˆ©ç”¨ã€‚</li>
</ul>
<h4 id="3-TCP-å››æ¬¡æŒ¥æ‰‹ï¼ˆæ–­å¼€è¿æ¥ï¼‰"><a href="#3-TCP-å››æ¬¡æŒ¥æ‰‹ï¼ˆæ–­å¼€è¿æ¥ï¼‰" class="headerlink" title="3. TCP å››æ¬¡æŒ¥æ‰‹ï¼ˆæ–­å¼€è¿æ¥ï¼‰"></a>3. TCP å››æ¬¡æŒ¥æ‰‹ï¼ˆæ–­å¼€è¿æ¥ï¼‰</h4><ol>
<li><strong>FIN å‘é€</strong>:<ul>
<li>å½“ä¸€æ–¹ï¼ˆå‡è®¾ä¸ºå®¢æˆ·ç«¯ï¼‰å®Œæˆæ•°æ®å‘é€åï¼Œå®ƒä¼šå‘é€ä¸€ä¸ª FIN æŠ¥æ–‡ç»™æœåŠ¡å™¨ï¼Œè¡¨ç¤ºæ²¡æœ‰æ•°æ®å‘é€äº†ï¼Œè¯·æ±‚å…³é—­è¿æ¥ã€‚</li>
<li>å®¢æˆ·ç«¯è¿›å…¥ FIN-WAIT-1 çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><strong>ACK æ¥æ”¶</strong>:<ul>
<li>æœåŠ¡å™¨æ”¶åˆ° FIN æŠ¥æ–‡åï¼Œå‘é€ä¸€ä¸ª ACK æŠ¥æ–‡ä½œä¸ºå›åº”ï¼Œç¡®è®¤å·ä¸ºå®¢æˆ·ç«¯çš„ FIN åºåˆ—å·+1ã€‚</li>
<li>æœåŠ¡å™¨æ­¤æ—¶è¿›å…¥ CLOSE-WAIT çŠ¶æ€ï¼Œå®¢æˆ·ç«¯æ”¶åˆ° ACK åè¿›å…¥ FIN-WAIT-2 çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><strong>FIN å‘é€ï¼ˆæœåŠ¡å™¨ç«¯ï¼‰</strong>:<ul>
<li>æœåŠ¡å™¨å®Œæˆå…¶æ•°æ®å‘é€åï¼Œä¹Ÿå‘é€ä¸€ä¸ª FIN æŠ¥æ–‡ç»™å®¢æˆ·ç«¯ï¼Œè¯·æ±‚å…³é—­è¿æ¥ã€‚</li>
<li>æœåŠ¡å™¨è¿›å…¥ LAST-ACK çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><strong>ACK æ¥æ”¶</strong>:<ul>
<li>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ FIN æŠ¥æ–‡åï¼Œå‘é€ä¸€ä¸ª ACK æŠ¥æ–‡ä½œä¸ºå›åº”ï¼Œç¡®è®¤å·ä¸ºæœåŠ¡å™¨çš„ FIN åºåˆ—å·+1ã€‚</li>
<li>å®¢æˆ·ç«¯è¿›å…¥ TIME-WAIT çŠ¶æ€ï¼Œç­‰å¾…è¶³å¤Ÿçš„æ—¶é—´ä»¥ç¡®ä¿æœåŠ¡å™¨æ¥æ”¶åˆ°æœ€ç»ˆçš„ ACK æŠ¥æ–‡ï¼Œç„¶åå…³é—­è¿æ¥</li>
</ul>
</li>
</ol>
<h3 id="ä¸€ä¸ª-tcp-è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œçš„ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹"><a href="#ä¸€ä¸ª-tcp-è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œçš„ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹" class="headerlink" title="ä¸€ä¸ª tcp è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œçš„ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹"></a>ä¸€ä¸ª tcp è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œçš„ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹</h3><h4 id="1-å»ºç«‹è¿æ¥"><a href="#1-å»ºç«‹è¿æ¥" class="headerlink" title="1. å»ºç«‹è¿æ¥"></a>1. å»ºç«‹è¿æ¥</h4><h5 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h5><ol>
<li><strong><code>socket()</code></strong>:<ul>
<li>è°ƒç”¨ <code>socket()</code> åˆ›å»ºä¸€ä¸ªæ–°çš„å¥—æ¥å­—ã€‚è¿™æ˜¯ä¸ç½‘ç»œé€šä¿¡çš„ç«¯ç‚¹ï¼Œç”¨äºå‘é€å’Œæ¥æ”¶æ•°æ®ã€‚</li>
</ul>
</li>
<li><strong><code>connect()</code></strong>:<ul>
<li>ä½¿ç”¨ <code>connect()</code> ç³»ç»Ÿè°ƒç”¨å¹¶æŒ‡å®šæœåŠ¡å™¨çš„åœ°å€å’Œç«¯å£æ¥å°è¯•å»ºç«‹åˆ°æœåŠ¡å™¨çš„è¿æ¥ã€‚è¿™å°†å¯åŠ¨ TCP ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ã€‚</li>
<li>å®¢æˆ·ç«¯é¦–å…ˆå‘é€ SYN åŒ…ç»™æœåŠ¡å™¨ï¼ŒçŠ¶æ€å˜ä¸º SYN-SENTã€‚</li>
</ul>
</li>
</ol>
<h5 id="æœåŠ¡å™¨"><a href="#æœåŠ¡å™¨" class="headerlink" title="æœåŠ¡å™¨"></a>æœåŠ¡å™¨</h5><ol>
<li><strong><code>socket()</code></strong>:<ul>
<li>åŒæ ·è°ƒç”¨ <code>socket()</code> åˆ›å»ºä¸€ä¸ªå¥—æ¥å­—ã€‚</li>
</ul>
</li>
<li><strong><code>bind()</code></strong>:<ul>
<li>è°ƒç”¨ <code>bind()</code> å°†å¥—æ¥å­—ç»‘å®šåˆ°ä¸€ä¸ªæœ¬åœ°åœ°å€å’Œç«¯å£ä¸Šã€‚è¿™é€šå¸¸æ˜¯æœåŠ¡å™¨ç›‘å¬å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚çš„ç«¯å£ã€‚</li>
</ul>
</li>
<li><strong><code>listen()</code></strong>:<ul>
<li>é€šè¿‡ <code>listen()</code> å‘Šè¯‰ç³»ç»Ÿè¯¥å¥—æ¥å­—æ˜¯æœåŠ¡å™¨çš„ç›‘å¬å¥—æ¥å­—ï¼Œå‡†å¤‡æ¥å—å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚ã€‚</li>
</ul>
</li>
<li><strong><code>accept()</code></strong>:<ul>
<li>æœåŠ¡å™¨è°ƒç”¨ <code>accept()</code> é˜»å¡ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚å½“æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„ SYN è¯·æ±‚åï¼ŒæœåŠ¡å™¨å‘é€ SYN-ACK å“åº”ï¼Œå¹¶è¿›å…¥ SYN-RECEIVED çŠ¶æ€ã€‚ä¸€æ—¦å®¢æˆ·ç«¯å›åº” ACKï¼Œ<code>accept()</code> è¿”å›ï¼ŒæœåŠ¡å™¨è¿›å…¥ ESTABLISHED çŠ¶æ€ï¼Œæ­¤æ—¶ TCP è¿æ¥å»ºç«‹ã€‚</li>
</ul>
</li>
</ol>
<h4 id="2-æ•°æ®ä¼ è¾“-1"><a href="#2-æ•°æ®ä¼ è¾“-1" class="headerlink" title="2. æ•°æ®ä¼ è¾“"></a>2. æ•°æ®ä¼ è¾“</h4><ul>
<li><strong><code>write()</code> &#x2F; <code>send()</code></strong>:<ul>
<li>åœ¨è¿æ¥å»ºç«‹åï¼ŒåŒæ–¹å¯ä»¥ä½¿ç”¨ <code>write()</code> æˆ– <code>send()</code> ç³»ç»Ÿè°ƒç”¨å‘é€æ•°æ®ã€‚è¿™äº›è°ƒç”¨å°†åº”ç”¨ç¨‹åºçš„æ•°æ®å†™å…¥ TCP å¥—æ¥å­—ï¼Œç”± TCP åè®®å¤„ç†æ•°æ®çš„åˆ†æ®µã€å°è£…å’Œå‘é€ã€‚</li>
</ul>
</li>
<li><strong><code>read()</code> &#x2F; <code>recv()</code></strong>:<ul>
<li>å¯¹åº”åœ°ï¼Œä½¿ç”¨ <code>read()</code> æˆ– <code>recv()</code> ç³»ç»Ÿè°ƒç”¨æ¥æ¥æ”¶ä»å¯¹æ–¹å‘é€è¿‡æ¥çš„æ•°æ®ã€‚è¿™äº›è°ƒç”¨ä» TCP å¥—æ¥å­—è¯»å–æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰å¯ç”¨æ•°æ®ï¼Œè°ƒç”¨ä¼šé˜»å¡ï¼Œç›´åˆ°æœ‰æ•°æ®åˆ°è¾¾ã€‚</li>
</ul>
</li>
</ul>
<h4 id="3-æ–­å¼€è¿æ¥"><a href="#3-æ–­å¼€è¿æ¥" class="headerlink" title="3. æ–­å¼€è¿æ¥"></a>3. æ–­å¼€è¿æ¥</h4><h5 id="å‘èµ·å…³é—­çš„ä¸€æ–¹"><a href="#å‘èµ·å…³é—­çš„ä¸€æ–¹" class="headerlink" title="å‘èµ·å…³é—­çš„ä¸€æ–¹"></a>å‘èµ·å…³é—­çš„ä¸€æ–¹</h5><ol>
<li><code>close()</code> &#x2F; <code>shutdown()</code>:<ul>
<li>å½“é€šä¿¡å®Œæˆï¼Œä¸€æ–¹ï¼ˆå‡è®¾ä¸ºå®¢æˆ·ç«¯ï¼‰ä½¿ç”¨ <code>close()</code> æˆ– <code>shutdown()</code> ç³»ç»Ÿè°ƒç”¨æ¥å…³é—­å¥—æ¥å­—ã€‚è¿™ä¼šå¯¼è‡´å‘é€ä¸€ä¸ª FIN åŒ…ç»™å¯¹æ–¹ï¼Œå¼€å§‹ TCP å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ã€‚</li>
</ul>
</li>
</ol>
<h5 id="æ¥æ”¶-FIN-çš„ä¸€æ–¹"><a href="#æ¥æ”¶-FIN-çš„ä¸€æ–¹" class="headerlink" title="æ¥æ”¶ FIN çš„ä¸€æ–¹"></a>æ¥æ”¶ FIN çš„ä¸€æ–¹</h5><ul>
<li>æœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„ FIN åŒ…åï¼Œå†…æ ¸é€šçŸ¥åº”ç”¨ç¨‹åºå¥—æ¥å­—å…³é—­ï¼ˆå¦‚æœåº”ç”¨ç¨‹åºé˜»å¡åœ¨ <code>read()</code> è°ƒç”¨ä¸­ï¼Œåˆ™ <code>read()</code> è¿”å›0ï¼Œè¡¨ç¤ºEOFï¼‰ã€‚æ­¤æ—¶ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥è°ƒç”¨ <code>close()</code> æˆ– <code>shutdown()</code> æ¥å…³é—­è¿æ¥å¹¶å‘é€ FIN åŒ…ç»™å®¢æˆ·ç«¯ã€‚</li>
</ul>
<h4 id="4-æ¸…ç†"><a href="#4-æ¸…ç†" class="headerlink" title="4. æ¸…ç†"></a>4. æ¸…ç†</h4><ul>
<li>åœ¨å››æ¬¡æŒ¥æ‰‹åï¼Œå½“åŒæ–¹éƒ½å‘é€å¹¶ç¡®è®¤ FIN åŒ…ï¼ŒTCP è¿æ¥è¢«å½»åº•å…³é—­ï¼Œæ“ä½œç³»ç»Ÿä¼šæ¸…ç†ä¸è¯¥è¿æ¥ç›¸å…³çš„èµ„æºã€‚</li>
</ul>
<h3 id="è¯¦ç»†æè¿°-Linuxç³»ç»Ÿä¸­-epoll-å¤šè·¯å¤ç”¨æœºåˆ¶å’Œå…³é”®åŸç†"><a href="#è¯¦ç»†æè¿°-Linuxç³»ç»Ÿä¸­-epoll-å¤šè·¯å¤ç”¨æœºåˆ¶å’Œå…³é”®åŸç†" class="headerlink" title="è¯¦ç»†æè¿° Linuxç³»ç»Ÿä¸­ epoll å¤šè·¯å¤ç”¨æœºåˆ¶å’Œå…³é”®åŸç†"></a>è¯¦ç»†æè¿° Linuxç³»ç»Ÿä¸­ epoll å¤šè·¯å¤ç”¨æœºåˆ¶å’Œå…³é”®åŸç†</h3><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œ<code>epoll</code>æ˜¯ä¸€ç§é«˜æ•ˆçš„I&#x2F;Oäº‹ä»¶é€šçŸ¥æœºåˆ¶ï¼Œç‰¹åˆ«é€‚ç”¨äºå¤„ç†å¤§é‡å¹¶å‘è¿æ¥çš„æœåŠ¡å™¨ç¨‹åºã€‚ä¸ä¼ ç»Ÿçš„å¤šè·¯å¤ç”¨æœºåˆ¶å¦‚<code>select</code>å’Œ<code>poll</code>ç›¸æ¯”ï¼Œ<code>epoll</code>æä¾›äº†æ›´å¥½çš„æ‰©å±•æ€§å’Œæ€§èƒ½ï¼Œä¸»è¦å› ä¸ºå®ƒèƒ½å¤Ÿé¿å…<code>select</code>å’Œ<code>poll</code>ä¸­çš„ä¸€äº›å›ºæœ‰é™åˆ¶å’Œæ€§èƒ½ç“¶é¢ˆã€‚</p>
<h4 id="å…³é”®åŸç†å’Œç‰¹æ€§"><a href="#å…³é”®åŸç†å’Œç‰¹æ€§" class="headerlink" title="å…³é”®åŸç†å’Œç‰¹æ€§"></a>å…³é”®åŸç†å’Œç‰¹æ€§</h4><ol>
<li><p><strong>æ•ˆç‡ä¸å¯æ‰©å±•æ€§</strong>ï¼š</p>
<ul>
<li><code>epoll</code>é€šè¿‡ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•ç®¡ç†å¤§é‡çš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆFDï¼‰ã€‚å®ƒä½¿ç”¨ä¸€ä¸ªçº¢é»‘æ ‘ï¼ˆä¸€ç§è‡ªå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼‰æ¥å­˜å‚¨æ‰€æœ‰æ­£åœ¨ç›‘è§†çš„FDsï¼Œè¿™æ ·æŸ¥æ‰¾ã€æ·»åŠ æˆ–åˆ é™¤FDsçš„æ“ä½œéƒ½å¯ä»¥åœ¨å¯¹æ•°æ—¶é—´å†…å®Œæˆã€‚ä¸ä¹‹ç›¸æ¯”ï¼Œ<code>select</code>å’Œ<code>poll</code>éœ€è¦éå†æ•´ä¸ªFDé›†åˆæ¥æ£€æŸ¥çŠ¶æ€ï¼Œæ•ˆç‡éšç€FDæ•°é‡çš„å¢åŠ è€Œçº¿æ€§ä¸‹é™ã€‚</li>
</ul>
</li>
<li><p><strong>äº‹ä»¶é©±åŠ¨</strong>ï¼š</p>
<ul>
<li><code>epoll</code>æ˜¯åŸºäºäº‹ä»¶çš„ï¼Œå®ƒåªå¯¹æ´»åŠ¨çš„FDè¿›è¡Œæ“ä½œã€‚å½“ä¸€ä¸ªæˆ–å¤šä¸ªFDçŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>epoll</code>ä¼šå°†è¿™äº›æ´»åŠ¨FDæ·»åŠ åˆ°ä¸€ä¸ªå°±ç»ªåˆ—è¡¨ä¸­ï¼Œåº”ç”¨ç¨‹åºåªéœ€å¤„ç†è¿™ä¸ªåˆ—è¡¨ä¸­çš„FDã€‚è¿™ç§æ–¹å¼é¿å…äº†åœ¨å¤§é‡FDä¸­è½®è¯¢å¯»æ‰¾é‚£äº›çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„FDï¼Œä»è€Œå¤§å¤§æé«˜äº†æ•ˆç‡ã€‚</li>
</ul>
</li>
<li><p><strong>ä¸¤ç§å·¥ä½œæ¨¡å¼</strong>ï¼š</p>
<ul>
<li><code>epoll</code>æ”¯æŒä¸¤ç§å·¥ä½œæ¨¡å¼ï¼šè¾¹ç¼˜è§¦å‘ï¼ˆETï¼ŒEdge Triggeredï¼‰å’Œæ°´å¹³è§¦å‘ï¼ˆLTï¼ŒLevel Triggeredï¼‰ã€‚<ul>
<li><strong>æ°´å¹³è§¦å‘ï¼ˆLTï¼‰</strong>ï¼šè¿™æ˜¯é»˜è®¤æ¨¡å¼ï¼Œå½“FDå°±ç»ªæ—¶ï¼Œ<code>epoll_wait</code>ä¼šè¿”å›è¯¥FDï¼Œè€Œä¸”åªè¦è¿™ä¸ªFDä»ç„¶å¤„äºå°±ç»ªçŠ¶æ€ï¼Œ<code>epoll_wait</code>ä¼šå†æ¬¡æŠ¥å‘Šå®ƒã€‚</li>
<li><strong>è¾¹ç¼˜è§¦å‘ï¼ˆETï¼‰</strong>ï¼šåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œåªæœ‰FDçŠ¶æ€ä»ä¸å¯ç”¨å˜ä¸ºå¯ç”¨ï¼Œæˆ–è€…æœ‰æ›´å¤šæ•°æ®å¯è¯»å†™æ—¶ï¼Œ<code>epoll_wait</code>æ‰ä¼šè¿”å›FDã€‚è¿™è¦æ±‚åº”ç”¨ç¨‹åºå¿…é¡»å¤„ç†æ‰€æœ‰çš„æ•°æ®ï¼Œç›´åˆ°æ²¡æœ‰æ›´å¤šå¯ç”¨ä¸ºæ­¢ï¼Œå› ä¸ºå†æ¬¡çŠ¶æ€å˜åŒ–ä¹‹å‰ï¼Œ<code>epoll_wait</code>ä¸ä¼šå†æ¬¡æŠ¥å‘Šè¯¥FDã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>ä¸€æ¬¡æ³¨å†Œï¼Œå¤šæ¬¡ä½¿ç”¨</strong>ï¼š</p>
<ul>
<li><code>epoll</code>å…è®¸åº”ç”¨ç¨‹åºåªæ³¨å†Œä¸€æ¬¡FDï¼Œé™¤éFDçš„ç›‘å¬äº‹ä»¶å‘ç”Ÿå˜åŒ–ï¼Œå¦åˆ™æ— éœ€é‡æ–°æ³¨å†Œã€‚è¿™ä¸<code>select</code>å’Œ<code>poll</code>æ¯æ¬¡è°ƒç”¨æ—¶éƒ½éœ€è¦é‡æ–°æ„å»ºFDé›†çš„æ–¹å¼å½¢æˆé²œæ˜å¯¹æ¯”ã€‚</li>
</ul>
</li>
</ol>
<h4 id="ä½¿ç”¨è¿‡ç¨‹"><a href="#ä½¿ç”¨è¿‡ç¨‹" class="headerlink" title="ä½¿ç”¨è¿‡ç¨‹"></a>ä½¿ç”¨è¿‡ç¨‹</h4><p><code>epoll</code>çš„ä½¿ç”¨é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li><p><strong>åˆ›å»ºepollå®ä¾‹</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨<code>epoll_create</code>å‡½æ•°åˆ›å»ºä¸€ä¸ªepollå®ä¾‹ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œç”¨äºåç»­æ‰€æœ‰çš„<code>epoll</code>æ“ä½œã€‚</li>
</ul>
</li>
<li><p><strong>æ³¨å†Œæ„Ÿå…´è¶£çš„äº‹ä»¶</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>epoll_ctl</code>æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤è¦ç›‘æ§çš„æ–‡ä»¶æè¿°ç¬¦åŠå…¶å¯¹åº”çš„äº‹ä»¶ã€‚è¿™äº›äº‹ä»¶å¯ä»¥æ˜¯è¯»å°±ç»ªã€å†™å°±ç»ªç­‰ã€‚</li>
</ul>
</li>
<li><p><strong>ç­‰å¾…äº‹ä»¶å‘ç”Ÿ</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨<code>epoll_wait</code>ç­‰å¾…ä¸€ä¸ªæˆ–å¤šä¸ªFDä¸Šçš„äº‹ä»¶å‘ç”Ÿã€‚<code>epoll_wait</code>å¯ä»¥æŒ‡å®šè¶…æ—¶æ—¶é—´ï¼Œä»¥é˜²åœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰ä»»ä½•äº‹ä»¶å‘ç”Ÿã€‚</li>
</ul>
</li>
<li><p><strong>å¤„ç†å°±ç»ªçš„äº‹ä»¶</strong>ï¼š</p>
<ul>
<li><code>epoll_wait</code>è¿”å›æ—¶ï¼Œä¼šæä¾›ä¸€ä¸ªäº‹ä»¶åˆ—è¡¨ï¼Œåº”ç”¨ç¨‹åºéå†è¿™ä¸ªåˆ—è¡¨ï¼Œå¤„ç†æ‰€æœ‰å°±ç»ªçš„äº‹ä»¶ã€‚</li>
</ul>
</li>
</ol>
<h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul>
<li><strong>é«˜æ•ˆ</strong>ï¼šå¯¹äºå¤§è§„æ¨¡FDé›†åˆï¼Œ<code>epoll</code>æä¾›äº†ä¼˜è¶Šçš„æ€§èƒ½ã€‚</li>
<li><strong>å¯æ‰©å±•</strong>ï¼š<code>epoll</code>çš„æ€§èƒ½ä¸ä¼šéšç€FDæ•°é‡çš„å¢åŠ è€Œæ˜¾è‘—ä¸‹é™ã€‚</li>
<li><strong>çµæ´»</strong>ï¼šæ”¯æŒè¾¹ç¼˜è§¦å‘å’Œæ°´å¹³è§¦å‘ï¼Œé€‚åº”ä¸åŒ</li>
</ul>
<h3 id="æè¿°-epoll-æœºåˆ¶ä¸­è¿›è¡Œç½‘ç»œè¯·æ±‚å¤šè·¯å¤ç”¨çš„ä¸»æµç¨‹"><a href="#æè¿°-epoll-æœºåˆ¶ä¸­è¿›è¡Œç½‘ç»œè¯·æ±‚å¤šè·¯å¤ç”¨çš„ä¸»æµç¨‹" class="headerlink" title="æè¿° epoll æœºåˆ¶ä¸­è¿›è¡Œç½‘ç»œè¯·æ±‚å¤šè·¯å¤ç”¨çš„ä¸»æµç¨‹"></a>æè¿° epoll æœºåˆ¶ä¸­è¿›è¡Œç½‘ç»œè¯·æ±‚å¤šè·¯å¤ç”¨çš„ä¸»æµç¨‹</h3><p>ä½¿ç”¨ <code>epoll</code> æœºåˆ¶è¿›è¡Œç½‘ç»œè¯·æ±‚å¤šè·¯å¤ç”¨æ¶‰åŠåˆ°åˆ›å»º <code>epoll</code> å®ä¾‹ã€å‘ <code>epoll</code> å®ä¾‹æ³¨å†Œæ„Ÿå…´è¶£çš„äº‹ä»¶ï¼ˆå¦‚å¯è¯»ã€å¯å†™äº‹ä»¶ï¼‰ã€ç­‰å¾…äº‹ä»¶å‘ç”Ÿï¼Œä»¥åŠå¤„ç†å‘ç”Ÿçš„äº‹ä»¶ã€‚è¿™é‡Œä»¥ä¸€ä¸ªå…¸å‹çš„ç½‘ç»œæœåŠ¡å™¨ä¸ºä¾‹ï¼Œæè¿°ä½¿ç”¨ <code>epoll</code> è¿›è¡Œç½‘ç»œè¯·æ±‚å¤šè·¯å¤ç”¨çš„ä¸»è¦æµç¨‹ï¼š</p>
<h3 id="1-åˆ›å»º-epoll-å®ä¾‹"><a href="#1-åˆ›å»º-epoll-å®ä¾‹" class="headerlink" title="1. åˆ›å»º epoll å®ä¾‹"></a>1. åˆ›å»º <code>epoll</code> å®ä¾‹</h3><p>é¦–å…ˆï¼ŒæœåŠ¡å™¨å¯åŠ¨æ—¶åˆ›å»ºä¸€ä¸ª <code>epoll</code> å®ä¾‹ï¼Œç”¨äºåç»­çš„äº‹ä»¶ç›‘å¬å’Œå¤„ç†ã€‚</p>
<pre><code class="c">int epfd = epoll_create1(0);
if (epfd == -1) &#123;
    perror(&quot;epoll_create1&quot;);
    exit(EXIT_FAILURE);
&#125;
</code></pre>
<h3 id="2-æ³¨å†Œæ„Ÿå…´è¶£çš„äº‹ä»¶"><a href="#2-æ³¨å†Œæ„Ÿå…´è¶£çš„äº‹ä»¶" class="headerlink" title="2. æ³¨å†Œæ„Ÿå…´è¶£çš„äº‹ä»¶"></a>2. æ³¨å†Œæ„Ÿå…´è¶£çš„äº‹ä»¶</h3><p>æœåŠ¡å™¨çš„ç›‘å¬socketéœ€è¦æ³¨å†Œåˆ° <code>epoll</code> å®ä¾‹ä¸­ï¼Œä»¥ä¾¿ <code>epoll</code> èƒ½å¤Ÿé€šçŸ¥åº”ç”¨ç¨‹åºæœ‰æ–°çš„è¿æ¥è¯·æ±‚ã€‚æ­¤å¤–ï¼Œéšç€æ–°çš„å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œç›¸åº”çš„å®¢æˆ·ç«¯socketä¹Ÿéœ€è¦æ³¨å†Œåˆ° <code>epoll</code> å®ä¾‹ä¸­ï¼Œä»¥ç›‘å¬è¿™äº›socketä¸Šçš„å¯è¯»æˆ–å¯å†™äº‹ä»¶ã€‚</p>
<pre><code class="c">struct epoll_event ev;
ev.events = EPOLLIN; // è¡¨ç¤ºå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦å¯ä»¥è¯»ï¼ˆå¦‚ï¼šTCP socketçš„è¿œç¨‹å…³é—­ï¼Œæœ‰æ•°æ®å¯è¯»ï¼‰
ev.data.fd = listen_fd; // listen_fd æ˜¯ç›‘å¬socketçš„æ–‡ä»¶æè¿°ç¬¦
if (epoll_ctl(epfd, EPOLL_CTL_ADD, listen_fd, &amp;ev) == -1) &#123;
    perror(&quot;epoll_ctl: listen_fd&quot;);
    exit(EXIT_FAILURE);
&#125;
</code></pre>
<h3 id="3-ç­‰å¾…äº‹ä»¶å‘ç”Ÿ"><a href="#3-ç­‰å¾…äº‹ä»¶å‘ç”Ÿ" class="headerlink" title="3. ç­‰å¾…äº‹ä»¶å‘ç”Ÿ"></a>3. ç­‰å¾…äº‹ä»¶å‘ç”Ÿ</h3><p>åº”ç”¨ç¨‹åºé€šè¿‡è°ƒç”¨ <code>epoll_wait</code> ç­‰å¾…äº‹ä»¶çš„å‘ç”Ÿã€‚è¿™ä¸ªè°ƒç”¨å¯ä»¥æŒ‡å®šè¶…æ—¶ï¼Œä»¥ä¾¿åœ¨æ²¡æœ‰äº‹ä»¶å‘ç”Ÿæ—¶ä¸ä¼šæ— é™æœŸåœ°é˜»å¡ã€‚</p>
<pre><code class="c">#define MAX_EVENTS 10
struct epoll_event events[MAX_EVENTS];

int nfds = epoll_wait(epfd, events, MAX_EVENTS, -1);
if (nfds == -1) &#123;
    perror(&quot;epoll_wait&quot;);
    exit(EXIT_FAILURE);
&#125;
</code></pre>
<h3 id="4-å¤„ç†å°±ç»ªçš„äº‹ä»¶"><a href="#4-å¤„ç†å°±ç»ªçš„äº‹ä»¶" class="headerlink" title="4. å¤„ç†å°±ç»ªçš„äº‹ä»¶"></a>4. å¤„ç†å°±ç»ªçš„äº‹ä»¶</h3><p>å½“ <code>epoll_wait</code> è¿”å›åï¼Œåº”ç”¨ç¨‹åºéå†äº‹ä»¶æ•°ç»„ï¼Œå¤„ç†æ¯ä¸ªå°±ç»ªçš„äº‹ä»¶ã€‚å¦‚æœäº‹ä»¶ä¸ç›‘å¬socketç›¸å…³ï¼ˆè¡¨ç¤ºæœ‰æ–°çš„è¿æ¥è¯·æ±‚ï¼‰ï¼ŒæœåŠ¡å™¨å°†æ¥å—è¿™ä¸ªè¿æ¥ï¼Œå¹¶å°†æ–°çš„å®¢æˆ·ç«¯socketæ³¨å†Œåˆ° <code>epoll</code> å®ä¾‹ä¸­ã€‚å¦‚æœäº‹ä»¶ä¸å®¢æˆ·ç«¯socketç›¸å…³ï¼ˆè¡¨ç¤ºæœ‰æ•°æ®å¯è¯»æˆ–å¯å†™ï¼‰ï¼ŒæœåŠ¡å™¨åˆ™è¿›è¡Œç›¸åº”çš„è¯»æˆ–å†™æ“ä½œã€‚</p>
<pre><code class="c">for (int n = 0; n &lt; nfds; ++n) &#123;
    if (events[n].data.fd == listen_fd) &#123;
        // å¤„ç†æ–°çš„è¿æ¥è¯·æ±‚
        int conn_fd = accept(listen_fd, (struct sockaddr *)&amp;client_addr, &amp;addr_len);
        if (conn_fd == -1) &#123;
            perror(&quot;accept&quot;);
            exit(EXIT_FAILURE);
        &#125;
        setnonblocking(conn_fd); // é€šå¸¸è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼
        ev.events = EPOLLIN | EPOLLET; // å¯è¯»äº‹ä»¶ï¼Œè¾¹ç¼˜è§¦å‘æ¨¡å¼
        ev.data.fd = conn_fd;
        if (epoll_ctl(epfd, EPOLL_CTL_ADD, conn_fd, &amp;ev) == -1) &#123;
            perror(&quot;epoll_ctl: conn_fd&quot;);
            exit(EXIT_FAILURE);
        &#125;
    &#125; else &#123;
        // å¤„ç†å®¢æˆ·ç«¯socketçš„äº‹ä»¶ï¼ˆè¯»æˆ–å†™ï¼‰
        int fd = events[n].data.fd;
        // è¿›è¡Œè¯»æˆ–å†™æ“ä½œ...
    &#125;
&#125;
</code></pre>
<p>é€šè¿‡ä»¥ä¸Šæµç¨‹ï¼ŒæœåŠ¡å™¨èƒ½å¤Ÿé«˜æ•ˆåœ°ç®¡ç†å¤šä¸ªç½‘ç»œè¿æ¥ï¼Œä½¿ç”¨å•ä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹å³å¯åŒæ—¶å¤„ç†å¤šä¸ªç½‘ç»œI&#x2F;Oæ“ä½œï¼Œå¤§å¤§æé«˜äº†ç½‘ç»œåº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œååé‡ã€‚</p>
<h2 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h2>
            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" style="color: #ffa2c4">é¢è¯•é¢˜</a>
        </span>
        
    </div>
    <a href="/2024/03/07/mdstorage/domain/%E6%8B%9B%E8%81%98/%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B8%85%E5%8D%95/" class="go-post">é˜…è¯»å…¨æ–‡</a>
</div>

<div class="post">
    <a href="/2024/03/07/mdstorage/domain/%E6%96%87%E6%A1%A3/mermaid%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%86%99%E4%BD%9C%E6%96%87%E6%A1%A3/">
        <h2 class="post-title">mermaidæµç¨‹å›¾å†™ä½œæ–‡æ¡£.md</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/domain/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                domain
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/3/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>Mermaid æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ã€åŸºäºæ–‡æœ¬çš„å›¾è¡¨ç»˜åˆ¶å·¥å…·ï¼Œå®ƒå…è®¸ç”¨æˆ·é€šè¿‡ç®€å•çš„æ–‡æœ¬æè¿°æ¥ç”Ÿæˆå¤æ‚çš„å›¾è¡¨ã€‚è¿™ç§æ–¹å¼ä½¿å¾—å›¾è¡¨çš„åˆ›å»ºå’Œç»´æŠ¤å˜å¾—æ›´åŠ å®¹æ˜“å’Œé«˜æ•ˆï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦å°†å›¾è¡¨ç‰ˆæœ¬æ§åˆ¶æˆ–ä¸æ–‡æ¡£é›†æˆæ—¶ã€‚Mermaid å‡å°‘äº†ä½¿ç”¨ä¼ ç»Ÿå›¾å½¢ç¼–è¾‘å·¥å…·çš„éœ€è¦ï¼Œä½¿éè®¾è®¡å¸ˆä¹Ÿèƒ½å¿«é€Ÿç»˜åˆ¶å‡ºçœ‹èµ·æ¥ä¸“ä¸šçš„å›¾è¡¨ã€‚</p>
<h3 id="ä¸»è¦ç‰¹ç‚¹"><a href="#ä¸»è¦ç‰¹ç‚¹" class="headerlink" title="ä¸»è¦ç‰¹ç‚¹"></a>ä¸»è¦ç‰¹ç‚¹</h3><ul>
<li><strong>æ˜“äºå­¦ä¹ å’Œä½¿ç”¨ï¼š</strong> Mermaid çš„è¯­æ³•ç®€å•ç›´è§‚ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å­¦ä¹ å‡ ä¸ªåŸºæœ¬çš„è¯­æ³•è§„åˆ™æ¥å¿«é€Ÿå¼€å§‹ç»˜å›¾ã€‚</li>
<li><strong>æ–‡æœ¬åˆ°å›¾å½¢ï¼š</strong> é€šè¿‡ç¼–å†™å’Œè§£ææ–‡æœ¬æè¿°ï¼ŒMermaid è‡ªåŠ¨ç”Ÿæˆå›¾è¡¨ã€‚è¿™ä½¿å¾—å›¾è¡¨æ˜“äºåœ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ç®¡ç†ï¼Œå¹¶å¯ä»¥åƒä»£ç ä¸€æ ·è¢«å®¡æŸ¥ã€‚</li>
<li><strong>å¹¿æ³›çš„å›¾è¡¨ç±»å‹æ”¯æŒï¼š</strong> Mermaid æ”¯æŒå¤šç§å›¾è¡¨ç±»å‹ï¼ŒåŒ…æ‹¬æµç¨‹å›¾ã€åºåˆ—å›¾ã€ç±»å›¾ã€çŠ¶æ€å›¾ã€ç”˜ç‰¹å›¾ä»¥åŠå®ä½“å…³ç³»å›¾ç­‰ï¼Œå‡ ä¹æ¶µç›–äº†æ‰€æœ‰æ–‡æ¡£å’ŒæŠ¥å‘Šä¸­å¸¸è§çš„å›¾è¡¨éœ€æ±‚ã€‚</li>
<li><strong>é›†æˆæ–¹ä¾¿ï¼š</strong> å®ƒå¯ä»¥è¢«é›†æˆåˆ°å¤šç§å¹³å°å’Œå·¥å…·ä¸­ï¼Œä¾‹å¦‚ Markdown ç¼–è¾‘å™¨ã€Confluenceã€GitHubã€GitLab ç­‰ï¼Œå¾ˆå¤šæ”¯æŒ Markdown çš„å¹³å°å·²ç»å†…ç½®äº†å¯¹ Mermaid çš„æ”¯æŒã€‚</li>
</ul>
<h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><p>Mermaid çš„è¯­æ³•ä¸»è¦ç”±å›¾è¡¨å£°æ˜ï¼ˆå®šä¹‰å›¾è¡¨çš„ç±»å‹å’Œæ–¹å‘ï¼‰ã€èŠ‚ç‚¹å®šä¹‰ï¼ˆå®šä¹‰å›¾è¡¨ä¸­çš„å…ƒç´ ï¼‰å’Œè¿æ¥ç¬¦ï¼ˆå®šä¹‰èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ï¼‰ç»„æˆã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æµç¨‹å›¾ç¤ºä¾‹çš„ Mermaid ä»£ç ï¼š</p>
<pre><code class="text">graph LR
    A[Start] --&gt; B&#123;Decision&#125;
    B --&gt;|Yes| C[Do Something]
    B --&gt;|No| D[Do Something Else]
    C --&gt; D[End]
</code></pre>
<pre><code class="mermaid">graph LR
    A[Start] --&gt; B&#123;Decision&#125;
    B --&gt;|Yes| C[Do Something]
    B --&gt;|No| D[Do Something Else]
    C --&gt; D[End]
</code></pre>
<p>è¿™æ®µä»£ç æè¿°äº†ä¸€ä¸ªåŒ…å«å¼€å§‹èŠ‚ç‚¹ã€å†³ç­–èŠ‚ç‚¹å’Œæ“ä½œèŠ‚ç‚¹çš„ç®€å•æµç¨‹ï¼Œå¹¶æŒ‡å®šäº†å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚</p>
<h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><p>Mermaid éå¸¸é€‚åˆè½¯ä»¶å¼€å‘ã€é¡¹ç›®ç®¡ç†ã€ç³»ç»Ÿè®¾è®¡å’Œæ–‡æ¡£ç¼–å†™ç­‰é¢†åŸŸï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å¿«é€Ÿåˆ›å»ºå’Œæ›´æ–°å›¾è¡¨ä»¥è¯´æ˜å¤æ‚è¿‡ç¨‹å’Œç³»ç»Ÿçš„åœºåˆã€‚</p>
<h3 id="æ€ä¹ˆå¼€å§‹"><a href="#æ€ä¹ˆå¼€å§‹" class="headerlink" title="æ€ä¹ˆå¼€å§‹"></a>æ€ä¹ˆå¼€å§‹</h3><p>è¦å¼€å§‹ä½¿ç”¨ Mermaidï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>ä½¿ç”¨æ”¯æŒ Mermaid çš„ Markdown ç¼–è¾‘å™¨æˆ–å¹³å°ã€‚</li>
<li>å®‰è£… Mermaid CLIï¼ˆå‘½ä»¤è¡Œæ¥å£ï¼‰å·¥å…·ï¼Œä»¥åœ¨æœ¬åœ°ç¯å¢ƒä¸­ç”Ÿæˆå›¾è¡¨ã€‚</li>
<li>åœ¨çº¿ä½¿ç”¨ Mermaid Live Editorï¼Œè¿™æ˜¯ä¸€ä¸ªå®˜æ–¹æä¾›çš„åœ¨çº¿å·¥å…·ï¼Œå…è®¸ç”¨æˆ·å³æ—¶é¢„è§ˆä»–ä»¬çš„ Mermaid å›¾è¡¨ä»£ç ç”Ÿæˆçš„å›¾å½¢ã€‚</li>
</ul>
<p>Mermaid çš„å­¦ä¹ æ›²çº¿ç›¸å¯¹å¹³ç¼“ï¼Œé€šè¿‡é˜…è¯»å…¶å®˜æ–¹æ–‡æ¡£å’Œåœ¨ Mermaid Live Editor ä¸Šè¿›è¡Œå®è·µï¼Œç”¨æˆ·å¯ä»¥å¿«é€ŸæŒæ¡å¦‚ä½•ç»˜åˆ¶åŸºç¡€ç”šè‡³æ˜¯å¤æ‚çš„å›¾è¡¨ã€‚</p>
<h2 id="mermaid-å¸¸ç”¨å†™ä½œå·¥å…·"><a href="#mermaid-å¸¸ç”¨å†™ä½œå·¥å…·" class="headerlink" title="mermaid å¸¸ç”¨å†™ä½œå·¥å…·"></a>mermaid å¸¸ç”¨å†™ä½œå·¥å…·</h2><ul>
<li><strong>typora</strong></li>
<li><a target="_blank" rel="noopener" href="https://mermaid.live/"><strong>mermaidåœ¨çº¿</strong></a></li>
<li><code>https://mermaid.nodejs.cn/syntax/block.html</code></li>
</ul>
<h2 id="mermaid-å¸¸ç”¨å·¥å…·åº“ä»£ç é£æ ¼å‚è€ƒ"><a href="#mermaid-å¸¸ç”¨å·¥å…·åº“ä»£ç é£æ ¼å‚è€ƒ" class="headerlink" title="mermaid å¸¸ç”¨å·¥å…·åº“ä»£ç é£æ ¼å‚è€ƒ"></a>mermaid å¸¸ç”¨å·¥å…·åº“ä»£ç é£æ ¼å‚è€ƒ</h2><pre><code class="text">---
title: mermaid å¸¸ç”¨å·¥å…·åº“ä»£ç é£æ ¼å‚è€ƒ
---
graph TB
    a[A]
    b[B]
    c[C]
    subgraph MySubGraphTitle
        comp_a:::Orange
        comp_a ---&gt; comp_b[B]
        comp_b ----&gt; comp_c
        comp_c ---&gt; comp_d
        comp_d -- Dè½¬E --&gt; comp_e
    end
    
    subgraph Layer1
        l_a
    end
    
    subgraph Layer2
        test_no_border:::NoBorder
    end


    linkStyle 1 stroke:blue,stroke-width:1px,color:black,stroke-dasharray: 5, 5;
    linkStyle 3 stroke:red,stroke-width:4px,color:green;

    %% stroke ä¸ºè¾¹æ¡†æˆ–çº¿æ¡ stroke: , stroke-width: å®½åº¦ stroke-dasharray: è™šçº¿
    %% fill ä¸ºå¡«å……ç»“ç‚¹çš„é¢œè‰²
    %% color ä¸ºç»“ç‚¹ä¸­æ–‡å­—é¢œè‰²
    
    %% fill: 

    style a stroke:#f66,stroke-width:2px;
    style b stroke:#66f,stroke-width:4px;

    style Layer1 fill:#FFEBB5
    classDef Orange fill:#f96

    %% é¢œè‰² transparent é€æ˜
    classDef NoBorder fill:transparent, stroke:transparent;
    
    %% æ ·å¼æµ‹è¯•åŒº
    %%classDef Orange fill:#f96
</code></pre>
<pre><code class="mermaid">---
title: mermaid å¸¸ç”¨å·¥å…·åº“ä»£ç é£æ ¼å‚è€ƒ
---
graph TB
    a[A]
    b[B]
    c[C]
    subgraph MySubGraphTitle
        comp_a:::Orange
        comp_a ---&gt; comp_b[B]
        comp_b ----&gt; comp_c
        comp_c ---&gt; comp_d
        comp_d -- Dè½¬E --&gt; comp_e
    end
    
    subgraph Layer1
        l_a
    end
    
    subgraph Layer2
        test_no_border:::NoBorder
    end


    linkStyle 1 stroke:blue,stroke-width:1px,color:black,stroke-dasharray: 5, 5;
    linkStyle 3 stroke:red,stroke-width:4px,color:green;

    %% stroke ä¸ºè¾¹æ¡†æˆ–çº¿æ¡ stroke: , stroke-width: å®½åº¦ stroke-dasharray: è™šçº¿
    %% fill ä¸ºå¡«å……ç»“ç‚¹çš„é¢œè‰²
    %% color ä¸ºç»“ç‚¹ä¸­æ–‡å­—é¢œè‰²
    
    %% fill: 

    style a stroke:#f66,stroke-width:2px;
    style b stroke:#66f,stroke-width:4px;

    style Layer1 fill:#FFEBB5
    classDef Orange fill:#f96

    %% é¢œè‰² transparent é€æ˜
    classDef NoBorder fill:transparent, stroke:transparent;
    
    %% æ ·å¼æµ‹è¯•åŒº
    %%classDef Orange fill:#f96
</code></pre>
<h3 id="å¸¸ç”¨é¢œè‰²æ–¹æ¡ˆ"><a href="#å¸¸ç”¨é¢œè‰²æ–¹æ¡ˆ" class="headerlink" title="å¸¸ç”¨é¢œè‰²æ–¹æ¡ˆ"></a>å¸¸ç”¨é¢œè‰²æ–¹æ¡ˆ</h3><ul>
<li><p>åŸºç¡€è‰²ï¼š</p>
<p> æä¾›è¶³å¤Ÿå¯¹æ¯”åº¦ï¼Œé€‚ç”¨äºå¤§å¤šæ•°èƒŒæ™¯å’Œç”¨é€”ã€‚</p>
<ul>
<li>è“è‰²ï¼š<code>#1E90FF</code>ï¼ˆé“å¥‡è“ï¼‰ï¼Œç»™äººä»¥ä¸“ä¸šå’Œå¯é çš„æ„Ÿè§‰ã€‚</li>
<li>ç»¿è‰²ï¼š<code>#32CD32</code>ï¼ˆé…¸æ©™ç»¿ï¼‰ï¼Œä»£è¡¨å¢é•¿å’Œç¹è£ã€‚</li>
<li>çº¢è‰²ï¼š<code>#FF6347</code>ï¼ˆç•ªèŒ„ï¼‰ï¼Œç”¨äºè­¦å‘Šæˆ–å¼ºè°ƒã€‚</li>
<li>é»„è‰²ï¼š<code>#FFD700</code>ï¼ˆé‡‘è‰²ï¼‰ï¼Œç”¨æ¥å¸å¼•æ³¨æ„æˆ–è¡¨ç¤ºè­¦å‘Šï¼Œä½†æ¯”çº¢è‰²æ›´æ¸©å’Œã€‚</li>
<li>ç°è‰²ï¼š<code>#708090</code>ï¼ˆçŸ³æ¿ç°ï¼‰ï¼Œé€‚åˆèƒŒæ™¯å’Œéä¸»è¦å…ƒç´ ï¼Œæä¾›è¶³å¤Ÿå¯¹æ¯”è€Œä¸è¿‡äºæŠ¢çœ¼ã€‚</li>
</ul>
</li>
</ul>
<h3 id="è¾…åŠ©è‰²æ–¹æ¡ˆ"><a href="#è¾…åŠ©è‰²æ–¹æ¡ˆ" class="headerlink" title="è¾…åŠ©è‰²æ–¹æ¡ˆ"></a>è¾…åŠ©è‰²æ–¹æ¡ˆ</h3><p>è¾…åŠ©è‰²å¯ç”¨äºå¼ºè°ƒã€åˆ†ç±»æˆ–ä½œä¸ºåŸºç¡€è‰²çš„è¡¥å……ï¼š</p>
<ul>
<li>æµ…è“è‰²ï¼š<code>#87CEFA</code>ï¼ˆæµ…å¤©è“è‰²ï¼‰ï¼Œæ¸©å’Œä¸”æ˜“äºè§‚çœ‹ï¼Œé€‚åˆä½œä¸ºèƒŒæ™¯æˆ–å¼ºè°ƒä¿¡æ¯ã€‚</li>
<li>ç´«è‰²ï¼š<code>#9370DB</code>ï¼ˆä¸­ç´«è‰²ï¼‰ï¼Œç¥ç§˜ä¸”ä¼˜é›…ï¼Œé€‚åˆåˆ›æ„å±•ç¤ºã€‚</li>
<li>æ©™è‰²ï¼š<code>#FFA07A</code>ï¼ˆæµ…æ©™è‰²ï¼‰ï¼Œæ´»æ³¼ä¸”å‹å¥½ï¼Œé€‚åˆå¸å¼•æ³¨æ„ã€‚</li>
<li>ç²‰è‰²ï¼š<code>#FFC0CB</code>ï¼ˆç²‰çº¢ï¼‰ï¼Œæ¸©æŸ”ä¸”äº²åˆ‡ï¼Œç”¨äºæ¸©å’Œå¼ºè°ƒã€‚</li>
</ul>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/markdown/" style="color: #00a596">markdown</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/mermaid/" style="color: #ff7d73">mermaid</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/typora/" style="color: #ffa2c4">typora</a>
        </span>
        
    </div>
    <a href="/2024/03/07/mdstorage/domain/%E6%96%87%E6%A1%A3/mermaid%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%86%99%E4%BD%9C%E6%96%87%E6%A1%A3/" class="go-post">é˜…è¯»å…¨æ–‡</a>
</div>

<div class="post">
    <a href="/2024/03/06/mdstorage/domain/network/%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%B7%AF%E7%94%B1%E5%99%A8/">
        <h2 class="post-title">äº¤æ¢æœºè·¯ç”±å™¨.md</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/domain/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                domain
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/3/6
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h2 id="LAN-ä¸­ç½‘å…³é€šå¸¸å­˜åœ¨äºè·¯ç”±å™¨ä¸­"><a href="#LAN-ä¸­ç½‘å…³é€šå¸¸å­˜åœ¨äºè·¯ç”±å™¨ä¸­" class="headerlink" title="LAN ä¸­ç½‘å…³é€šå¸¸å­˜åœ¨äºè·¯ç”±å™¨ä¸­"></a>LAN ä¸­ç½‘å…³é€šå¸¸å­˜åœ¨äºè·¯ç”±å™¨ä¸­</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªå±€åŸŸç½‘ï¼ˆLANï¼‰ä¸Šçš„ç½‘å…³é€šå¸¸å­˜åœ¨äºè·¯ç”±å™¨ä¸­ã€‚ç½‘å…³æ˜¯ä¸€ä¸ªç½‘ç»œè¿æ¥ç‚¹ï¼Œå®ƒå…è®¸ä¸€ä¸ªç½‘ç»œä¸Šçš„è®¾å¤‡è®¿é—®å¦ä¸€ä¸ªç½‘ç»œã€‚åœ¨å¤§å¤šæ•°å®¶åº­å’Œå°å‹ä¼ä¸šç½‘ç»œä¸­ï¼Œç½‘å…³è®¾å¤‡æä¾›äº†å¤šç§åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>è·¯ç”±åŠŸèƒ½</strong>ï¼šå°†æ•°æ®åŒ…ä»ä¸€ä¸ªç½‘ç»œè·¯ç”±åˆ°å¦ä¸€ä¸ªç½‘ç»œï¼Œé€šå¸¸æ˜¯ä»å±€åŸŸç½‘ï¼ˆLANï¼‰è·¯ç”±åˆ°å¹¿åŸŸç½‘ï¼ˆWANï¼‰ï¼Œå¦‚äº’è”ç½‘ã€‚</li>
<li><strong>NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰</strong>ï¼šå…è®¸å¤šä¸ªè®¾å¤‡å…±äº«ä¸€ä¸ªå…¬å…± IP åœ°å€è¿›è¡Œäº’è”ç½‘è®¿é—®ï¼Œå¢å¼ºäº†ç½‘ç»œçš„å®‰å…¨æ€§å’Œæ•ˆç‡ã€‚</li>
<li><strong>DHCPï¼ˆåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰</strong>ï¼šè‡ªåŠ¨åˆ†é… IP åœ°å€ç»™ç½‘ç»œä¸Šçš„è®¾å¤‡ï¼Œç®€åŒ–äº†ç½‘ç»œç®¡ç†ã€‚</li>
<li><strong>é˜²ç«å¢™åŠŸèƒ½</strong>ï¼šæä¾›åŸºæœ¬çš„ç½‘ç»œå®‰å…¨é˜²æŠ¤ï¼Œé˜²æ­¢æœªç»æˆæƒçš„è®¿é—®ã€‚</li>
</ul>
<h2 id="è·¯ç”±å™¨ã€äº¤æ¢æœºå¦‚ä½•å‚ä¸åˆ°-ARP-åè®®ä¸­"><a href="#è·¯ç”±å™¨ã€äº¤æ¢æœºå¦‚ä½•å‚ä¸åˆ°-ARP-åè®®ä¸­" class="headerlink" title="è·¯ç”±å™¨ã€äº¤æ¢æœºå¦‚ä½•å‚ä¸åˆ° ARP åè®®ä¸­"></a>è·¯ç”±å™¨ã€äº¤æ¢æœºå¦‚ä½•å‚ä¸åˆ° ARP åè®®ä¸­</h2><h3 id="äº¤æ¢æœº"><a href="#äº¤æ¢æœº" class="headerlink" title="äº¤æ¢æœº"></a>äº¤æ¢æœº</h3><p>äº¤æ¢æœºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼ˆç¬¬äºŒå±‚ï¼‰ï¼Œä¸»è¦è´Ÿè´£è½¬å‘åŸºäº MAC åœ°å€çš„å¸§ã€‚åœ¨ ARP åè®®ä¸­ï¼Œäº¤æ¢æœºçš„è§’è‰²ä¸»è¦åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>è½¬å‘ ARP è¯·æ±‚</strong>ï¼šå½“äº¤æ¢æœºæ¥æ”¶åˆ°ä¸€ä¸ª ARP è¯·æ±‚ï¼ˆä¸€ä¸ªå¹¿æ’­å¸§ï¼‰ï¼Œå®ƒä¼šå°†è¿™ä¸ªè¯·æ±‚è½¬å‘åˆ°é™¤äº†æ¥æ”¶è¯¥è¯·æ±‚çš„ç«¯å£ä¹‹å¤–çš„æ‰€æœ‰æ´»åŠ¨ç«¯å£ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†ç¡®ä¿å±€åŸŸç½‘å†…çš„æ‰€æœ‰ä¸»æœºéƒ½æœ‰æœºä¼šæ¥æ”¶åˆ°è¿™ä¸ª ARP è¯·æ±‚ã€‚</li>
<li><strong>å­¦ä¹  MAC åœ°å€</strong>ï¼šè™½ç„¶äº¤æ¢æœºä¸ç›´æ¥å‚ä¸ ARP è¯·æ±‚çš„ç”Ÿæˆæˆ–å“åº”ï¼Œä½†å®ƒä»¬ä¼šåˆ©ç”¨ç»è¿‡çš„ ARP æµé‡æ¥å­¦ä¹ ç½‘ç»œä¸Šè®¾å¤‡çš„ MAC åœ°å€ã€‚å½“äº¤æ¢æœºè½¬å‘ ARP è¯·æ±‚æˆ–å“åº”æ—¶ï¼Œå®ƒä¼šåœ¨å…¶ MAC åœ°å€è¡¨ä¸­è®°å½•å‘é€æ–¹çš„ MAC åœ°å€å’Œå¯¹åº”çš„ç«¯å£å·ï¼Œä»è€Œä¼˜åŒ–æœªæ¥çš„å¸§è½¬å‘è¿‡ç¨‹ã€‚</li>
<li><strong>ä¸å¹²é¢„ ARP æµç¨‹</strong>ï¼šäº¤æ¢æœºä¸ä¼šä¿®æ”¹ ARP è¯·æ±‚æˆ–å“åº”çš„å†…å®¹ã€‚å®ƒçš„ä¸»è¦ä»»åŠ¡æ˜¯é€æ˜åœ°ä¼ é€’è¿™äº›å¸§ï¼Œç¡®ä¿å®ƒä»¬åˆ°è¾¾ç›®çš„åœ°ã€‚</li>
</ol>
<h3 id="è·¯ç”±å™¨"><a href="#è·¯ç”±å™¨" class="headerlink" title="è·¯ç”±å™¨"></a>è·¯ç”±å™¨</h3><p>è·¯ç”±å™¨å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼ˆç¬¬ä¸‰å±‚ï¼‰ï¼Œè´Ÿè´£åœ¨ä¸åŒç½‘ç»œä¹‹é—´è½¬å‘æ•°æ®åŒ…ã€‚åœ¨ ARP çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè·¯ç”±å™¨æœ‰å‡ ç§ä¸åŒçš„å‚ä¸æ–¹å¼ï¼š</p>
<ol>
<li><strong>å“åº” ARP è¯·æ±‚</strong>ï¼šå½“ä¸»æœºå°è¯•ä¸ä¸åŒå­ç½‘çš„ä¸»æœºé€šä¿¡æ—¶ï¼Œå®ƒä¼šå‘é€ä¸€ä¸ª ARP è¯·æ±‚æ¥æŸ¥æ‰¾è¯¥ç›®çš„åœ°çš„ MAC åœ°å€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè·¯ç”±å™¨ä¼šå“åº” ARP è¯·æ±‚ï¼Œæä¾›å…¶è‡ªå·±çš„ MAC åœ°å€ä½œä¸ºç›®çš„åœ°ï¼ˆä¸‹ä¸€è·³ï¼‰ã€‚è¿™æ ·ï¼Œå‘é€æ–¹ä¼šå°†æ•°æ®åŒ…å‘é€åˆ°è·¯ç”±å™¨ï¼Œç„¶åè·¯ç”±å™¨å°†æ•°æ®åŒ…è½¬å‘åˆ°æ­£ç¡®çš„ç½‘ç»œã€‚</li>
<li><strong>ç”Ÿæˆ ARP è¯·æ±‚</strong>ï¼šå½“è·¯ç”±å™¨éœ€è¦å°†æ•°æ®åŒ…è½¬å‘åˆ°å…¶ç›´æ¥è¿æ¥çš„ç½‘ç»œä¸Šçš„ä¸»æœºï¼Œä½†å®ƒä¸çŸ¥é“è¯¥ä¸»æœºçš„ MAC åœ°å€æ—¶ï¼Œå®ƒä¼šç”Ÿæˆ ARP è¯·æ±‚ã€‚ä¸€æ—¦æ”¶åˆ° ARP å“åº”å¹¶å­¦ä¹ äº†ç›®æ ‡ä¸»æœºçš„ MAC åœ°å€ï¼Œè·¯ç”±å™¨å°±å¯ä»¥å°†æ•°æ®åŒ…æ­£ç¡®åœ°è½¬å‘ç»™è¯¥ä¸»æœºã€‚</li>
<li><strong>ç»´æŠ¤ ARP è¡¨</strong>ï¼šè·¯ç”±å™¨ç»´æŠ¤è‡ªå·±çš„ ARP è¡¨ï¼ˆæˆ– ARP ç¼“å­˜ï¼‰ï¼Œå…¶ä¸­åŒ…å«å…¶ç›´æ¥è¿æ¥çš„ç½‘ç»œä¸Šå·²çŸ¥ä¸»æœºçš„ IP åˆ° MAC åœ°å€æ˜ å°„ã€‚è¿™æ ·å¯ä»¥åŠ å¿«åç»­æ•°æ®åŒ…çš„è½¬å‘é€Ÿåº¦ï¼Œå› ä¸ºè·¯ç”±å™¨å¯ä»¥ç›´æ¥ä» ARP è¡¨ä¸­æŸ¥æ‰¾åˆ°éœ€è¦çš„ MAC åœ°å€ã€‚</li>
<li><strong>ä»£ç† ARP</strong>ï¼šåœ¨æŸäº›é…ç½®ä¸­ï¼Œè·¯ç”±å™¨å¯èƒ½æ‰§è¡Œä»£ç† ARP çš„è§’è‰²ï¼Œå¸®åŠ©ä¸åœ¨åŒä¸€å­ç½‘å†…çš„ä¸»æœºç›¸äº’é€šä¿¡ã€‚é€šè¿‡ä»£ç† ARPï¼Œè·¯ç”±å™¨å“åº”ä»£è¡¨å¦ä¸€ä¸ªä¸åŒç½‘ç»œçš„ä¸»æœºçš„ ARP è¯·æ±‚ï¼Œå…è®¸ä¸¤ä¸ªä¸åŒç½‘ç»œçš„è®¾å¤‡é€šè¿‡è·¯ç”±å™¨ä¸­ç»§æ¥é€šä¿¡ï¼Œå°½ç®¡è¿™ç§åšæ³•åœ¨ç°ä»£ç½‘ç»œä¸­è¾ƒå°‘ä½¿ç”¨ï¼Œå› ä¸ºå®ƒå¯èƒ½å¯¼è‡´ç½‘ç»œæ‹“æ‰‘å’Œæµé‡ç®¡ç†çš„å¤æ‚æ€§å¢åŠ ã€‚</li>
</ol>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/network/" style="color: #03a9f4">network</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/%E4%BA%A4%E6%8D%A2%E6%9C%BA/" style="color: #ff7d73">äº¤æ¢æœº</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/" style="color: #ffa2c4">è·¯ç”±å™¨</a>
        </span>
        
    </div>
    <a href="/2024/03/06/mdstorage/domain/network/%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%B7%AF%E7%94%B1%E5%99%A8/" class="go-post">é˜…è¯»å…¨æ–‡</a>
</div>

<div class="post">
    <a href="/2024/03/06/mdstorage/domain/network/%E5%B8%B8%E8%A7%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%B7%AF%E7%94%B1%E5%99%A8%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91%E5%9B%BE/">
        <h2 class="post-title">å¸¸è§äº¤æ¢æœºè·¯ç”±å™¨ç½‘ç»œæ‹“æ‰‘å›¾.md</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/domain/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                domain
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/3/6
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h2 id="ç½‘ç»œæ‹“æ‰‘å›¾"><a href="#ç½‘ç»œæ‹“æ‰‘å›¾" class="headerlink" title="ç½‘ç»œæ‹“æ‰‘å›¾"></a>ç½‘ç»œæ‹“æ‰‘å›¾</h2><pre><code class="mermaid">graph TD;
    subgraph WAN
    Internet[äº’è”ç½‘]
    end

    subgraph LAN
    Router[è·¯ç”±å™¨] --&gt; |å†…ç½‘æ¥å£| Switch1[äº¤æ¢æœº1]
    Router --&gt; |å†…ç½‘æ¥å£| Switch2[äº¤æ¢æœº2]
    Switch1 --&gt; PC1[PC 1]
    Switch1 --&gt; PC2[PC 2]
    Switch2 --&gt; Terminal1[ç»ˆç«¯è®¾å¤‡ 1]
    Switch2 --&gt; Terminal2[ç»ˆç«¯è®¾å¤‡ 2]
    Switch1 --&gt; Switch3[äº¤æ¢æœº3]
    Switch3 --&gt; PC3[PC 3]
    Switch3 --&gt; Terminal3[ç»ˆç«¯è®¾å¤‡ 3]
    end

    Internet --&gt; |å¤–ç½‘æ¥å£| Router

    classDef router fill:#f9d5e5,stroke:#b84a62,stroke-width:2px;
    classDef switch fill:#eef5db,stroke:#d2b48c,stroke-width:2px;
    classDef device fill:#d5eaf4,stroke:#6b8ba4,stroke-width:2px;
    classDef internet fill:#c2cad0,stroke:#6b7b8b,stroke-width:2px,stroke-dasharray: 5, 5;

    class Router router;
    class Switch1,Switch2,Switch3 switch;
    class PC1,PC2,PC3,Terminal1,Terminal2,Terminal3 device;
    class Internet internet;
</code></pre>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/network/" style="color: #03a9f4">network</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/%E4%BA%A4%E6%8D%A2%E6%9C%BA/" style="color: #00bcd4">äº¤æ¢æœº</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/" style="color: #ff7d73">è·¯ç”±å™¨</a>
        </span>
        
    </div>
    <a href="/2024/03/06/mdstorage/domain/network/%E5%B8%B8%E8%A7%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%B7%AF%E7%94%B1%E5%99%A8%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91%E5%9B%BE/" class="go-post">é˜…è¯»å…¨æ–‡</a>
</div>

<div class="post">
    <a href="/2024/03/05/mdstorage/domain/linux/%E7%BD%91%E5%8D%A1%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/">
        <h2 class="post-title">ç½‘å¡å‘½åguize.md</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/domain/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                domain
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/3/5
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h2 id="eth0-å’Œ-enp1s0"><a href="#eth0-å’Œ-enp1s0" class="headerlink" title="eth0 å’Œ enp1s0"></a>eth0 å’Œ enp1s0</h2><p><code>eth0</code>å’Œ<code>enp1s0</code>è¿™ä¸¤ç§å‘½åæ–¹å¼ä»£è¡¨äº†Linuxç³»ç»Ÿä¸­ç½‘ç»œæ¥å£ï¼ˆç½‘å¡ï¼‰çš„ä¸¤ç§ä¸åŒå‘½åè§„åˆ™ã€‚å®ƒä»¬çš„åŒºåˆ«ä¸»è¦æºäºç½‘ç»œæ¥å£çš„å‘½åæ–¹æ¡ˆï¼Œå³ä¼ ç»Ÿå‘½åæ–¹æ¡ˆä¸é¢„æµ‹ç½‘ç»œæ¥å£åç§°ï¼ˆPredictable Network Interface Namesï¼‰ã€‚</p>
<h3 id="ä¼ ç»Ÿå‘½åæ–¹æ¡ˆï¼ˆeth0ï¼‰"><a href="#ä¼ ç»Ÿå‘½åæ–¹æ¡ˆï¼ˆeth0ï¼‰" class="headerlink" title="ä¼ ç»Ÿå‘½åæ–¹æ¡ˆï¼ˆeth0ï¼‰"></a>ä¼ ç»Ÿå‘½åæ–¹æ¡ˆï¼ˆ<code>eth0</code>ï¼‰</h3><ul>
<li><strong>å‘½åæ–¹å¼</strong>ï¼šåœ¨ä¼ ç»Ÿçš„å‘½åæ–¹æ¡ˆä¸­ï¼Œä»¥å¤ªç½‘æ¥å£é€šå¸¸è¢«å‘½åä¸º<code>eth0</code>ã€<code>eth1</code>ç­‰ã€‚è¿™ç§å‘½åæ–¹å¼ç®€å•ç›´è§‚ï¼Œæ˜“äºç†è§£ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå‘½åæ˜¯åŸºäºå†…æ ¸æ£€æµ‹åˆ°çš„æ¥å£é¡ºåºï¼Œä½†è¿™ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼šç½‘ç»œæ¥å£çš„åç§°åœ¨ç³»ç»Ÿé‡å¯æˆ–æ·»åŠ æ–°çš„ç½‘å¡æ—¶å¯èƒ½ä¼šå˜åŒ–ï¼Œå› ä¸ºå®ƒä»¬æ˜¯æ ¹æ®å‘ç°çš„é¡ºåºå‘½åçš„ã€‚è¿™ç§ä¸å¯é¢„æµ‹æ€§å¯èƒ½ä¼šå¯¼è‡´é…ç½®é”™è¯¯ã€‚</li>
</ul>
<h3 id="é¢„æµ‹ç½‘ç»œæ¥å£åç§°ï¼ˆenp1s0ï¼‰"><a href="#é¢„æµ‹ç½‘ç»œæ¥å£åç§°ï¼ˆenp1s0ï¼‰" class="headerlink" title="é¢„æµ‹ç½‘ç»œæ¥å£åç§°ï¼ˆenp1s0ï¼‰"></a>é¢„æµ‹ç½‘ç»œæ¥å£åç§°ï¼ˆ<code>enp1s0</code>ï¼‰</h3><ul>
<li><p>å‘½åæ–¹å¼</p>
<p>ï¼šä¸ºäº†è§£å†³ä¼ ç»Ÿå‘½åæ–¹æ¡ˆçš„ä¸å¯é¢„æµ‹æ€§é—®é¢˜ï¼Œå¼•å…¥äº†é¢„æµ‹ç½‘ç»œæ¥å£åç§°ã€‚è¿™ç§å‘½åæ–¹å¼è¯•å›¾æä¾›ä¸€ç§æ›´ä¸€è‡´ã€å¯é¢„æµ‹çš„æ–¹æ³•æ¥å‘½åç½‘ç»œæ¥å£ã€‚ä¾‹å¦‚ï¼Œ</p>
<pre><code>enp1s0
</code></pre>
<p>ä»£è¡¨çš„æ˜¯ï¼š</p>
<ul>
<li><code>en</code>ï¼šEthernet</li>
<li><code>p1</code>ï¼šPCI bus 1</li>
<li><code>s0</code>ï¼šslot 0</li>
</ul>
</li>
<li><p><strong>ç‰¹ç‚¹</strong>ï¼šè¿™ç§å‘½åè§„åˆ™åŸºäºç¡¬ä»¶çš„ç‰©ç†ä½ç½®ï¼ˆå¦‚PCIæ’æ§½ä½ç½®ï¼‰æ¥å‘½åç½‘ç»œæ¥å£ï¼Œå› æ­¤å³ä½¿åœ¨ç³»ç»Ÿé‡å¯æˆ–ç¡¬ä»¶æ›´æ”¹çš„æƒ…å†µä¸‹ï¼Œç½‘ç»œæ¥å£çš„åç§°ä¹Ÿä¿æŒä¸å˜ï¼Œä»è€Œæé«˜äº†é…ç½®çš„ä¸€è‡´æ€§å’Œç¨³å®šæ€§ã€‚</p>
</li>
</ul>
<h3 id="è½¬å˜çš„åŸå› "><a href="#è½¬å˜çš„åŸå› " class="headerlink" title="è½¬å˜çš„åŸå› "></a>è½¬å˜çš„åŸå› </h3><p>è½¬å‘é¢„æµ‹ç½‘ç»œæ¥å£åç§°çš„ä¸»è¦åŸå› æ˜¯ä¸ºäº†è§£å†³è®¾å¤‡å‘½åçš„ä¸ä¸€è‡´æ€§å’Œä¸å¯é¢„æµ‹æ€§ï¼Œå°¤å…¶æ˜¯åœ¨å…·æœ‰å¤šä¸ªç½‘ç»œæ¥å£çš„ç³»ç»Ÿä¸­ã€‚è¿™æœ‰åŠ©äºç³»ç»Ÿç®¡ç†å‘˜æ›´å‡†ç¡®åœ°è¯†åˆ«å’Œé…ç½®ç½‘ç»œæ¥å£ï¼Œå°¤å…¶æ˜¯åœ¨è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œç»´æŠ¤å¤§è§„æ¨¡ç³»ç»Ÿæ—¶ã€‚</p>
<p>ç³»ç»Ÿå¯ä»¥é…ç½®ä¸ºä½¿ç”¨ä»»ä¸€ç§å‘½åæ–¹æ¡ˆï¼Œè€Œä¸”æŸäº›Linuxå‘è¡Œç‰ˆå…è®¸ç”¨æˆ·é€šè¿‡ä¿®æ”¹udevè§„åˆ™ç­‰æ–¹æ³•æ¥è‡ªå®šä¹‰ç½‘ç»œæ¥å£çš„å‘½åæ–¹å¼ã€‚</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/Linux/" style="color: #00a596">Linux</a>
        </span>
        
    </div>
    <a href="/2024/03/05/mdstorage/domain/linux/%E7%BD%91%E5%8D%A1%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/" class="go-post">é˜…è¯»å…¨æ–‡</a>
</div>


        <div class="page-current">
    
    <a class="page-num" href="/page/14/">
        <i class="fa-solid fa-caret-left fa-fw"></i>
    </a>
    <a class="page-num" href="/">1</a>
    <span class="page-omit">...</span>
    
    <span class="current">15</span>
    
    <a class="page-num" href="/page/16">
        16
    </a>
    
    
    <a class="page-num" href="/page/17">
        17
    </a>
    
    
    <span class="page-omit">...</span>
    <a class="page-num" href="/page/28">28</a>
    
    
    <a class="page-num" href="/page/16/">
        <i class="fa-solid fa-caret-right fa-fw"></i>
    </a>
    
</div>

    </div>
    
    <div id="home-card">
        <div id="card-style">
    <div id="card-div">
        <div class="avatar">
            <img src="/images/avatar.jpg" alt="avatar" />
        </div>
        <div class="name">xiaoy</div>
        <div class="description">
            <p>Description<br>â€¦</p>

        </div>
        
        
        <div class="friend-links">
            
            <div class="friend-link">
                <a target="_blank" rel="noopener" href="https://argvchs.github.io">Argvchs</a>
            </div>
            
        </div>
        
    </div>
</div>

    </div>
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2024 - 2024 Xiaoy
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;xiaoy
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
</body>
</html>
